"use strict";const n=require("electron");n.contextBridge.exposeInMainWorld("ipcRenderer",{on(...e){const[r,o]=e;return n.ipcRenderer.on(r,(i,...t)=>o(i,...t))},off(...e){const[r,...o]=e;return n.ipcRenderer.off(r,...o)},send(...e){const[r,...o]=e;return n.ipcRenderer.send(r,...o)},invoke(...e){const[r,...o]=e;return n.ipcRenderer.invoke(r,...o)}});n.contextBridge.exposeInMainWorld("serialAPI",{listPorts:()=>n.ipcRenderer.invoke("serial:list-ports"),open:(e,r)=>n.ipcRenderer.invoke("serial:open",{connectionId:e,options:r}),close:e=>n.ipcRenderer.invoke("serial:close",{connectionId:e}),write:(e,r)=>n.ipcRenderer.invoke("serial:write",{connectionId:e,data:r}),onData:(e,r)=>{const o=(i,t)=>{t.connectionId===e&&r(t.data)};return n.ipcRenderer.on("serial:data",o),()=>n.ipcRenderer.off("serial:data",o)},onClosed:(e,r)=>{const o=(i,t)=>{t.connectionId===e&&r()};return n.ipcRenderer.on("serial:closed",o),()=>n.ipcRenderer.off("serial:closed",o)},onError:(e,r)=>{const o=(i,t)=>{t.connectionId===e&&r(t.error)};return n.ipcRenderer.on("serial:error",o),()=>n.ipcRenderer.off("serial:error",o)}});n.contextBridge.exposeInMainWorld("mqttAPI",{connect:(e,r)=>n.ipcRenderer.invoke("mqtt:connect",{connectionId:e,config:r}),disconnect:e=>n.ipcRenderer.invoke("mqtt:disconnect",{connectionId:e}),publish:(e,r,o,i)=>n.ipcRenderer.invoke("mqtt:publish",{connectionId:e,topic:r,payload:o,options:i}),subscribe:(e,r)=>n.ipcRenderer.invoke("mqtt:subscribe",{connectionId:e,topic:r}),unsubscribe:(e,r)=>n.ipcRenderer.invoke("mqtt:unsubscribe",{connectionId:e,topic:r}),onMessage:(e,r)=>{const o=(i,t)=>{t.connectionId===e&&r(t.topic,t.payload)};return n.ipcRenderer.on("mqtt:message",o),()=>n.ipcRenderer.off("mqtt:message",o)},onStatus:(e,r)=>{const o=(i,t)=>{t.connectionId===e&&r(t.status)};return n.ipcRenderer.on("mqtt:status",o),()=>n.ipcRenderer.off("mqtt:status",o)},onError:(e,r)=>{const o=(i,t)=>{t.connectionId===e&&r(t.error)};return n.ipcRenderer.on("mqtt:error",o),()=>n.ipcRenderer.off("mqtt:error",o)}});n.contextBridge.exposeInMainWorld("sessionAPI",{save:e=>n.ipcRenderer.invoke("session:save",e),load:()=>n.ipcRenderer.invoke("session:load")});n.contextBridge.exposeInMainWorld("com0comAPI",{exec:e=>n.ipcRenderer.invoke("com0com:exec",e),installDriver:()=>n.ipcRenderer.invoke("com0com:install")});n.contextBridge.exposeInMainWorld("tcpAPI",{start:e=>n.ipcRenderer.invoke("tcp:start",e),stop:e=>n.ipcRenderer.invoke("tcp:stop",e),write:(e,r)=>n.ipcRenderer.invoke("tcp:write",{port:e,data:r}),onData:e=>{const r=(o,i)=>{e(i.port,i.data)};return n.ipcRenderer.on("tcp:data",r),()=>n.ipcRenderer.off("tcp:data",r)}});

"use strict";var Mf=Object.defineProperty;var Bf=(e,t,r)=>t in e?Mf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var qt=(e,t,r)=>Bf(e,typeof t!="symbol"?t+"":t,r);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const V=require("electron"),Ce=require("node:path"),vt=require("fs"),jf=require("constants"),Gr=require("stream"),As=require("util"),wl=require("assert"),se=require("path"),Yn=require("child_process"),vl=require("events"),Wr=require("crypto"),_l=require("tty"),zn=require("os"),_t=require("url"),Al=require("zlib"),Hf=require("http");var be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Be={},kt={},Pe={};Pe.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,s)=>i!=null?n(i):r(s)),e.apply(this,t)})},"name",{value:e.name})};Pe.fromPromise=function(e){return Object.defineProperty(function(...t){const r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r)},"name",{value:e.name})};var ct=jf,qf=process.cwd,Nn=null,Gf=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Nn||(Nn=qf.call(process)),Nn};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var Ao=process.chdir;process.chdir=function(e){Nn=null,Ao.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ao)}var Wf=Vf;function Vf(e){ct.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,f,h){h&&process.nextTick(h)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,f,h,m){m&&process.nextTick(m)},e.lchownSync=function(){}),Gf==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function f(h,m,w){var E=Date.now(),A=0;c(h,m,function S(T){if(T&&(T.code==="EACCES"||T.code==="EPERM"||T.code==="EBUSY")&&Date.now()-E<6e4){setTimeout(function(){e.stat(m,function(P,$){P&&P.code==="ENOENT"?c(h,m,S):w(T)})},A),A<100&&(A+=10);return}w&&w(T)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function f(h,m,w,E,A,S){var T;if(S&&typeof S=="function"){var P=0;T=function($,K,ee){if($&&$.code==="EAGAIN"&&P<10)return P++,c.call(e,h,m,w,E,A,T);S.apply(this,arguments)}}return c.call(e,h,m,w,E,A,T)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(f,h,m,w,E){for(var A=0;;)try{return c.call(e,f,h,m,w,E)}catch(S){if(S.code==="EAGAIN"&&A<10){A++;continue}throw S}}}(e.readSync);function t(c){c.lchmod=function(f,h,m){c.open(f,ct.O_WRONLY|ct.O_SYMLINK,h,function(w,E){if(w){m&&m(w);return}c.fchmod(E,h,function(A){c.close(E,function(S){m&&m(A||S)})})})},c.lchmodSync=function(f,h){var m=c.openSync(f,ct.O_WRONLY|ct.O_SYMLINK,h),w=!0,E;try{E=c.fchmodSync(m,h),w=!1}finally{if(w)try{c.closeSync(m)}catch{}else c.closeSync(m)}return E}}function r(c){ct.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(f,h,m,w){c.open(f,ct.O_SYMLINK,function(E,A){if(E){w&&w(E);return}c.futimes(A,h,m,function(S){c.close(A,function(T){w&&w(S||T)})})})},c.lutimesSync=function(f,h,m){var w=c.openSync(f,ct.O_SYMLINK),E,A=!0;try{E=c.futimesSync(w,h,m),A=!1}finally{if(A)try{c.closeSync(w)}catch{}else c.closeSync(w)}return E}):c.futimes&&(c.lutimes=function(f,h,m,w){w&&process.nextTick(w)},c.lutimesSync=function(){})}function n(c){return c&&function(f,h,m){return c.call(e,f,h,function(w){d(w)&&(w=null),m&&m.apply(this,arguments)})}}function i(c){return c&&function(f,h){try{return c.call(e,f,h)}catch(m){if(!d(m))throw m}}}function s(c){return c&&function(f,h,m,w){return c.call(e,f,h,m,function(E){d(E)&&(E=null),w&&w.apply(this,arguments)})}}function o(c){return c&&function(f,h,m){try{return c.call(e,f,h,m)}catch(w){if(!d(w))throw w}}}function a(c){return c&&function(f,h,m){typeof h=="function"&&(m=h,h=null);function w(E,A){A&&(A.uid<0&&(A.uid+=4294967296),A.gid<0&&(A.gid+=4294967296)),m&&m.apply(this,arguments)}return h?c.call(e,f,h,w):c.call(e,f,w)}}function l(c){return c&&function(f,h){var m=h?c.call(e,f,h):c.call(e,f);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}function d(c){if(!c||c.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(c.code==="EINVAL"||c.code==="EPERM"))}}var To=Gr.Stream,Yf=zf;function zf(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);To.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,l=o.length;a<l;a++){var d=o[a];this[d]=i[d]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}e.open(this.path,this.flags,this.mode,function(c,f){if(c){s.emit("error",c),s.readable=!1;return}s.fd=f,s.emit("open",f),s._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);To.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var l=s[o];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var Xf=Jf,Kf=Object.getPrototypeOf||function(e){return e.__proto__};function Jf(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Kf(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}var ie=vt,Qf=Wf,Zf=Yf,ed=Xf,pn=As,Ee,xn;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Ee=Symbol.for("graceful-fs.queue"),xn=Symbol.for("graceful-fs.previous")):(Ee="___graceful-fs.queue",xn="___graceful-fs.previous");function td(){}function Tl(e,t){Object.defineProperty(e,Ee,{get:function(){return t}})}var Ft=td;pn.debuglog?Ft=pn.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Ft=function(){var e=pn.format.apply(pn,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});if(!ie[Ee]){var rd=be[Ee]||[];Tl(ie,rd),ie.close=function(e){function t(r,n){return e.call(ie,r,function(i){i||So(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,xn,{value:e}),t}(ie.close),ie.closeSync=function(e){function t(r){e.apply(ie,arguments),So()}return Object.defineProperty(t,xn,{value:e}),t}(ie.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Ft(ie[Ee]),wl.equal(ie[Ee].length,0)})}be[Ee]||Tl(be,ie[Ee]);var Ie=Ts(ed(ie));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!ie.__patched&&(Ie=Ts(ie),ie.__patched=!0);function Ts(e){Qf(e),e.gracefulify=Ts,e.createReadStream=K,e.createWriteStream=ee;var t=e.readFile;e.readFile=r;function r(y,W,H){return typeof W=="function"&&(H=W,W=null),M(y,W,H);function M(J,I,R,D){return t(J,I,function(b){b&&(b.code==="EMFILE"||b.code==="ENFILE")?Gt([M,[J,I,R],b,D||Date.now(),Date.now()]):typeof R=="function"&&R.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(y,W,H,M){return typeof H=="function"&&(M=H,H=null),J(y,W,H,M);function J(I,R,D,b,F){return n(I,R,D,function(N){N&&(N.code==="EMFILE"||N.code==="ENFILE")?Gt([J,[I,R,D,b],N,F||Date.now(),Date.now()]):typeof b=="function"&&b.apply(this,arguments)})}}var s=e.appendFile;s&&(e.appendFile=o);function o(y,W,H,M){return typeof H=="function"&&(M=H,H=null),J(y,W,H,M);function J(I,R,D,b,F){return s(I,R,D,function(N){N&&(N.code==="EMFILE"||N.code==="ENFILE")?Gt([J,[I,R,D,b],N,F||Date.now(),Date.now()]):typeof b=="function"&&b.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=l);function l(y,W,H,M){return typeof H=="function"&&(M=H,H=0),J(y,W,H,M);function J(I,R,D,b,F){return a(I,R,D,function(N){N&&(N.code==="EMFILE"||N.code==="ENFILE")?Gt([J,[I,R,D,b],N,F||Date.now(),Date.now()]):typeof b=="function"&&b.apply(this,arguments)})}}var d=e.readdir;e.readdir=f;var c=/^v[0-5]\./;function f(y,W,H){typeof W=="function"&&(H=W,W=null);var M=c.test(process.version)?function(R,D,b,F){return d(R,J(R,D,b,F))}:function(R,D,b,F){return d(R,D,J(R,D,b,F))};return M(y,W,H);function J(I,R,D,b){return function(F,N){F&&(F.code==="EMFILE"||F.code==="ENFILE")?Gt([M,[I,R,D],F,b||Date.now(),Date.now()]):(N&&N.sort&&N.sort(),typeof D=="function"&&D.call(this,F,N))}}}if(process.version.substr(0,4)==="v0.8"){var h=Zf(e);S=h.ReadStream,P=h.WriteStream}var m=e.ReadStream;m&&(S.prototype=Object.create(m.prototype),S.prototype.open=T);var w=e.WriteStream;w&&(P.prototype=Object.create(w.prototype),P.prototype.open=$),Object.defineProperty(e,"ReadStream",{get:function(){return S},set:function(y){S=y},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return P},set:function(y){P=y},enumerable:!0,configurable:!0});var E=S;Object.defineProperty(e,"FileReadStream",{get:function(){return E},set:function(y){E=y},enumerable:!0,configurable:!0});var A=P;Object.defineProperty(e,"FileWriteStream",{get:function(){return A},set:function(y){A=y},enumerable:!0,configurable:!0});function S(y,W){return this instanceof S?(m.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function T(){var y=this;xe(y.path,y.flags,y.mode,function(W,H){W?(y.autoClose&&y.destroy(),y.emit("error",W)):(y.fd=H,y.emit("open",H),y.read())})}function P(y,W){return this instanceof P?(w.apply(this,arguments),this):P.apply(Object.create(P.prototype),arguments)}function $(){var y=this;xe(y.path,y.flags,y.mode,function(W,H){W?(y.destroy(),y.emit("error",W)):(y.fd=H,y.emit("open",H))})}function K(y,W){return new e.ReadStream(y,W)}function ee(y,W){return new e.WriteStream(y,W)}var j=e.open;e.open=xe;function xe(y,W,H,M){return typeof H=="function"&&(M=H,H=null),J(y,W,H,M);function J(I,R,D,b,F){return j(I,R,D,function(N,k){N&&(N.code==="EMFILE"||N.code==="ENFILE")?Gt([J,[I,R,D,b],N,F||Date.now(),Date.now()]):typeof b=="function"&&b.apply(this,arguments)})}}return e}function Gt(e){Ft("ENQUEUE",e[0].name,e[1]),ie[Ee].push(e),Ss()}var mn;function So(){for(var e=Date.now(),t=0;t<ie[Ee].length;++t)ie[Ee][t].length>2&&(ie[Ee][t][3]=e,ie[Ee][t][4]=e);Ss()}function Ss(){if(clearTimeout(mn),mn=void 0,ie[Ee].length!==0){var e=ie[Ee].shift(),t=e[0],r=e[1],n=e[2],i=e[3],s=e[4];if(i===void 0)Ft("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){Ft("TIMEOUT",t.name,r);var o=r.pop();typeof o=="function"&&o.call(null,n)}else{var a=Date.now()-s,l=Math.max(s-i,1),d=Math.min(l*1.2,100);a>=d?(Ft("RETRY",t.name,r),t.apply(null,r.concat([i]))):ie[Ee].push(e)}mn===void 0&&(mn=setTimeout(Ss,0))}}(function(e){const t=Pe.fromCallback,r=Ie,n=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(i=>typeof r[i]=="function");Object.assign(e,r),n.forEach(i=>{e[i]=t(r[i])}),e.exists=function(i,s){return typeof s=="function"?r.exists(i,s):new Promise(o=>r.exists(i,o))},e.read=function(i,s,o,a,l,d){return typeof d=="function"?r.read(i,s,o,a,l,d):new Promise((c,f)=>{r.read(i,s,o,a,l,(h,m,w)=>{if(h)return f(h);c({bytesRead:m,buffer:w})})})},e.write=function(i,s,...o){return typeof o[o.length-1]=="function"?r.write(i,s,...o):new Promise((a,l)=>{r.write(i,s,...o,(d,c,f)=>{if(d)return l(d);a({bytesWritten:c,buffer:f})})})},typeof r.writev=="function"&&(e.writev=function(i,s,...o){return typeof o[o.length-1]=="function"?r.writev(i,s,...o):new Promise((a,l)=>{r.writev(i,s,...o,(d,c,f)=>{if(d)return l(d);a({bytesWritten:c,buffers:f})})})}),typeof r.realpath.native=="function"?e.realpath.native=t(r.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(kt);var Cs={},Sl={};const nd=se;Sl.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(nd.parse(t).root,""))){const n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}};const Cl=kt,{checkPath:bl}=Sl,Rl=e=>{const t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Cs.makeDir=async(e,t)=>(bl(e),Cl.mkdir(e,{mode:Rl(t),recursive:!0}));Cs.makeDirSync=(e,t)=>(bl(e),Cl.mkdirSync(e,{mode:Rl(t),recursive:!0}));const id=Pe.fromPromise,{makeDir:sd,makeDirSync:Ci}=Cs,bi=id(sd);var et={mkdirs:bi,mkdirsSync:Ci,mkdirp:bi,mkdirpSync:Ci,ensureDir:bi,ensureDirSync:Ci};const od=Pe.fromPromise,Ol=kt;function ad(e){return Ol.access(e).then(()=>!0).catch(()=>!1)}var Mt={pathExists:od(ad),pathExistsSync:Ol.existsSync};const rr=Ie;function ld(e,t,r,n){rr.open(e,"r+",(i,s)=>{if(i)return n(i);rr.futimes(s,t,r,o=>{rr.close(s,a=>{n&&n(o||a)})})})}function cd(e,t,r){const n=rr.openSync(e,"r+");return rr.futimesSync(n,t,r),rr.closeSync(n)}var Pl={utimesMillis:ld,utimesMillisSync:cd};const ir=kt,pe=se,ud=As;function fd(e,t,r){const n=r.dereference?i=>ir.stat(i,{bigint:!0}):i=>ir.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,s])=>({srcStat:i,destStat:s}))}function dd(e,t,r){let n;const i=r.dereference?o=>ir.statSync(o,{bigint:!0}):o=>ir.lstatSync(o,{bigint:!0}),s=i(e);try{n=i(t)}catch(o){if(o.code==="ENOENT")return{srcStat:s,destStat:null};throw o}return{srcStat:s,destStat:n}}function hd(e,t,r,n,i){ud.callbackify(fd)(e,t,n,(s,o)=>{if(s)return i(s);const{srcStat:a,destStat:l}=o;if(l){if(Vr(a,l)){const d=pe.basename(e),c=pe.basename(t);return r==="move"&&d!==c&&d.toLowerCase()===c.toLowerCase()?i(null,{srcStat:a,destStat:l,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!l.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!a.isDirectory()&&l.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return a.isDirectory()&&bs(e,t)?i(new Error(Xn(e,t,r))):i(null,{srcStat:a,destStat:l})})}function pd(e,t,r,n){const{srcStat:i,destStat:s}=dd(e,t,n);if(s){if(Vr(i,s)){const o=pe.basename(e),a=pe.basename(t);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&bs(e,t))throw new Error(Xn(e,t,r));return{srcStat:i,destStat:s}}function Il(e,t,r,n,i){const s=pe.resolve(pe.dirname(e)),o=pe.resolve(pe.dirname(r));if(o===s||o===pe.parse(o).root)return i();ir.stat(o,{bigint:!0},(a,l)=>a?a.code==="ENOENT"?i():i(a):Vr(t,l)?i(new Error(Xn(e,r,n))):Il(e,t,o,n,i))}function Nl(e,t,r,n){const i=pe.resolve(pe.dirname(e)),s=pe.resolve(pe.dirname(r));if(s===i||s===pe.parse(s).root)return;let o;try{o=ir.statSync(s,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Vr(t,o))throw new Error(Xn(e,r,n));return Nl(e,t,s,n)}function Vr(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function bs(e,t){const r=pe.resolve(e).split(pe.sep).filter(i=>i),n=pe.resolve(t).split(pe.sep).filter(i=>i);return r.reduce((i,s,o)=>i&&n[o]===s,!0)}function Xn(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}var lr={checkPaths:hd,checkPathsSync:pd,checkParentPaths:Il,checkParentPathsSync:Nl,isSrcSubdir:bs,areIdentical:Vr};const $e=Ie,Pr=se,md=et.mkdirs,gd=Mt.pathExists,Ed=Pl.utimesMillis,Ir=lr;function yd(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Ir.checkPaths(e,t,"copy",r,(i,s)=>{if(i)return n(i);const{srcStat:o,destStat:a}=s;Ir.checkParentPaths(e,o,t,"copy",l=>l?n(l):r.filter?Dl(Co,a,e,t,r,n):Co(a,e,t,r,n))})}function Co(e,t,r,n,i){const s=Pr.dirname(r);gd(s,(o,a)=>{if(o)return i(o);if(a)return Ln(e,t,r,n,i);md(s,l=>l?i(l):Ln(e,t,r,n,i))})}function Dl(e,t,r,n,i,s){Promise.resolve(i.filter(r,n)).then(o=>o?e(t,r,n,i,s):s(),o=>s(o))}function wd(e,t,r,n,i){return n.filter?Dl(Ln,e,t,r,n,i):Ln(e,t,r,n,i)}function Ln(e,t,r,n,i){(n.dereference?$e.stat:$e.lstat)(t,(o,a)=>o?i(o):a.isDirectory()?bd(a,e,t,r,n,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?vd(a,e,t,r,n,i):a.isSymbolicLink()?Pd(e,t,r,n,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function vd(e,t,r,n,i,s){return t?_d(e,r,n,i,s):$l(e,r,n,i,s)}function _d(e,t,r,n,i){if(n.overwrite)$e.unlink(r,s=>s?i(s):$l(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function $l(e,t,r,n,i){$e.copyFile(t,r,s=>s?i(s):n.preserveTimestamps?Ad(e.mode,t,r,i):Kn(r,e.mode,i))}function Ad(e,t,r,n){return Td(e)?Sd(r,e,i=>i?n(i):bo(e,t,r,n)):bo(e,t,r,n)}function Td(e){return(e&128)===0}function Sd(e,t,r){return Kn(e,t|128,r)}function bo(e,t,r,n){Cd(t,r,i=>i?n(i):Kn(r,e,n))}function Kn(e,t,r){return $e.chmod(e,t,r)}function Cd(e,t,r){$e.stat(e,(n,i)=>n?r(n):Ed(t,i.atime,i.mtime,r))}function bd(e,t,r,n,i,s){return t?Fl(r,n,i,s):Rd(e.mode,r,n,i,s)}function Rd(e,t,r,n,i){$e.mkdir(r,s=>{if(s)return i(s);Fl(t,r,n,o=>o?i(o):Kn(r,e,i))})}function Fl(e,t,r,n){$e.readdir(e,(i,s)=>i?n(i):xl(s,e,t,r,n))}function xl(e,t,r,n,i){const s=e.pop();return s?Od(e,s,t,r,n,i):i()}function Od(e,t,r,n,i,s){const o=Pr.join(r,t),a=Pr.join(n,t);Ir.checkPaths(o,a,"copy",i,(l,d)=>{if(l)return s(l);const{destStat:c}=d;wd(c,o,a,i,f=>f?s(f):xl(e,r,n,i,s))})}function Pd(e,t,r,n,i){$e.readlink(t,(s,o)=>{if(s)return i(s);if(n.dereference&&(o=Pr.resolve(process.cwd(),o)),e)$e.readlink(r,(a,l)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?$e.symlink(o,r,i):i(a):(n.dereference&&(l=Pr.resolve(process.cwd(),l)),Ir.isSrcSubdir(o,l)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&Ir.isSrcSubdir(l,o)?i(new Error(`Cannot overwrite '${l}' with '${o}'.`)):Id(o,r,i)));else return $e.symlink(o,r,i)})}function Id(e,t,r){$e.unlink(t,n=>n?r(n):$e.symlink(e,t,r))}var Nd=yd;const _e=Ie,Nr=se,Dd=et.mkdirsSync,$d=Pl.utimesMillisSync,Dr=lr;function Fd(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:n,destStat:i}=Dr.checkPathsSync(e,t,"copy",r);return Dr.checkParentPathsSync(e,n,t,"copy"),xd(i,e,t,r)}function xd(e,t,r,n){if(n.filter&&!n.filter(t,r))return;const i=Nr.dirname(r);return _e.existsSync(i)||Dd(i),Ll(e,t,r,n)}function Ld(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return Ll(e,t,r,n)}function Ll(e,t,r,n){const s=(n.dereference?_e.statSync:_e.lstatSync)(t);if(s.isDirectory())return qd(s,e,t,r,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Ud(s,e,t,r,n);if(s.isSymbolicLink())return Vd(e,t,r,n);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Ud(e,t,r,n,i){return t?kd(e,r,n,i):Ul(e,r,n,i)}function kd(e,t,r,n){if(n.overwrite)return _e.unlinkSync(r),Ul(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Ul(e,t,r,n){return _e.copyFileSync(t,r),n.preserveTimestamps&&Md(e.mode,t,r),Rs(r,e.mode)}function Md(e,t,r){return Bd(e)&&jd(r,e),Hd(t,r)}function Bd(e){return(e&128)===0}function jd(e,t){return Rs(e,t|128)}function Rs(e,t){return _e.chmodSync(e,t)}function Hd(e,t){const r=_e.statSync(e);return $d(t,r.atime,r.mtime)}function qd(e,t,r,n,i){return t?kl(r,n,i):Gd(e.mode,r,n,i)}function Gd(e,t,r,n){return _e.mkdirSync(r),kl(t,r,n),Rs(r,e)}function kl(e,t,r){_e.readdirSync(e).forEach(n=>Wd(n,e,t,r))}function Wd(e,t,r,n){const i=Nr.join(t,e),s=Nr.join(r,e),{destStat:o}=Dr.checkPathsSync(i,s,"copy",n);return Ld(o,i,s,n)}function Vd(e,t,r,n){let i=_e.readlinkSync(t);if(n.dereference&&(i=Nr.resolve(process.cwd(),i)),e){let s;try{s=_e.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return _e.symlinkSync(i,r);throw o}if(n.dereference&&(s=Nr.resolve(process.cwd(),s)),Dr.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(_e.statSync(r).isDirectory()&&Dr.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return Yd(i,r)}else return _e.symlinkSync(i,r)}function Yd(e,t){return _e.unlinkSync(t),_e.symlinkSync(e,t)}var zd=Fd;const Xd=Pe.fromCallback;var Os={copy:Xd(Nd),copySync:zd};const Ro=Ie,Ml=se,Z=wl,$r=process.platform==="win32";function Bl(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Ro[r],r=r+"Sync",e[r]=e[r]||Ro[r]}),e.maxBusyTries=e.maxBusyTries||3}function Ps(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),Z(e,"rimraf: missing path"),Z.strictEqual(typeof e,"string","rimraf: path should be a string"),Z.strictEqual(typeof r,"function","rimraf: callback function required"),Z(t,"rimraf: invalid options argument provided"),Z.strictEqual(typeof t,"object","rimraf: options should be object"),Bl(t),Oo(e,t,function i(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&n<t.maxBusyTries){n++;const o=n*100;return setTimeout(()=>Oo(e,t,i),o)}s.code==="ENOENT"&&(s=null)}r(s)})}function Oo(e,t,r){Z(e),Z(t),Z(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&$r)return Po(e,t,n,r);if(i&&i.isDirectory())return Dn(e,t,n,r);t.unlink(e,s=>{if(s){if(s.code==="ENOENT")return r(null);if(s.code==="EPERM")return $r?Po(e,t,s,r):Dn(e,t,s,r);if(s.code==="EISDIR")return Dn(e,t,s,r)}return r(s)})})}function Po(e,t,r,n){Z(e),Z(t),Z(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(s,o)=>{s?n(s.code==="ENOENT"?null:r):o.isDirectory()?Dn(e,t,r,n):t.unlink(e,n)})})}function Io(e,t,r){let n;Z(e),Z(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?$n(e,t,r):t.unlinkSync(e)}function Dn(e,t,r,n){Z(e),Z(t),Z(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Kd(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Kd(e,t,r){Z(e),Z(t),Z(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let s=i.length,o;if(s===0)return t.rmdir(e,r);i.forEach(a=>{Ps(Ml.join(e,a),t,l=>{if(!o){if(l)return r(o=l);--s===0&&t.rmdir(e,r)}})})})}function jl(e,t){let r;t=t||{},Bl(t),Z(e,"rimraf: missing path"),Z.strictEqual(typeof e,"string","rimraf: path should be a string"),Z(t,"rimraf: missing options"),Z.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&$r&&Io(e,t,n)}try{r&&r.isDirectory()?$n(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return $r?Io(e,t,n):$n(e,t,n);if(n.code!=="EISDIR")throw n;$n(e,t,n)}}function $n(e,t,r){Z(e),Z(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Jd(e,t);else if(n.code!=="ENOENT")throw n}}function Jd(e,t){if(Z(e),Z(t),t.readdirSync(e).forEach(r=>jl(Ml.join(e,r),t)),$r){const r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}var Qd=Ps;Ps.sync=jl;const Un=Ie,Zd=Pe.fromCallback,Hl=Qd;function eh(e,t){if(Un.rm)return Un.rm(e,{recursive:!0,force:!0},t);Hl(e,t)}function th(e){if(Un.rmSync)return Un.rmSync(e,{recursive:!0,force:!0});Hl.sync(e)}var Jn={remove:Zd(eh),removeSync:th};const rh=Pe.fromPromise,ql=kt,Gl=se,Wl=et,Vl=Jn,No=rh(async function(t){let r;try{r=await ql.readdir(t)}catch{return Wl.mkdirs(t)}return Promise.all(r.map(n=>Vl.remove(Gl.join(t,n))))});function Do(e){let t;try{t=ql.readdirSync(e)}catch{return Wl.mkdirsSync(e)}t.forEach(r=>{r=Gl.join(e,r),Vl.removeSync(r)})}var nh={emptyDirSync:Do,emptydirSync:Do,emptyDir:No,emptydir:No};const ih=Pe.fromCallback,Yl=se,dt=Ie,zl=et;function sh(e,t){function r(){dt.writeFile(e,"",n=>{if(n)return t(n);t()})}dt.stat(e,(n,i)=>{if(!n&&i.isFile())return t();const s=Yl.dirname(e);dt.stat(s,(o,a)=>{if(o)return o.code==="ENOENT"?zl.mkdirs(s,l=>{if(l)return t(l);r()}):t(o);a.isDirectory()?r():dt.readdir(s,l=>{if(l)return t(l)})})})}function oh(e){let t;try{t=dt.statSync(e)}catch{}if(t&&t.isFile())return;const r=Yl.dirname(e);try{dt.statSync(r).isDirectory()||dt.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")zl.mkdirsSync(r);else throw n}dt.writeFileSync(e,"")}var ah={createFile:ih(sh),createFileSync:oh};const lh=Pe.fromCallback,Xl=se,ft=Ie,Kl=et,ch=Mt.pathExists,{areIdentical:Jl}=lr;function uh(e,t,r){function n(i,s){ft.link(i,s,o=>{if(o)return r(o);r(null)})}ft.lstat(t,(i,s)=>{ft.lstat(e,(o,a)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),r(o);if(s&&Jl(a,s))return r(null);const l=Xl.dirname(t);ch(l,(d,c)=>{if(d)return r(d);if(c)return n(e,t);Kl.mkdirs(l,f=>{if(f)return r(f);n(e,t)})})})})}function fh(e,t){let r;try{r=ft.lstatSync(t)}catch{}try{const s=ft.lstatSync(e);if(r&&Jl(s,r))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}const n=Xl.dirname(t);return ft.existsSync(n)||Kl.mkdirsSync(n),ft.linkSync(e,t)}var dh={createLink:lh(uh),createLinkSync:fh};const ht=se,Sr=Ie,hh=Mt.pathExists;function ph(e,t,r){if(ht.isAbsolute(e))return Sr.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{const n=ht.dirname(t),i=ht.join(n,e);return hh(i,(s,o)=>s?r(s):o?r(null,{toCwd:i,toDst:e}):Sr.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:e,toDst:ht.relative(n,e)})))}}function mh(e,t){let r;if(ht.isAbsolute(e)){if(r=Sr.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{const n=ht.dirname(t),i=ht.join(n,e);if(r=Sr.existsSync(i),r)return{toCwd:i,toDst:e};if(r=Sr.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:ht.relative(n,e)}}}var gh={symlinkPaths:ph,symlinkPathsSync:mh};const Ql=Ie;function Eh(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);Ql.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function yh(e,t){let r;if(t)return t;try{r=Ql.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}var wh={symlinkType:Eh,symlinkTypeSync:yh};const vh=Pe.fromCallback,Zl=se,We=kt,ec=et,_h=ec.mkdirs,Ah=ec.mkdirsSync,tc=gh,Th=tc.symlinkPaths,Sh=tc.symlinkPathsSync,rc=wh,Ch=rc.symlinkType,bh=rc.symlinkTypeSync,Rh=Mt.pathExists,{areIdentical:nc}=lr;function Oh(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,We.lstat(t,(i,s)=>{!i&&s.isSymbolicLink()?Promise.all([We.stat(e),We.stat(t)]).then(([o,a])=>{if(nc(o,a))return n(null);$o(e,t,r,n)}):$o(e,t,r,n)})}function $o(e,t,r,n){Th(e,t,(i,s)=>{if(i)return n(i);e=s.toDst,Ch(s.toCwd,r,(o,a)=>{if(o)return n(o);const l=Zl.dirname(t);Rh(l,(d,c)=>{if(d)return n(d);if(c)return We.symlink(e,t,a,n);_h(l,f=>{if(f)return n(f);We.symlink(e,t,a,n)})})})})}function Ph(e,t,r){let n;try{n=We.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){const a=We.statSync(e),l=We.statSync(t);if(nc(a,l))return}const i=Sh(e,t);e=i.toDst,r=bh(i.toCwd,r);const s=Zl.dirname(t);return We.existsSync(s)||Ah(s),We.symlinkSync(e,t,r)}var Ih={createSymlink:vh(Oh),createSymlinkSync:Ph};const{createFile:Fo,createFileSync:xo}=ah,{createLink:Lo,createLinkSync:Uo}=dh,{createSymlink:ko,createSymlinkSync:Mo}=Ih;var Nh={createFile:Fo,createFileSync:xo,ensureFile:Fo,ensureFileSync:xo,createLink:Lo,createLinkSync:Uo,ensureLink:Lo,ensureLinkSync:Uo,createSymlink:ko,createSymlinkSync:Mo,ensureSymlink:ko,ensureSymlinkSync:Mo};function Dh(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){const s=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+s}function $h(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var Is={stringify:Dh,stripBom:$h};let sr;try{sr=Ie}catch{sr=vt}const Qn=Pe,{stringify:ic,stripBom:sc}=Is;async function Fh(e,t={}){typeof t=="string"&&(t={encoding:t});const r=t.fs||sr,n="throws"in t?t.throws:!0;let i=await Qn.fromCallback(r.readFile)(e,t);i=sc(i);let s;try{s=JSON.parse(i,t?t.reviver:null)}catch(o){if(n)throw o.message=`${e}: ${o.message}`,o;return null}return s}const xh=Qn.fromPromise(Fh);function Lh(e,t={}){typeof t=="string"&&(t={encoding:t});const r=t.fs||sr,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=sc(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function Uh(e,t,r={}){const n=r.fs||sr,i=ic(t,r);await Qn.fromCallback(n.writeFile)(e,i,r)}const kh=Qn.fromPromise(Uh);function Mh(e,t,r={}){const n=r.fs||sr,i=ic(t,r);return n.writeFileSync(e,i,r)}var Bh={readFile:xh,readFileSync:Lh,writeFile:kh,writeFileSync:Mh};const gn=Bh;var jh={readJson:gn.readFile,readJsonSync:gn.readFileSync,writeJson:gn.writeFile,writeJsonSync:gn.writeFileSync};const Hh=Pe.fromCallback,Cr=Ie,oc=se,ac=et,qh=Mt.pathExists;function Gh(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");const i=oc.dirname(e);qh(i,(s,o)=>{if(s)return n(s);if(o)return Cr.writeFile(e,t,r,n);ac.mkdirs(i,a=>{if(a)return n(a);Cr.writeFile(e,t,r,n)})})}function Wh(e,...t){const r=oc.dirname(e);if(Cr.existsSync(r))return Cr.writeFileSync(e,...t);ac.mkdirsSync(r),Cr.writeFileSync(e,...t)}var Ns={outputFile:Hh(Gh),outputFileSync:Wh};const{stringify:Vh}=Is,{outputFile:Yh}=Ns;async function zh(e,t,r={}){const n=Vh(t,r);await Yh(e,n,r)}var Xh=zh;const{stringify:Kh}=Is,{outputFileSync:Jh}=Ns;function Qh(e,t,r){const n=Kh(t,r);Jh(e,n,r)}var Zh=Qh;const ep=Pe.fromPromise,Oe=jh;Oe.outputJson=ep(Xh);Oe.outputJsonSync=Zh;Oe.outputJSON=Oe.outputJson;Oe.outputJSONSync=Oe.outputJsonSync;Oe.writeJSON=Oe.writeJson;Oe.writeJSONSync=Oe.writeJsonSync;Oe.readJSON=Oe.readJson;Oe.readJSONSync=Oe.readJsonSync;var tp=Oe;const rp=Ie,os=se,np=Os.copy,lc=Jn.remove,ip=et.mkdirp,sp=Mt.pathExists,Bo=lr;function op(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};const i=r.overwrite||r.clobber||!1;Bo.checkPaths(e,t,"move",r,(s,o)=>{if(s)return n(s);const{srcStat:a,isChangingCase:l=!1}=o;Bo.checkParentPaths(e,a,t,"move",d=>{if(d)return n(d);if(ap(t))return jo(e,t,i,l,n);ip(os.dirname(t),c=>c?n(c):jo(e,t,i,l,n))})})}function ap(e){const t=os.dirname(e);return os.parse(t).root===t}function jo(e,t,r,n,i){if(n)return Ri(e,t,r,i);if(r)return lc(t,s=>s?i(s):Ri(e,t,r,i));sp(t,(s,o)=>s?i(s):o?i(new Error("dest already exists.")):Ri(e,t,r,i))}function Ri(e,t,r,n){rp.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):lp(e,t,r,n):n())}function lp(e,t,r,n){np(e,t,{overwrite:r,errorOnExist:!0},s=>s?n(s):lc(e,n))}var cp=op;const cc=Ie,as=se,up=Os.copySync,uc=Jn.removeSync,fp=et.mkdirpSync,Ho=lr;function dp(e,t,r){r=r||{};const n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:s=!1}=Ho.checkPathsSync(e,t,"move",r);return Ho.checkParentPathsSync(e,i,t,"move"),hp(t)||fp(as.dirname(t)),pp(e,t,n,s)}function hp(e){const t=as.dirname(e);return as.parse(t).root===t}function pp(e,t,r,n){if(n)return Oi(e,t,r);if(r)return uc(t),Oi(e,t,r);if(cc.existsSync(t))throw new Error("dest already exists.");return Oi(e,t,r)}function Oi(e,t,r){try{cc.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return mp(e,t,r)}}function mp(e,t,r){return up(e,t,{overwrite:r,errorOnExist:!0}),uc(e)}var gp=dp;const Ep=Pe.fromCallback;var yp={move:Ep(cp),moveSync:gp},At={...kt,...Os,...nh,...Nh,...tp,...et,...yp,...Ns,...Mt,...Jn},Bt={},mt={},fe={},gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.CancellationError=gt.CancellationToken=void 0;const wp=vl;class vp extends wp.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(t){this.removeParentCancelHandler(),this._parent=t,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(t){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,t!=null&&(this.parent=t)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(t){this.cancelled?t():this.once("cancel",t)}createPromise(t){if(this.cancelled)return Promise.reject(new ls);const r=()=>{if(n!=null)try{this.removeListener("cancel",n),n=null}catch{}};let n=null;return new Promise((i,s)=>{let o=null;if(n=()=>{try{o!=null&&(o(),o=null)}finally{s(new ls)}},this.cancelled){n();return}this.onCancel(n),t(i,s,a=>{o=a})}).then(i=>(r(),i)).catch(i=>{throw r(),i})}removeParentCancelHandler(){const t=this._parent;t!=null&&this.parentCancelHandler!=null&&(t.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}}gt.CancellationToken=vp;class ls extends Error{constructor(){super("cancelled")}}gt.CancellationError=ls;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.newError=_p;function _p(e,t){const r=new Error(e);return r.code=t,r}var Re={},cs={exports:{}},En={exports:{}},Pi,qo;function Ap(){if(qo)return Pi;qo=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,s=n*365.25;Pi=function(c,f){f=f||{};var h=typeof c;if(h==="string"&&c.length>0)return o(c);if(h==="number"&&isFinite(c))return f.long?l(c):a(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(f){var h=parseFloat(f[1]),m=(f[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*t;case"seconds":case"second":case"secs":case"sec":case"s":return h*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(c){var f=Math.abs(c);return f>=n?Math.round(c/n)+"d":f>=r?Math.round(c/r)+"h":f>=t?Math.round(c/t)+"m":f>=e?Math.round(c/e)+"s":c+"ms"}function l(c){var f=Math.abs(c);return f>=n?d(c,f,n,"day"):f>=r?d(c,f,r,"hour"):f>=t?d(c,f,t,"minute"):f>=e?d(c,f,e,"second"):c+" ms"}function d(c,f,h,m){var w=f>=h*1.5;return Math.round(c/h)+" "+m+(w?"s":"")}return Pi}var Ii,Go;function fc(){if(Go)return Ii;Go=1;function e(t){n.debug=n,n.default=n,n.coerce=d,n.disable=a,n.enable=s,n.enabled=l,n.humanize=Ap(),n.destroy=c,Object.keys(t).forEach(f=>{n[f]=t[f]}),n.names=[],n.skips=[],n.formatters={};function r(f){let h=0;for(let m=0;m<f.length;m++)h=(h<<5)-h+f.charCodeAt(m),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=r;function n(f){let h,m=null,w,E;function A(...S){if(!A.enabled)return;const T=A,P=Number(new Date),$=P-(h||P);T.diff=$,T.prev=h,T.curr=P,h=P,S[0]=n.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let K=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(j,xe)=>{if(j==="%%")return"%";K++;const y=n.formatters[xe];if(typeof y=="function"){const W=S[K];j=y.call(T,W),S.splice(K,1),K--}return j}),n.formatArgs.call(T,S),(T.log||n.log).apply(T,S)}return A.namespace=f,A.useColors=n.useColors(),A.color=n.selectColor(f),A.extend=i,A.destroy=n.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(w!==n.namespaces&&(w=n.namespaces,E=n.enabled(f)),E),set:S=>{m=S}}),typeof n.init=="function"&&n.init(A),A}function i(f,h){const m=n(this.namespace+(typeof h>"u"?":":h)+f);return m.log=this.log,m}function s(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];const h=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const m of h)m[0]==="-"?n.skips.push(m.slice(1)):n.names.push(m)}function o(f,h){let m=0,w=0,E=-1,A=0;for(;m<f.length;)if(w<h.length&&(h[w]===f[m]||h[w]==="*"))h[w]==="*"?(E=w,A=m,w++):(m++,w++);else if(E!==-1)w=E+1,A++,m=A;else return!1;for(;w<h.length&&h[w]==="*";)w++;return w===h.length}function a(){const f=[...n.names,...n.skips.map(h=>"-"+h)].join(",");return n.enable(""),f}function l(f){for(const h of n.skips)if(o(f,h))return!1;for(const h of n.names)if(o(f,h))return!0;return!1}function d(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Ii=e,Ii}var Wo;function Tp(){return Wo||(Wo=1,function(e,t){t.formatArgs=n,t.save=i,t.load=s,t.useColors=r,t.storage=o(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;l.splice(1,0,d,"color: inherit");let c=0,f=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(c++,h==="%c"&&(f=c))}),l.splice(f,0,d)}t.log=console.debug||console.log||(()=>{});function i(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function s(){let l;try{l=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function o(){try{return localStorage}catch{}}e.exports=fc()(t);const{formatters:a}=e.exports;a.j=function(l){try{return JSON.stringify(l)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}}(En,En.exports)),En.exports}var yn={exports:{}},Ni,Vo;function Sp(){return Vo||(Vo=1,Ni=(e,t=process.argv)=>{const r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}),Ni}var Di,Yo;function Cp(){if(Yo)return Di;Yo=1;const e=zn,t=_l,r=Sp(),{env:n}=process;let i;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?i=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(i=1),"FORCE_COLOR"in n&&(n.FORCE_COLOR==="true"?i=1:n.FORCE_COLOR==="false"?i=0:i=n.FORCE_COLOR.length===0?1:Math.min(parseInt(n.FORCE_COLOR,10),3));function s(l){return l===0?!1:{level:l,hasBasic:!0,has256:l>=2,has16m:l>=3}}function o(l,d){if(i===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(l&&!d&&i===void 0)return 0;const c=i||0;if(n.TERM==="dumb")return c;if(process.platform==="win32"){const f=e.release().split(".");return Number(f[0])>=10&&Number(f[2])>=10586?Number(f[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(f=>f in n)||n.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if(n.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in n){const f=parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return f>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:c}function a(l){const d=o(l,l&&l.isTTY);return s(d)}return Di={supportsColor:a,stdout:s(o(!0,t.isatty(1))),stderr:s(o(!0,t.isatty(2)))},Di}var zo;function bp(){return zo||(zo=1,function(e,t){const r=_l,n=As;t.init=c,t.log=a,t.formatArgs=s,t.save=l,t.load=d,t.useColors=i,t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const h=Cp();h&&(h.stderr||h).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(h=>/^debug_/i.test(h)).reduce((h,m)=>{const w=m.substring(6).toLowerCase().replace(/_([a-z])/g,(A,S)=>S.toUpperCase());let E=process.env[m];return/^(yes|on|true|enabled)$/i.test(E)?E=!0:/^(no|off|false|disabled)$/i.test(E)?E=!1:E==="null"?E=null:E=Number(E),h[w]=E,h},{});function i(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:r.isatty(process.stderr.fd)}function s(h){const{namespace:m,useColors:w}=this;if(w){const E=this.color,A="\x1B[3"+(E<8?E:"8;5;"+E),S=`  ${A};1m${m} \x1B[0m`;h[0]=S+h[0].split(`
`).join(`
`+S),h.push(A+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else h[0]=o()+m+" "+h[0]}function o(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function a(...h){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...h)+`
`)}function l(h){h?process.env.DEBUG=h:delete process.env.DEBUG}function d(){return process.env.DEBUG}function c(h){h.inspectOpts={};const m=Object.keys(t.inspectOpts);for(let w=0;w<m.length;w++)h.inspectOpts[m[w]]=t.inspectOpts[m[w]]}e.exports=fc()(t);const{formatters:f}=e.exports;f.o=function(h){return this.inspectOpts.colors=this.useColors,n.inspect(h,this.inspectOpts).split(`
`).map(m=>m.trim()).join(" ")},f.O=function(h){return this.inspectOpts.colors=this.useColors,n.inspect(h,this.inspectOpts)}}(yn,yn.exports)),yn.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?cs.exports=Tp():cs.exports=bp();var Rp=cs.exports,Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.ProgressCallbackTransform=void 0;const Op=Gr;class Pp extends Op.Transform{constructor(t,r,n){super(),this.total=t,this.cancellationToken=r,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(t,r,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=i+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),n(null,t)}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,t(null)}}Yr.ProgressCallbackTransform=Pp;Object.defineProperty(Re,"__esModule",{value:!0});Re.DigestTransform=Re.HttpExecutor=Re.HttpError=void 0;Re.createHttpError=fs;Re.parseJson=Up;Re.configureRequestOptionsFromUrl=hc;Re.configureRequestUrl=$s;Re.safeGetHeader=nr;Re.configureRequestOptions=kn;Re.safeStringifyJson=Mn;const Ip=Wr,Np=Rp,Dp=vt,$p=Gr,us=_t,Fp=gt,Xo=cr,xp=Yr,Pt=(0,Np.default)("electron-builder");function fs(e,t=null){return new Ds(e.statusCode||-1,`${e.statusCode} ${e.statusMessage}`+(t==null?"":`
`+JSON.stringify(t,null,"  "))+`
Headers: `+Mn(e.headers),t)}const Lp=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class Ds extends Error{constructor(t,r=`HTTP error: ${Lp.get(t)||t}`,n=null){super(r),this.statusCode=t,this.description=n,this.name="HttpError",this.code=`HTTP_ERROR_${t}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}Re.HttpError=Ds;function Up(e){return e.then(t=>t==null||t.length===0?null:JSON.parse(t))}class Kt{constructor(){this.maxRedirects=10}request(t,r=new Fp.CancellationToken,n){kn(t);const i=n==null?void 0:JSON.stringify(n),s=i?Buffer.from(i):void 0;if(s!=null){Pt(i);const{headers:o,...a}=t;t={method:"post",headers:{"Content-Type":"application/json","Content-Length":s.length,...o},...a}}return this.doApiRequest(t,r,o=>o.end(s))}doApiRequest(t,r,n,i=0){return Pt.enabled&&Pt(`Request: ${Mn(t)}`),r.createPromise((s,o,a)=>{const l=this.createRequest(t,d=>{try{this.handleResponse(d,t,r,s,o,i,n)}catch(c){o(c)}});this.addErrorAndTimeoutHandlers(l,o,t.timeout),this.addRedirectHandlers(l,t,o,i,d=>{this.doApiRequest(d,r,n,i).then(s).catch(o)}),n(l,o),a(()=>l.abort())})}addRedirectHandlers(t,r,n,i,s){}addErrorAndTimeoutHandlers(t,r,n=60*1e3){this.addTimeOutHandler(t,r,n),t.on("error",r),t.on("aborted",()=>{r(new Error("Request has been aborted by the server"))})}handleResponse(t,r,n,i,s,o,a){var l;if(Pt.enabled&&Pt(`Response: ${t.statusCode} ${t.statusMessage}, request options: ${Mn(r)}`),t.statusCode===404){s(fs(t,`method: ${r.method||"GET"} url: ${r.protocol||"https:"}//${r.hostname}${r.port?`:${r.port}`:""}${r.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(t.statusCode===204){i();return}const d=(l=t.statusCode)!==null&&l!==void 0?l:0,c=d>=300&&d<400,f=nr(t,"location");if(c&&f!=null){if(o>this.maxRedirects){s(this.createMaxRedirectError());return}this.doApiRequest(Kt.prepareRedirectUrlOptions(f,r),n,a,o).then(i).catch(s);return}t.setEncoding("utf8");let h="";t.on("error",s),t.on("data",m=>h+=m),t.on("end",()=>{try{if(t.statusCode!=null&&t.statusCode>=400){const m=nr(t,"content-type"),w=m!=null&&(Array.isArray(m)?m.find(E=>E.includes("json"))!=null:m.includes("json"));s(fs(t,`method: ${r.method||"GET"} url: ${r.protocol||"https:"}//${r.hostname}${r.port?`:${r.port}`:""}${r.path}

          Data:
          ${w?JSON.stringify(JSON.parse(h)):h}
          `))}else i(h.length===0?null:h)}catch(m){s(m)}})}async downloadToBuffer(t,r){return await r.cancellationToken.createPromise((n,i,s)=>{const o=[],a={headers:r.headers||void 0,redirect:"manual"};$s(t,a),kn(a),this.doDownload(a,{destination:null,options:r,onCancel:s,callback:l=>{l==null?n(Buffer.concat(o)):i(l)},responseHandler:(l,d)=>{let c=0;l.on("data",f=>{if(c+=f.length,c>524288e3){d(new Error("Maximum allowed size is 500 MB"));return}o.push(f)}),l.on("end",()=>{d(null)})}},0)})}doDownload(t,r,n){const i=this.createRequest(t,s=>{if(s.statusCode>=400){r.callback(new Error(`Cannot download "${t.protocol||"https:"}//${t.hostname}${t.path}", status ${s.statusCode}: ${s.statusMessage}`));return}s.on("error",r.callback);const o=nr(s,"location");if(o!=null){n<this.maxRedirects?this.doDownload(Kt.prepareRedirectUrlOptions(o,t),r,n++):r.callback(this.createMaxRedirectError());return}r.responseHandler==null?Mp(r,s):r.responseHandler(s,r.callback)});this.addErrorAndTimeoutHandlers(i,r.callback,t.timeout),this.addRedirectHandlers(i,t,r.callback,n,s=>{this.doDownload(s,r,n++)}),i.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(t,r,n){t.on("socket",i=>{i.setTimeout(n,()=>{t.abort(),r(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(t,r){const n=hc(t,{...r}),i=n.headers;if(i!=null&&i.authorization){const s=Kt.reconstructOriginalUrl(r),o=dc(t,r);Kt.isCrossOriginRedirect(s,o)&&(Pt.enabled&&Pt(`Given the cross-origin redirect (from ${s.host} to ${o.host}), the Authorization header will be stripped out.`),delete i.authorization)}return n}static reconstructOriginalUrl(t){const r=t.protocol||"https:";if(!t.hostname)throw new Error("Missing hostname in request options");const n=t.hostname,i=t.port?`:${t.port}`:"",s=t.path||"/";return new us.URL(`${r}//${n}${i}${s}`)}static isCrossOriginRedirect(t,r){if(t.hostname.toLowerCase()!==r.hostname.toLowerCase())return!0;if(t.protocol==="http:"&&["80",""].includes(t.port)&&r.protocol==="https:"&&["443",""].includes(r.port))return!1;if(t.protocol!==r.protocol)return!0;const n=t.port,i=r.port;return n!==i}static retryOnServerError(t,r=3){for(let n=0;;n++)try{return t()}catch(i){if(n<r&&(i instanceof Ds&&i.isServerError()||i.code==="EPIPE"))continue;throw i}}}Re.HttpExecutor=Kt;function dc(e,t){try{return new us.URL(e)}catch{const r=t.hostname,n=t.protocol||"https:",i=t.port?`:${t.port}`:"",s=`${n}//${r}${i}`;return new us.URL(e,s)}}function hc(e,t){const r=kn(t),n=dc(e,t);return $s(n,r),r}function $s(e,t){t.protocol=e.protocol,t.hostname=e.hostname,e.port?t.port=e.port:t.port&&delete t.port,t.path=e.pathname+e.search}class ds extends $p.Transform{get actual(){return this._actual}constructor(t,r="sha512",n="base64"){super(),this.expected=t,this.algorithm=r,this.encoding=n,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,Ip.createHash)(r)}_transform(t,r,n){this.digester.update(t),n(null,t)}_flush(t){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(r){t(r);return}t(null)}validate(){if(this._actual==null)throw(0,Xo.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,Xo.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}Re.DigestTransform=ds;function kp(e,t,r){return e!=null&&t!=null&&e!==t?(r(new Error(`checksum mismatch: expected ${t} but got ${e} (X-Checksum-Sha2 header)`)),!1):!0}function nr(e,t){const r=e.headers[t];return r==null?null:Array.isArray(r)?r.length===0?null:r[r.length-1]:r}function Mp(e,t){if(!kp(nr(t,"X-Checksum-Sha2"),e.options.sha2,e.callback))return;const r=[];if(e.options.onProgress!=null){const o=nr(t,"content-length");o!=null&&r.push(new xp.ProgressCallbackTransform(parseInt(o,10),e.options.cancellationToken,e.options.onProgress))}const n=e.options.sha512;n!=null?r.push(new ds(n,"sha512",n.length===128&&!n.includes("+")&&!n.includes("Z")&&!n.includes("=")?"hex":"base64")):e.options.sha2!=null&&r.push(new ds(e.options.sha2,"sha256","hex"));const i=(0,Dp.createWriteStream)(e.destination);r.push(i);let s=t;for(const o of r)o.on("error",a=>{i.close(),e.options.cancellationToken.cancelled||e.callback(a)}),s=s.pipe(o);i.on("finish",()=>{i.close(e.callback)})}function kn(e,t,r){r!=null&&(e.method=r),e.headers={...e.headers};const n=e.headers;return t!=null&&(n.authorization=t.startsWith("Basic")||t.startsWith("Bearer")?t:`token ${t}`),n["User-Agent"]==null&&(n["User-Agent"]="electron-builder"),(r==null||r==="GET"||n["Cache-Control"]==null)&&(n["Cache-Control"]="no-cache"),e.protocol==null&&process.versions.electron!=null&&(e.protocol="https:"),e}function Mn(e,t){return JSON.stringify(e,(r,n)=>r.endsWith("Authorization")||r.endsWith("authorization")||r.endsWith("Password")||r.endsWith("PASSWORD")||r.endsWith("Token")||r.includes("password")||r.includes("token")||t!=null&&t.has(r)?"<stripped sensitive data>":n,2)}var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.MemoLazy=void 0;class Bp{constructor(t,r){this.selector=t,this.creator=r,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const t=this.selector();if(this._value!==void 0&&pc(this.selected,t))return this._value;this.selected=t;const r=this.creator(t);return this.value=r,r}set value(t){this._value=t}}Zn.MemoLazy=Bp;function pc(e,t){if(typeof e=="object"&&e!==null&&(typeof t=="object"&&t!==null)){const i=Object.keys(e),s=Object.keys(t);return i.length===s.length&&i.every(o=>pc(e[o],t[o]))}return e===t}var zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.githubUrl=jp;zr.githubTagPrefix=Hp;zr.getS3LikeProviderBaseUrl=qp;function jp(e,t="github.com"){return`${e.protocol||"https"}://${e.host||t}`}function Hp(e){var t;return e.tagNamePrefix?e.tagNamePrefix:!((t=e.vPrefixedTagName)!==null&&t!==void 0)||t?"v":""}function qp(e){const t=e.provider;if(t==="s3")return Gp(e);if(t==="spaces")return Wp(e);throw new Error(`Not supported provider: ${t}`)}function Gp(e){let t;if(e.accelerate==!0)t=`https://${e.bucket}.s3-accelerate.amazonaws.com`;else if(e.endpoint!=null)t=`${e.endpoint}/${e.bucket}`;else if(e.bucket.includes(".")){if(e.region==null)throw new Error(`Bucket name "${e.bucket}" includes a dot, but S3 region is missing`);e.region==="us-east-1"?t=`https://s3.amazonaws.com/${e.bucket}`:t=`https://s3-${e.region}.amazonaws.com/${e.bucket}`}else e.region==="cn-north-1"?t=`https://${e.bucket}.s3.${e.region}.amazonaws.com.cn`:t=`https://${e.bucket}.s3.amazonaws.com`;return mc(t,e.path)}function mc(e,t){return t!=null&&t.length>0&&(t.startsWith("/")||(e+="/"),e+=t),e}function Wp(e){if(e.name==null)throw new Error("name is missing");if(e.region==null)throw new Error("region is missing");return mc(`https://${e.name}.${e.region}.digitaloceanspaces.com`,e.path)}var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.retry=gc;const Vp=gt;async function gc(e,t){var r;const{retries:n,interval:i,backoff:s=0,attempt:o=0,shouldRetry:a,cancellationToken:l=new Vp.CancellationToken}=t;try{return await e()}catch(d){if(await Promise.resolve((r=a==null?void 0:a(d))!==null&&r!==void 0?r:!0)&&n>0&&!l.cancelled)return await new Promise(c=>setTimeout(c,i+s*o)),await gc(e,{...t,retries:n-1,attempt:o+1});throw d}}var xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.parseDn=Yp;function Yp(e){let t=!1,r=null,n="",i=0;e=e.trim();const s=new Map;for(let o=0;o<=e.length;o++){if(o===e.length){r!==null&&s.set(r,n);break}const a=e[o];if(t){if(a==='"'){t=!1;continue}}else{if(a==='"'){t=!0;continue}if(a==="\\"){o++;const l=parseInt(e.slice(o,o+2),16);Number.isNaN(l)?n+=e[o]:(o++,n+=String.fromCharCode(l));continue}if(r===null&&a==="="){r=n,n="";continue}if(a===","||a===";"||a==="+"){r!==null&&s.set(r,n),r=null,n="";continue}}if(a===" "&&!t){if(n.length===0)continue;if(o>i){let l=o;for(;e[l]===" ";)l++;i=l}if(i>=e.length||e[i]===","||e[i]===";"||r===null&&e[i]==="="||r!==null&&e[i]==="+"){o=i-1;continue}}n+=a}return s}var or={};Object.defineProperty(or,"__esModule",{value:!0});or.nil=or.UUID=void 0;const Ec=Wr,yc=cr,zp="options.name must be either a string or a Buffer",Ko=(0,Ec.randomBytes)(16);Ko[0]=Ko[0]|1;const Fn={},z=[];for(let e=0;e<256;e++){const t=(e+256).toString(16).substr(1);Fn[t]=e,z[e]=t}class Lt{constructor(t){this.ascii=null,this.binary=null;const r=Lt.check(t);if(!r)throw new Error("not a UUID");this.version=r.version,r.format==="ascii"?this.ascii=t:this.binary=t}static v5(t,r){return Xp(t,"sha1",80,r)}toString(){return this.ascii==null&&(this.ascii=Kp(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(t,r=0){if(typeof t=="string")return t=t.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(t)?t==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(Fn[t[14]+t[15]]&240)>>4,variant:Jo((Fn[t[19]+t[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(t)){if(t.length<r+16)return!1;let n=0;for(;n<16&&t[r+n]===0;n++);return n===16?{version:void 0,variant:"nil",format:"binary"}:{version:(t[r+6]&240)>>4,variant:Jo((t[r+8]&224)>>5),format:"binary"}}throw(0,yc.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(t){const r=Buffer.allocUnsafe(16);let n=0;for(let i=0;i<16;i++)r[i]=Fn[t[n++]+t[n++]],(i===3||i===5||i===7||i===9)&&(n+=1);return r}}or.UUID=Lt;Lt.OID=Lt.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function Jo(e){switch(e){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var br;(function(e){e[e.ASCII=0]="ASCII",e[e.BINARY=1]="BINARY",e[e.OBJECT=2]="OBJECT"})(br||(br={}));function Xp(e,t,r,n,i=br.ASCII){const s=(0,Ec.createHash)(t);if(typeof e!="string"&&!Buffer.isBuffer(e))throw(0,yc.newError)(zp,"ERR_INVALID_UUID_NAME");s.update(n),s.update(e);const a=s.digest();let l;switch(i){case br.BINARY:a[6]=a[6]&15|r,a[8]=a[8]&63|128,l=a;break;case br.OBJECT:a[6]=a[6]&15|r,a[8]=a[8]&63|128,l=new Lt(a);break;default:l=z[a[0]]+z[a[1]]+z[a[2]]+z[a[3]]+"-"+z[a[4]]+z[a[5]]+"-"+z[a[6]&15|r]+z[a[7]]+"-"+z[a[8]&63|128]+z[a[9]]+"-"+z[a[10]]+z[a[11]]+z[a[12]]+z[a[13]]+z[a[14]]+z[a[15]];break}return l}function Kp(e){return z[e[0]]+z[e[1]]+z[e[2]]+z[e[3]]+"-"+z[e[4]]+z[e[5]]+"-"+z[e[6]]+z[e[7]]+"-"+z[e[8]]+z[e[9]]+"-"+z[e[10]]+z[e[11]]+z[e[12]]+z[e[13]]+z[e[14]]+z[e[15]]}or.nil=new Lt("00000000-0000-0000-0000-000000000000");var Xr={},wc={};(function(e){(function(t){t.parser=function(p,u){return new n(p,u)},t.SAXParser=n,t.SAXStream=c,t.createStream=d,t.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(p,u){if(!(this instanceof n))return new n(p,u);var C=this;s(C),C.q=C.c="",C.bufferCheckPosition=t.MAX_BUFFER_LENGTH,C.opt=u||{},C.opt.lowercase=C.opt.lowercase||C.opt.lowercasetags,C.looseCase=C.opt.lowercase?"toLowerCase":"toUpperCase",C.tags=[],C.closed=C.closedRoot=C.sawRoot=!1,C.tag=C.error=null,C.strict=!!p,C.noscript=!!(p||C.opt.noscript),C.state=y.BEGIN,C.strictEntities=C.opt.strictEntities,C.ENTITIES=C.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),C.attribList=[],C.opt.xmlns&&(C.ns=Object.create(E)),C.opt.unquotedAttributeValues===void 0&&(C.opt.unquotedAttributeValues=!p),C.trackPosition=C.opt.position!==!1,C.trackPosition&&(C.position=C.line=C.column=0),H(C,"onready")}Object.create||(Object.create=function(p){function u(){}u.prototype=p;var C=new u;return C}),Object.keys||(Object.keys=function(p){var u=[];for(var C in p)p.hasOwnProperty(C)&&u.push(C);return u});function i(p){for(var u=Math.max(t.MAX_BUFFER_LENGTH,10),C=0,_=0,X=r.length;_<X;_++){var te=p[r[_]].length;if(te>u)switch(r[_]){case"textNode":J(p);break;case"cdata":M(p,"oncdata",p.cdata),p.cdata="";break;case"script":M(p,"onscript",p.script),p.script="";break;default:R(p,"Max buffer length exceeded: "+r[_])}C=Math.max(C,te)}var oe=t.MAX_BUFFER_LENGTH-C;p.bufferCheckPosition=oe+p.position}function s(p){for(var u=0,C=r.length;u<C;u++)p[r[u]]=""}function o(p){J(p),p.cdata!==""&&(M(p,"oncdata",p.cdata),p.cdata=""),p.script!==""&&(M(p,"onscript",p.script),p.script="")}n.prototype={end:function(){D(this)},write:Ke,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a;try{a=require("stream").Stream}catch{a=function(){}}a||(a=function(){});var l=t.EVENTS.filter(function(p){return p!=="error"&&p!=="end"});function d(p,u){return new c(p,u)}function c(p,u){if(!(this instanceof c))return new c(p,u);a.apply(this),this._parser=new n(p,u),this.writable=!0,this.readable=!0;var C=this;this._parser.onend=function(){C.emit("end")},this._parser.onerror=function(_){C.emit("error",_),C._parser.error=null},this._decoder=null,l.forEach(function(_){Object.defineProperty(C,"on"+_,{get:function(){return C._parser["on"+_]},set:function(X){if(!X)return C.removeAllListeners(_),C._parser["on"+_]=X,X;C.on(_,X)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(a.prototype,{constructor:{value:c}}),c.prototype.write=function(p){return typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(p)&&(this._decoder||(this._decoder=new TextDecoder("utf8")),p=this._decoder.decode(p,{stream:!0})),this._parser.write(p.toString()),this.emit("data",p),!0},c.prototype.end=function(p){if(p&&p.length&&this.write(p),this._decoder){var u=this._decoder.decode();u&&(this._parser.write(u),this.emit("data",u))}return this._parser.end(),!0},c.prototype.on=function(p,u){var C=this;return!C._parser["on"+p]&&l.indexOf(p)!==-1&&(C._parser["on"+p]=function(){var _=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);_.splice(0,0,p),C.emit.apply(C,_)}),a.prototype.on.call(C,p,u)};var f="[CDATA[",h="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/2000/xmlns/",E={xml:m,xmlns:w},A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,T=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function $(p){return p===" "||p===`
`||p==="\r"||p==="	"}function K(p){return p==='"'||p==="'"}function ee(p){return p===">"||$(p)}function j(p,u){return p.test(u)}function xe(p,u){return!j(p,u)}var y=0;t.STATE={BEGIN:y++,BEGIN_WHITESPACE:y++,TEXT:y++,TEXT_ENTITY:y++,OPEN_WAKA:y++,SGML_DECL:y++,SGML_DECL_QUOTED:y++,DOCTYPE:y++,DOCTYPE_QUOTED:y++,DOCTYPE_DTD:y++,DOCTYPE_DTD_QUOTED:y++,COMMENT_STARTING:y++,COMMENT:y++,COMMENT_ENDING:y++,COMMENT_ENDED:y++,CDATA:y++,CDATA_ENDING:y++,CDATA_ENDING_2:y++,PROC_INST:y++,PROC_INST_BODY:y++,PROC_INST_ENDING:y++,OPEN_TAG:y++,OPEN_TAG_SLASH:y++,ATTRIB:y++,ATTRIB_NAME:y++,ATTRIB_NAME_SAW_WHITE:y++,ATTRIB_VALUE:y++,ATTRIB_VALUE_QUOTED:y++,ATTRIB_VALUE_CLOSED:y++,ATTRIB_VALUE_UNQUOTED:y++,ATTRIB_VALUE_ENTITY_Q:y++,ATTRIB_VALUE_ENTITY_U:y++,CLOSE_TAG:y++,CLOSE_TAG_SAW_WHITE:y++,SCRIPT:y++,SCRIPT_ENDING:y++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(p){var u=t.ENTITIES[p],C=typeof u=="number"?String.fromCharCode(u):u;t.ENTITIES[p]=C});for(var W in t.STATE)t.STATE[t.STATE[W]]=W;y=t.STATE;function H(p,u,C){p[u]&&p[u](C)}function M(p,u,C){p.textNode&&J(p),H(p,u,C)}function J(p){p.textNode=I(p.opt,p.textNode),p.textNode&&H(p,"ontext",p.textNode),p.textNode=""}function I(p,u){return p.trim&&(u=u.trim()),p.normalize&&(u=u.replace(/\s+/g," ")),u}function R(p,u){return J(p),p.trackPosition&&(u+=`
Line: `+p.line+`
Column: `+p.column+`
Char: `+p.c),u=new Error(u),p.error=u,H(p,"onerror",u),p}function D(p){return p.sawRoot&&!p.closedRoot&&b(p,"Unclosed root tag"),p.state!==y.BEGIN&&p.state!==y.BEGIN_WHITESPACE&&p.state!==y.TEXT&&R(p,"Unexpected end"),J(p),p.c="",p.closed=!0,H(p,"onend"),n.call(p,p.strict,p.opt),p}function b(p,u){if(typeof p!="object"||!(p instanceof n))throw new Error("bad call to strictFail");p.strict&&R(p,u)}function F(p){p.strict||(p.tagName=p.tagName[p.looseCase]());var u=p.tags[p.tags.length-1]||p,C=p.tag={name:p.tagName,attributes:{}};p.opt.xmlns&&(C.ns=u.ns),p.attribList.length=0,M(p,"onopentagstart",C)}function N(p,u){var C=p.indexOf(":"),_=C<0?["",p]:p.split(":"),X=_[0],te=_[1];return u&&p==="xmlns"&&(X="xmlns",te=""),{prefix:X,local:te}}function k(p){if(p.strict||(p.attribName=p.attribName[p.looseCase]()),p.attribList.indexOf(p.attribName)!==-1||p.tag.attributes.hasOwnProperty(p.attribName)){p.attribName=p.attribValue="";return}if(p.opt.xmlns){var u=N(p.attribName,!0),C=u.prefix,_=u.local;if(C==="xmlns")if(_==="xml"&&p.attribValue!==m)b(p,"xml: prefix must be bound to "+m+`
Actual: `+p.attribValue);else if(_==="xmlns"&&p.attribValue!==w)b(p,"xmlns: prefix must be bound to "+w+`
Actual: `+p.attribValue);else{var X=p.tag,te=p.tags[p.tags.length-1]||p;X.ns===te.ns&&(X.ns=Object.create(te.ns)),X.ns[_]=p.attribValue}p.attribList.push([p.attribName,p.attribValue])}else p.tag.attributes[p.attribName]=p.attribValue,M(p,"onattribute",{name:p.attribName,value:p.attribValue});p.attribName=p.attribValue=""}function Y(p,u){if(p.opt.xmlns){var C=p.tag,_=N(p.tagName);C.prefix=_.prefix,C.local=_.local,C.uri=C.ns[_.prefix]||"",C.prefix&&!C.uri&&(b(p,"Unbound namespace prefix: "+JSON.stringify(p.tagName)),C.uri=_.prefix);var X=p.tags[p.tags.length-1]||p;C.ns&&X.ns!==C.ns&&Object.keys(C.ns).forEach(function(sn){M(p,"onopennamespace",{prefix:sn,uri:C.ns[sn]})});for(var te=0,oe=p.attribList.length;te<oe;te++){var me=p.attribList[te],we=me[0],st=me[1],ue=N(we,!0),je=ue.prefix,Ei=ue.local,nn=je===""?"":C.ns[je]||"",hr={name:we,value:st,prefix:je,local:Ei,uri:nn};je&&je!=="xmlns"&&!nn&&(b(p,"Unbound namespace prefix: "+JSON.stringify(je)),hr.uri=je),p.tag.attributes[we]=hr,M(p,"onattribute",hr)}p.attribList.length=0}p.tag.isSelfClosing=!!u,p.sawRoot=!0,p.tags.push(p.tag),M(p,"onopentag",p.tag),u||(!p.noscript&&p.tagName.toLowerCase()==="script"?p.state=y.SCRIPT:p.state=y.TEXT,p.tag=null,p.tagName=""),p.attribName=p.attribValue="",p.attribList.length=0}function q(p){if(!p.tagName){b(p,"Weird empty close tag."),p.textNode+="</>",p.state=y.TEXT;return}if(p.script){if(p.tagName!=="script"){p.script+="</"+p.tagName+">",p.tagName="",p.state=y.SCRIPT;return}M(p,"onscript",p.script),p.script=""}var u=p.tags.length,C=p.tagName;p.strict||(C=C[p.looseCase]());for(var _=C;u--;){var X=p.tags[u];if(X.name!==_)b(p,"Unexpected close tag");else break}if(u<0){b(p,"Unmatched closing tag: "+p.tagName),p.textNode+="</"+p.tagName+">",p.state=y.TEXT;return}p.tagName=C;for(var te=p.tags.length;te-- >u;){var oe=p.tag=p.tags.pop();p.tagName=p.tag.name,M(p,"onclosetag",p.tagName);var me={};for(var we in oe.ns)me[we]=oe.ns[we];var st=p.tags[p.tags.length-1]||p;p.opt.xmlns&&oe.ns!==st.ns&&Object.keys(oe.ns).forEach(function(ue){var je=oe.ns[ue];M(p,"onclosenamespace",{prefix:ue,uri:je})})}u===0&&(p.closedRoot=!0),p.tagName=p.attribValue=p.attribName="",p.attribList.length=0,p.state=y.TEXT}function Q(p){var u=p.entity,C=u.toLowerCase(),_,X="";return p.ENTITIES[u]?p.ENTITIES[u]:p.ENTITIES[C]?p.ENTITIES[C]:(u=C,u.charAt(0)==="#"&&(u.charAt(1)==="x"?(u=u.slice(2),_=parseInt(u,16),X=_.toString(16)):(u=u.slice(1),_=parseInt(u,10),X=_.toString(10))),u=u.replace(/^0+/,""),isNaN(_)||X.toLowerCase()!==u||_<0||_>1114111?(b(p,"Invalid character entity"),"&"+p.entity+";"):String.fromCodePoint(_))}function de(p,u){u==="<"?(p.state=y.OPEN_WAKA,p.startTagPosition=p.position):$(u)||(b(p,"Non-whitespace before first tag."),p.textNode=u,p.state=y.TEXT)}function U(p,u){var C="";return u<p.length&&(C=p.charAt(u)),C}function Ke(p){var u=this;if(this.error)throw this.error;if(u.closed)return R(u,"Cannot write after close. Assign an onready handler.");if(p===null)return D(u);typeof p=="object"&&(p=p.toString());for(var C=0,_="";_=U(p,C++),u.c=_,!!_;)switch(u.trackPosition&&(u.position++,_===`
`?(u.line++,u.column=0):u.column++),u.state){case y.BEGIN:if(u.state=y.BEGIN_WHITESPACE,_==="\uFEFF")continue;de(u,_);continue;case y.BEGIN_WHITESPACE:de(u,_);continue;case y.TEXT:if(u.sawRoot&&!u.closedRoot){for(var te=C-1;_&&_!=="<"&&_!=="&";)_=U(p,C++),_&&u.trackPosition&&(u.position++,_===`
`?(u.line++,u.column=0):u.column++);u.textNode+=p.substring(te,C-1)}_==="<"&&!(u.sawRoot&&u.closedRoot&&!u.strict)?(u.state=y.OPEN_WAKA,u.startTagPosition=u.position):(!$(_)&&(!u.sawRoot||u.closedRoot)&&b(u,"Text data outside of root node."),_==="&"?u.state=y.TEXT_ENTITY:u.textNode+=_);continue;case y.SCRIPT:_==="<"?u.state=y.SCRIPT_ENDING:u.script+=_;continue;case y.SCRIPT_ENDING:_==="/"?u.state=y.CLOSE_TAG:(u.script+="<"+_,u.state=y.SCRIPT);continue;case y.OPEN_WAKA:if(_==="!")u.state=y.SGML_DECL,u.sgmlDecl="";else if(!$(_))if(j(A,_))u.state=y.OPEN_TAG,u.tagName=_;else if(_==="/")u.state=y.CLOSE_TAG,u.tagName="";else if(_==="?")u.state=y.PROC_INST,u.procInstName=u.procInstBody="";else{if(b(u,"Unencoded <"),u.startTagPosition+1<u.position){var X=u.position-u.startTagPosition;_=new Array(X).join(" ")+_}u.textNode+="<"+_,u.state=y.TEXT}continue;case y.SGML_DECL:if(u.sgmlDecl+_==="--"){u.state=y.COMMENT,u.comment="",u.sgmlDecl="";continue}u.doctype&&u.doctype!==!0&&u.sgmlDecl?(u.state=y.DOCTYPE_DTD,u.doctype+="<!"+u.sgmlDecl+_,u.sgmlDecl=""):(u.sgmlDecl+_).toUpperCase()===f?(M(u,"onopencdata"),u.state=y.CDATA,u.sgmlDecl="",u.cdata=""):(u.sgmlDecl+_).toUpperCase()===h?(u.state=y.DOCTYPE,(u.doctype||u.sawRoot)&&b(u,"Inappropriately located doctype declaration"),u.doctype="",u.sgmlDecl=""):_===">"?(M(u,"onsgmldeclaration",u.sgmlDecl),u.sgmlDecl="",u.state=y.TEXT):(K(_)&&(u.state=y.SGML_DECL_QUOTED),u.sgmlDecl+=_);continue;case y.SGML_DECL_QUOTED:_===u.q&&(u.state=y.SGML_DECL,u.q=""),u.sgmlDecl+=_;continue;case y.DOCTYPE:_===">"?(u.state=y.TEXT,M(u,"ondoctype",u.doctype),u.doctype=!0):(u.doctype+=_,_==="["?u.state=y.DOCTYPE_DTD:K(_)&&(u.state=y.DOCTYPE_QUOTED,u.q=_));continue;case y.DOCTYPE_QUOTED:u.doctype+=_,_===u.q&&(u.q="",u.state=y.DOCTYPE);continue;case y.DOCTYPE_DTD:_==="]"?(u.doctype+=_,u.state=y.DOCTYPE):_==="<"?(u.state=y.OPEN_WAKA,u.startTagPosition=u.position):K(_)?(u.doctype+=_,u.state=y.DOCTYPE_DTD_QUOTED,u.q=_):u.doctype+=_;continue;case y.DOCTYPE_DTD_QUOTED:u.doctype+=_,_===u.q&&(u.state=y.DOCTYPE_DTD,u.q="");continue;case y.COMMENT:_==="-"?u.state=y.COMMENT_ENDING:u.comment+=_;continue;case y.COMMENT_ENDING:_==="-"?(u.state=y.COMMENT_ENDED,u.comment=I(u.opt,u.comment),u.comment&&M(u,"oncomment",u.comment),u.comment=""):(u.comment+="-"+_,u.state=y.COMMENT);continue;case y.COMMENT_ENDED:_!==">"?(b(u,"Malformed comment"),u.comment+="--"+_,u.state=y.COMMENT):u.doctype&&u.doctype!==!0?u.state=y.DOCTYPE_DTD:u.state=y.TEXT;continue;case y.CDATA:for(var te=C-1;_&&_!=="]";)_=U(p,C++),_&&u.trackPosition&&(u.position++,_===`
`?(u.line++,u.column=0):u.column++);u.cdata+=p.substring(te,C-1),_==="]"&&(u.state=y.CDATA_ENDING);continue;case y.CDATA_ENDING:_==="]"?u.state=y.CDATA_ENDING_2:(u.cdata+="]"+_,u.state=y.CDATA);continue;case y.CDATA_ENDING_2:_===">"?(u.cdata&&M(u,"oncdata",u.cdata),M(u,"onclosecdata"),u.cdata="",u.state=y.TEXT):_==="]"?u.cdata+="]":(u.cdata+="]]"+_,u.state=y.CDATA);continue;case y.PROC_INST:_==="?"?u.state=y.PROC_INST_ENDING:$(_)?u.state=y.PROC_INST_BODY:u.procInstName+=_;continue;case y.PROC_INST_BODY:if(!u.procInstBody&&$(_))continue;_==="?"?u.state=y.PROC_INST_ENDING:u.procInstBody+=_;continue;case y.PROC_INST_ENDING:_===">"?(M(u,"onprocessinginstruction",{name:u.procInstName,body:u.procInstBody}),u.procInstName=u.procInstBody="",u.state=y.TEXT):(u.procInstBody+="?"+_,u.state=y.PROC_INST_BODY);continue;case y.OPEN_TAG:j(S,_)?u.tagName+=_:(F(u),_===">"?Y(u):_==="/"?u.state=y.OPEN_TAG_SLASH:($(_)||b(u,"Invalid character in tag name"),u.state=y.ATTRIB));continue;case y.OPEN_TAG_SLASH:_===">"?(Y(u,!0),q(u)):(b(u,"Forward-slash in opening tag not followed by >"),u.state=y.ATTRIB);continue;case y.ATTRIB:if($(_))continue;_===">"?Y(u):_==="/"?u.state=y.OPEN_TAG_SLASH:j(A,_)?(u.attribName=_,u.attribValue="",u.state=y.ATTRIB_NAME):b(u,"Invalid attribute name");continue;case y.ATTRIB_NAME:_==="="?u.state=y.ATTRIB_VALUE:_===">"?(b(u,"Attribute without value"),u.attribValue=u.attribName,k(u),Y(u)):$(_)?u.state=y.ATTRIB_NAME_SAW_WHITE:j(S,_)?u.attribName+=_:b(u,"Invalid attribute name");continue;case y.ATTRIB_NAME_SAW_WHITE:if(_==="=")u.state=y.ATTRIB_VALUE;else{if($(_))continue;b(u,"Attribute without value"),u.tag.attributes[u.attribName]="",u.attribValue="",M(u,"onattribute",{name:u.attribName,value:""}),u.attribName="",_===">"?Y(u):j(A,_)?(u.attribName=_,u.state=y.ATTRIB_NAME):(b(u,"Invalid attribute name"),u.state=y.ATTRIB)}continue;case y.ATTRIB_VALUE:if($(_))continue;K(_)?(u.q=_,u.state=y.ATTRIB_VALUE_QUOTED):(u.opt.unquotedAttributeValues||R(u,"Unquoted attribute value"),u.state=y.ATTRIB_VALUE_UNQUOTED,u.attribValue=_);continue;case y.ATTRIB_VALUE_QUOTED:if(_!==u.q){_==="&"?u.state=y.ATTRIB_VALUE_ENTITY_Q:u.attribValue+=_;continue}k(u),u.q="",u.state=y.ATTRIB_VALUE_CLOSED;continue;case y.ATTRIB_VALUE_CLOSED:$(_)?u.state=y.ATTRIB:_===">"?Y(u):_==="/"?u.state=y.OPEN_TAG_SLASH:j(A,_)?(b(u,"No whitespace between attributes"),u.attribName=_,u.attribValue="",u.state=y.ATTRIB_NAME):b(u,"Invalid attribute name");continue;case y.ATTRIB_VALUE_UNQUOTED:if(!ee(_)){_==="&"?u.state=y.ATTRIB_VALUE_ENTITY_U:u.attribValue+=_;continue}k(u),_===">"?Y(u):u.state=y.ATTRIB;continue;case y.CLOSE_TAG:if(u.tagName)_===">"?q(u):j(S,_)?u.tagName+=_:u.script?(u.script+="</"+u.tagName+_,u.tagName="",u.state=y.SCRIPT):($(_)||b(u,"Invalid tagname in closing tag"),u.state=y.CLOSE_TAG_SAW_WHITE);else{if($(_))continue;xe(A,_)?u.script?(u.script+="</"+_,u.state=y.SCRIPT):b(u,"Invalid tagname in closing tag."):u.tagName=_}continue;case y.CLOSE_TAG_SAW_WHITE:if($(_))continue;_===">"?q(u):b(u,"Invalid characters in closing tag");continue;case y.TEXT_ENTITY:case y.ATTRIB_VALUE_ENTITY_Q:case y.ATTRIB_VALUE_ENTITY_U:var oe,me;switch(u.state){case y.TEXT_ENTITY:oe=y.TEXT,me="textNode";break;case y.ATTRIB_VALUE_ENTITY_Q:oe=y.ATTRIB_VALUE_QUOTED,me="attribValue";break;case y.ATTRIB_VALUE_ENTITY_U:oe=y.ATTRIB_VALUE_UNQUOTED,me="attribValue";break}if(_===";"){var we=Q(u);u.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(we)?(u.entity="",u.state=oe,u.write(we)):(u[me]+=we,u.entity="",u.state=oe)}else j(u.entity.length?P:T,_)?u.entity+=_:(b(u,"Invalid character in entity name"),u[me]+="&"+u.entity+_,u.entity="",u.state=oe);continue;default:throw new Error(u,"Unknown state: "+u.state)}return u.position>=u.bufferCheckPosition&&i(u),u}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var p=String.fromCharCode,u=Math.floor,C=function(){var _=16384,X=[],te,oe,me=-1,we=arguments.length;if(!we)return"";for(var st="";++me<we;){var ue=Number(arguments[me]);if(!isFinite(ue)||ue<0||ue>1114111||u(ue)!==ue)throw RangeError("Invalid code point: "+ue);ue<=65535?X.push(ue):(ue-=65536,te=(ue>>10)+55296,oe=ue%1024+56320,X.push(te,oe)),(me+1===we||X.length>_)&&(st+=p.apply(null,X),X.length=0)}return st};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:C,configurable:!0,writable:!0}):String.fromCodePoint=C}()})(e)})(wc);Object.defineProperty(Xr,"__esModule",{value:!0});Xr.XElement=void 0;Xr.parseXml=em;const Jp=wc,wn=cr;class vc{constructor(t){if(this.name=t,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!t)throw(0,wn.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!Zp(t))throw(0,wn.newError)(`Invalid element name: ${t}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(t){const r=this.attributes===null?null:this.attributes[t];if(r==null)throw(0,wn.newError)(`No attribute "${t}"`,"ERR_XML_MISSED_ATTRIBUTE");return r}removeAttribute(t){this.attributes!==null&&delete this.attributes[t]}element(t,r=!1,n=null){const i=this.elementOrNull(t,r);if(i===null)throw(0,wn.newError)(n||`No element "${t}"`,"ERR_XML_MISSED_ELEMENT");return i}elementOrNull(t,r=!1){if(this.elements===null)return null;for(const n of this.elements)if(Qo(n,t,r))return n;return null}getElements(t,r=!1){return this.elements===null?[]:this.elements.filter(n=>Qo(n,t,r))}elementValueOrEmpty(t,r=!1){const n=this.elementOrNull(t,r);return n===null?"":n.value}}Xr.XElement=vc;const Qp=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function Zp(e){return Qp.test(e)}function Qo(e,t,r){const n=e.name;return n===t||r===!0&&n.length===t.length&&n.toLowerCase()===t.toLowerCase()}function em(e){let t=null;const r=Jp.parser(!0,{}),n=[];return r.onopentag=i=>{const s=new vc(i.name);if(s.attributes=i.attributes,t===null)t=s;else{const o=n[n.length-1];o.elements==null&&(o.elements=[]),o.elements.push(s)}n.push(s)},r.onclosetag=()=>{n.pop()},r.ontext=i=>{n.length>0&&(n[n.length-1].value=i)},r.oncdata=i=>{const s=n[n.length-1];s.value=i,s.isCData=!0},r.onerror=i=>{throw i},r.write(e),t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT_APP_PACKAGE_FILE_NAME=e.CURRENT_APP_INSTALLER_FILE_NAME=e.XElement=e.parseXml=e.UUID=e.parseDn=e.retry=e.githubTagPrefix=e.githubUrl=e.getS3LikeProviderBaseUrl=e.ProgressCallbackTransform=e.MemoLazy=e.safeStringifyJson=e.safeGetHeader=e.parseJson=e.HttpExecutor=e.HttpError=e.DigestTransform=e.createHttpError=e.configureRequestUrl=e.configureRequestOptionsFromUrl=e.configureRequestOptions=e.newError=e.CancellationToken=e.CancellationError=void 0,e.asArray=f;var t=gt;Object.defineProperty(e,"CancellationError",{enumerable:!0,get:function(){return t.CancellationError}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}});var r=cr;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return r.newError}});var n=Re;Object.defineProperty(e,"configureRequestOptions",{enumerable:!0,get:function(){return n.configureRequestOptions}}),Object.defineProperty(e,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return n.configureRequestOptionsFromUrl}}),Object.defineProperty(e,"configureRequestUrl",{enumerable:!0,get:function(){return n.configureRequestUrl}}),Object.defineProperty(e,"createHttpError",{enumerable:!0,get:function(){return n.createHttpError}}),Object.defineProperty(e,"DigestTransform",{enumerable:!0,get:function(){return n.DigestTransform}}),Object.defineProperty(e,"HttpError",{enumerable:!0,get:function(){return n.HttpError}}),Object.defineProperty(e,"HttpExecutor",{enumerable:!0,get:function(){return n.HttpExecutor}}),Object.defineProperty(e,"parseJson",{enumerable:!0,get:function(){return n.parseJson}}),Object.defineProperty(e,"safeGetHeader",{enumerable:!0,get:function(){return n.safeGetHeader}}),Object.defineProperty(e,"safeStringifyJson",{enumerable:!0,get:function(){return n.safeStringifyJson}});var i=Zn;Object.defineProperty(e,"MemoLazy",{enumerable:!0,get:function(){return i.MemoLazy}});var s=Yr;Object.defineProperty(e,"ProgressCallbackTransform",{enumerable:!0,get:function(){return s.ProgressCallbackTransform}});var o=zr;Object.defineProperty(e,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return o.getS3LikeProviderBaseUrl}}),Object.defineProperty(e,"githubUrl",{enumerable:!0,get:function(){return o.githubUrl}}),Object.defineProperty(e,"githubTagPrefix",{enumerable:!0,get:function(){return o.githubTagPrefix}});var a=Fs;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return a.retry}});var l=xs;Object.defineProperty(e,"parseDn",{enumerable:!0,get:function(){return l.parseDn}});var d=or;Object.defineProperty(e,"UUID",{enumerable:!0,get:function(){return d.UUID}});var c=Xr;Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return c.parseXml}}),Object.defineProperty(e,"XElement",{enumerable:!0,get:function(){return c.XElement}}),e.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",e.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function f(h){return h==null?[]:Array.isArray(h)?h:[h]}})(fe);var ye={},Ls={},Ve={};function _c(e){return typeof e>"u"||e===null}function tm(e){return typeof e=="object"&&e!==null}function rm(e){return Array.isArray(e)?e:_c(e)?[]:[e]}function nm(e,t){var r,n,i,s;if(t)for(s=Object.keys(t),r=0,n=s.length;r<n;r+=1)i=s[r],e[i]=t[i];return e}function im(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function sm(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Ve.isNothing=_c;Ve.isObject=tm;Ve.toArray=rm;Ve.repeat=im;Ve.isNegativeZero=sm;Ve.extend=nm;function Ac(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Fr(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Ac(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Fr.prototype=Object.create(Error.prototype);Fr.prototype.constructor=Fr;Fr.prototype.toString=function(t){return this.name+": "+Ac(this,t)};var Kr=Fr,Ar=Ve;function $i(e,t,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-t>a&&(s=" ... ",t=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+e.slice(t,r).replace(/\t/g,"")+o,pos:n-t+s.length}}function Fi(e,t){return Ar.repeat(" ",t-e.length)+e}function om(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(e.buffer);)i.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",l,d,c=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+c+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)d=$i(e.buffer,n[o-l],i[o-l],e.position-(n[o]-n[o-l]),f),a=Ar.repeat(" ",t.indent)+Fi((e.line-l+1).toString(),c)+" | "+d.str+`
`+a;for(d=$i(e.buffer,n[o],i[o],e.position,f),a+=Ar.repeat(" ",t.indent)+Fi((e.line+1).toString(),c)+" | "+d.str+`
`,a+=Ar.repeat("-",t.indent+c+3+d.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=i.length);l++)d=$i(e.buffer,n[o+l],i[o+l],e.position-(n[o]-n[o+l]),f),a+=Ar.repeat(" ",t.indent)+Fi((e.line+l+1).toString(),c)+" | "+d.str+`
`;return a.replace(/\n$/,"")}var am=om,Zo=Kr,lm=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],cm=["scalar","sequence","mapping"];function um(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function fm(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(lm.indexOf(r)===-1)throw new Zo('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=um(t.styleAliases||null),cm.indexOf(this.kind)===-1)throw new Zo('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Ne=fm,yr=Kr,xi=Ne;function ea(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function dm(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function hs(e){return this.extend(e)}hs.prototype.extend=function(t){var r=[],n=[];if(t instanceof xi)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new yr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof xi))throw new yr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new yr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new yr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof xi))throw new yr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(hs.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=ea(i,"implicit"),i.compiledExplicit=ea(i,"explicit"),i.compiledTypeMap=dm(i.compiledImplicit,i.compiledExplicit),i};var Tc=hs,hm=Ne,Sc=new hm("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),pm=Ne,Cc=new pm("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),mm=Ne,bc=new mm("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),gm=Tc,Rc=new gm({explicit:[Sc,Cc,bc]}),Em=Ne;function ym(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function wm(){return null}function vm(e){return e===null}var Oc=new Em("tag:yaml.org,2002:null",{kind:"scalar",resolve:ym,construct:wm,predicate:vm,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),_m=Ne;function Am(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Tm(e){return e==="true"||e==="True"||e==="TRUE"}function Sm(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Pc=new _m("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Am,construct:Tm,predicate:Sm,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),Cm=Ve,bm=Ne;function Rm(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Om(e){return 48<=e&&e<=55}function Pm(e){return 48<=e&&e<=57}function Im(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Rm(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Om(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!Pm(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Nm(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Dm(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Cm.isNegativeZero(e)}var Ic=new bm("tag:yaml.org,2002:int",{kind:"scalar",resolve:Im,construct:Nm,predicate:Dm,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Nc=Ve,$m=Ne,Fm=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function xm(e){return!(e===null||!Fm.test(e)||e[e.length-1]==="_")}function Lm(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var Um=/^[-+]?[0-9]+e/;function km(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Nc.isNegativeZero(e))return"-0.0";return r=e.toString(10),Um.test(r)?r.replace("e",".e"):r}function Mm(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Nc.isNegativeZero(e))}var Dc=new $m("tag:yaml.org,2002:float",{kind:"scalar",resolve:xm,construct:Lm,predicate:Mm,represent:km,defaultStyle:"lowercase"}),$c=Rc.extend({implicit:[Oc,Pc,Ic,Dc]}),Fc=$c,Bm=Ne,xc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Lc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function jm(e){return e===null?!1:xc.exec(e)!==null||Lc.exec(e)!==null}function Hm(e){var t,r,n,i,s,o,a,l=0,d=null,c,f,h;if(t=xc.exec(e),t===null&&(t=Lc.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(c=+t[10],f=+(t[11]||0),d=(c*60+f)*6e4,t[9]==="-"&&(d=-d)),h=new Date(Date.UTC(r,n,i,s,o,a,l)),d&&h.setTime(h.getTime()-d),h}function qm(e){return e.toISOString()}var Uc=new Bm("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:jm,construct:Hm,instanceOf:Date,represent:qm}),Gm=Ne;function Wm(e){return e==="<<"||e===null}var kc=new Gm("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Wm}),Vm=Ne,Us=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Ym(e){if(e===null)return!1;var t,r,n=0,i=e.length,s=Us;for(r=0;r<i;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function zm(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=Us,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function Xm(e){var t="",r=0,n,i,s=e.length,o=Us;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=s%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function Km(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Mc=new Vm("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Ym,construct:zm,predicate:Km,represent:Xm}),Jm=Ne,Qm=Object.prototype.hasOwnProperty,Zm=Object.prototype.toString;function eg(e){if(e===null)return!0;var t=[],r,n,i,s,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,Zm.call(i)!=="[object Object]")return!1;for(s in i)if(Qm.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function tg(e){return e!==null?e:[]}var Bc=new Jm("tag:yaml.org,2002:omap",{kind:"sequence",resolve:eg,construct:tg}),rg=Ne,ng=Object.prototype.toString;function ig(e){if(e===null)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],ng.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[t]=[i[0],n[i[0]]]}return!0}function sg(e){if(e===null)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}var jc=new rg("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ig,construct:sg}),og=Ne,ag=Object.prototype.hasOwnProperty;function lg(e){if(e===null)return!0;var t,r=e;for(t in r)if(ag.call(r,t)&&r[t]!==null)return!1;return!0}function cg(e){return e!==null?e:{}}var Hc=new og("tag:yaml.org,2002:set",{kind:"mapping",resolve:lg,construct:cg}),ks=Fc.extend({implicit:[Uc,kc],explicit:[Mc,Bc,jc,Hc]}),Dt=Ve,qc=Kr,ug=am,fg=ks,Et=Object.prototype.hasOwnProperty,Bn=1,Gc=2,Wc=3,jn=4,Li=1,dg=2,ta=3,hg=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,pg=/[\x85\u2028\u2029]/,mg=/[,\[\]\{\}]/,Vc=/^(?:!|!!|![a-z\-]+!)$/i,Yc=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ra(e){return Object.prototype.toString.call(e)}function Ze(e){return e===10||e===13}function xt(e){return e===9||e===32}function Fe(e){return e===9||e===32||e===10||e===13}function Jt(e){return e===44||e===91||e===93||e===123||e===125}function gg(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Eg(e){return e===120?2:e===117?4:e===85?8:0}function yg(e){return 48<=e&&e<=57?e-48:-1}function na(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function wg(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function zc(e,t,r){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:r}):e[t]=r}var Xc=new Array(256),Kc=new Array(256);for(var Wt=0;Wt<256;Wt++)Xc[Wt]=na(Wt)?1:0,Kc[Wt]=na(Wt);function vg(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||fg,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Jc(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=ug(r),new qc(t,r)}function L(e,t){throw Jc(e,t)}function Hn(e,t){e.onWarning&&e.onWarning.call(null,Jc(e,t))}var ia={YAML:function(t,r,n){var i,s,o;t.version!==null&&L(t,"duplication of %YAML directive"),n.length!==1&&L(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&L(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&L(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Hn(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,s;n.length!==2&&L(t,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],Vc.test(i)||L(t,"ill-formed tag handle (first argument) of the TAG directive"),Et.call(t.tagMap,i)&&L(t,'there is a previously declared suffix for "'+i+'" tag handle'),Yc.test(s)||L(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{L(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function pt(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||L(e,"expected valid JSON character");else hg.test(a)&&L(e,"the stream contains non-printable characters");e.result+=a}}function sa(e,t,r,n){var i,s,o,a;for(Dt.isObject(r)||L(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],Et.call(t,s)||(zc(t,s,r[s]),n[s]=!0)}function Qt(e,t,r,n,i,s,o,a,l){var d,c;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),d=0,c=i.length;d<c;d+=1)Array.isArray(i[d])&&L(e,"nested arrays are not supported inside keys"),typeof i=="object"&&ra(i[d])==="[object Object]"&&(i[d]="[object Object]");if(typeof i=="object"&&ra(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(d=0,c=s.length;d<c;d+=1)sa(e,t,s[d],r);else sa(e,t,s,r);else!e.json&&!Et.call(r,i)&&Et.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,L(e,"duplicated mapping key")),zc(t,i,s),delete r[i];return t}function Ms(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):L(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function le(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;xt(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Ze(i))for(Ms(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Hn(e,"deficient indentation"),n}function ei(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Fe(r)))}function Bs(e,t){t===1?e.result+=" ":t>1&&(e.result+=Dt.repeat(`
`,t-1))}function _g(e,t,r){var n,i,s,o,a,l,d,c,f=e.kind,h=e.result,m;if(m=e.input.charCodeAt(e.position),Fe(m)||Jt(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(i=e.input.charCodeAt(e.position+1),Fe(i)||r&&Jt(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;m!==0;){if(m===58){if(i=e.input.charCodeAt(e.position+1),Fe(i)||r&&Jt(i))break}else if(m===35){if(n=e.input.charCodeAt(e.position-1),Fe(n))break}else{if(e.position===e.lineStart&&ei(e)||r&&Jt(m))break;if(Ze(m))if(l=e.line,d=e.lineStart,c=e.lineIndent,le(e,!1,-1),e.lineIndent>=t){a=!0,m=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=d,e.lineIndent=c;break}}a&&(pt(e,s,o,!1),Bs(e,e.line-l),s=o=e.position,a=!1),xt(m)||(o=e.position+1),m=e.input.charCodeAt(++e.position)}return pt(e,s,o,!1),e.result?!0:(e.kind=f,e.result=h,!1)}function Ag(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(pt(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else Ze(r)?(pt(e,n,i,!0),Bs(e,le(e,!1,t)),n=i=e.position):e.position===e.lineStart&&ei(e)?L(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);L(e,"unexpected end of the stream within a single quoted scalar")}function Tg(e,t){var r,n,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return pt(e,r,e.position,!0),e.position++,!0;if(a===92){if(pt(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),Ze(a))le(e,!1,t);else if(a<256&&Xc[a])e.result+=Kc[a],e.position++;else if((o=Eg(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=gg(a))>=0?s=(s<<4)+o:L(e,"expected hexadecimal character");e.result+=wg(s),e.position++}else L(e,"unknown escape sequence");r=n=e.position}else Ze(a)?(pt(e,r,n,!0),Bs(e,le(e,!1,t)),r=n=e.position):e.position===e.lineStart&&ei(e)?L(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}L(e,"unexpected end of the stream within a double quoted scalar")}function Sg(e,t){var r=!0,n,i,s,o=e.tag,a,l=e.anchor,d,c,f,h,m,w=Object.create(null),E,A,S,T;if(T=e.input.charCodeAt(e.position),T===91)c=93,m=!1,a=[];else if(T===123)c=125,m=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),T=e.input.charCodeAt(++e.position);T!==0;){if(le(e,!0,t),T=e.input.charCodeAt(e.position),T===c)return e.position++,e.tag=o,e.anchor=l,e.kind=m?"mapping":"sequence",e.result=a,!0;r?T===44&&L(e,"expected the node content, but found ','"):L(e,"missed comma between flow collection entries"),A=E=S=null,f=h=!1,T===63&&(d=e.input.charCodeAt(e.position+1),Fe(d)&&(f=h=!0,e.position++,le(e,!0,t))),n=e.line,i=e.lineStart,s=e.position,ar(e,t,Bn,!1,!0),A=e.tag,E=e.result,le(e,!0,t),T=e.input.charCodeAt(e.position),(h||e.line===n)&&T===58&&(f=!0,T=e.input.charCodeAt(++e.position),le(e,!0,t),ar(e,t,Bn,!1,!0),S=e.result),m?Qt(e,a,w,A,E,S,n,i,s):f?a.push(Qt(e,null,w,A,E,S,n,i,s)):a.push(E),le(e,!0,t),T=e.input.charCodeAt(e.position),T===44?(r=!0,T=e.input.charCodeAt(++e.position)):r=!1}L(e,"unexpected end of the stream within a flow collection")}function Cg(e,t){var r,n,i=Li,s=!1,o=!1,a=t,l=0,d=!1,c,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)Li===i?i=f===43?ta:dg:L(e,"repeat of a chomping mode identifier");else if((c=yg(f))>=0)c===0?L(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?L(e,"repeat of an indentation width identifier"):(a=t+c-1,o=!0);else break;if(xt(f)){do f=e.input.charCodeAt(++e.position);while(xt(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Ze(f)&&f!==0)}for(;f!==0;){for(Ms(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),Ze(f)){l++;continue}if(e.lineIndent<a){i===ta?e.result+=Dt.repeat(`
`,s?1+l:l):i===Li&&s&&(e.result+=`
`);break}for(n?xt(f)?(d=!0,e.result+=Dt.repeat(`
`,s?1+l:l)):d?(d=!1,e.result+=Dt.repeat(`
`,l+1)):l===0?s&&(e.result+=" "):e.result+=Dt.repeat(`
`,l):e.result+=Dt.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,r=e.position;!Ze(f)&&f!==0;)f=e.input.charCodeAt(++e.position);pt(e,r,e.position,!1)}return!0}function oa(e,t){var r,n=e.tag,i=e.anchor,s=[],o,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,L(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!Fe(o))));){if(a=!0,e.position++,le(e,!0,-1)&&e.lineIndent<=t){s.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,ar(e,t,Wc,!1,!0),s.push(e.result),le(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)L(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function bg(e,t,r){var n,i,s,o,a,l,d=e.tag,c=e.anchor,f={},h=Object.create(null),m=null,w=null,E=null,A=!1,S=!1,T;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),T=e.input.charCodeAt(e.position);T!==0;){if(!A&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,L(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(T===63||T===58)&&Fe(n))T===63?(A&&(Qt(e,f,h,m,w,null,o,a,l),m=w=E=null),S=!0,A=!0,i=!0):A?(A=!1,i=!0):L(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,T=n;else{if(o=e.line,a=e.lineStart,l=e.position,!ar(e,r,Gc,!1,!0))break;if(e.line===s){for(T=e.input.charCodeAt(e.position);xt(T);)T=e.input.charCodeAt(++e.position);if(T===58)T=e.input.charCodeAt(++e.position),Fe(T)||L(e,"a whitespace character is expected after the key-value separator within a block mapping"),A&&(Qt(e,f,h,m,w,null,o,a,l),m=w=E=null),S=!0,A=!1,i=!1,m=e.tag,w=e.result;else if(S)L(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=c,!0}else if(S)L(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=c,!0}if((e.line===s||e.lineIndent>t)&&(A&&(o=e.line,a=e.lineStart,l=e.position),ar(e,t,jn,!0,i)&&(A?w=e.result:E=e.result),A||(Qt(e,f,h,m,w,E,o,a,l),m=w=E=null),le(e,!0,-1),T=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&T!==0)L(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return A&&Qt(e,f,h,m,w,null,o,a,l),S&&(e.tag=d,e.anchor=c,e.kind="mapping",e.result=f),S}function Rg(e){var t,r=!1,n=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&L(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):L(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Fe(o);)o===33&&(n?L(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),Vc.test(i)||L(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),mg.test(s)&&L(e,"tag suffix cannot contain flow indicator characters")}s&&!Yc.test(s)&&L(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{L(e,"tag name is malformed: "+s)}return r?e.tag=s:Et.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:L(e,'undeclared tag handle "'+i+'"'),!0}function Og(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&L(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Fe(r)&&!Jt(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&L(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Pg(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Fe(n)&&!Jt(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&L(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Et.call(e.anchorMap,r)||L(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],le(e,!0,-1),!0}function ar(e,t,r,n,i){var s,o,a,l=1,d=!1,c=!1,f,h,m,w,E,A;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=jn===r||Wc===r,n&&le(e,!0,-1)&&(d=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;Rg(e)||Og(e);)le(e,!0,-1)?(d=!0,a=s,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=d||i),(l===1||jn===r)&&(Bn===r||Gc===r?E=t:E=t+1,A=e.position-e.lineStart,l===1?a&&(oa(e,A)||bg(e,A,E))||Sg(e,E)?c=!0:(o&&Cg(e,E)||Ag(e,E)||Tg(e,E)?c=!0:Pg(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&L(e,"alias node should not have any properties")):_g(e,E,Bn===r)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(c=a&&oa(e,A))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&L(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,h=e.implicitTypes.length;f<h;f+=1)if(w=e.implicitTypes[f],w.resolve(e.result)){e.result=w.construct(e.result),e.tag=w.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Et.call(e.typeMap[e.kind||"fallback"],e.tag))w=e.typeMap[e.kind||"fallback"][e.tag];else for(w=null,m=e.typeMap.multi[e.kind||"fallback"],f=0,h=m.length;f<h;f+=1)if(e.tag.slice(0,m[f].tag.length)===m[f].tag){w=m[f];break}w||L(e,"unknown tag !<"+e.tag+">"),e.result!==null&&w.kind!==e.kind&&L(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+w.kind+'", not "'+e.kind+'"'),w.resolve(e.result,e.tag)?(e.result=w.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):L(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function Ig(e){var t=e.position,r,n,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(le(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!Fe(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&L(e,"directive name must not be less than one character in length");o!==0;){for(;xt(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Ze(o));break}if(Ze(o))break;for(r=e.position;o!==0&&!Fe(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&Ms(e),Et.call(ia,n)?ia[n](e,n,i):Hn(e,'unknown document directive "'+n+'"')}if(le(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,le(e,!0,-1)):s&&L(e,"directives end mark is expected"),ar(e,e.lineIndent-1,jn,!1,!0),le(e,!0,-1),e.checkLineBreaks&&pg.test(e.input.slice(t,e.position))&&Hn(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&ei(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,le(e,!0,-1));return}if(e.position<e.length-1)L(e,"end of the stream or a document separator is expected");else return}function Qc(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new vg(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,L(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Ig(r);return r.documents}function Ng(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=Qc(e,r);if(typeof t!="function")return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])}function Dg(e,t){var r=Qc(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new qc("expected a single document in the stream, but found more")}}Ls.loadAll=Ng;Ls.load=Dg;var Zc={},ti=Ve,Jr=Kr,$g=ks,eu=Object.prototype.toString,tu=Object.prototype.hasOwnProperty,js=65279,Fg=9,xr=10,xg=13,Lg=32,Ug=33,kg=34,ps=35,Mg=37,Bg=38,jg=39,Hg=42,ru=44,qg=45,qn=58,Gg=61,Wg=62,Vg=63,Yg=64,nu=91,iu=93,zg=96,su=123,Xg=124,ou=125,Ae={};Ae[0]="\\0";Ae[7]="\\a";Ae[8]="\\b";Ae[9]="\\t";Ae[10]="\\n";Ae[11]="\\v";Ae[12]="\\f";Ae[13]="\\r";Ae[27]="\\e";Ae[34]='\\"';Ae[92]="\\\\";Ae[133]="\\N";Ae[160]="\\_";Ae[8232]="\\L";Ae[8233]="\\P";var Kg=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Jg=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Qg(e,t){var r,n,i,s,o,a,l;if(t===null)return{};for(r={},n=Object.keys(t),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&tu.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[o]=a;return r}function Zg(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Jr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+ti.repeat("0",n-t.length)+t}var e0=1,Lr=2;function t0(e){this.schema=e.schema||$g,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=ti.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Qg(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Lr:e0,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function aa(e,t){for(var r=ti.repeat(" ",t),n=0,i=-1,s="",o,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=a):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function ms(e,t){return`
`+ti.repeat(" ",e.indent*t)}function r0(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function Gn(e){return e===Lg||e===Fg}function Ur(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==js||65536<=e&&e<=1114111}function la(e){return Ur(e)&&e!==js&&e!==xg&&e!==xr}function ca(e,t,r){var n=la(e),i=n&&!Gn(e);return(r?n:n&&e!==ru&&e!==nu&&e!==iu&&e!==su&&e!==ou)&&e!==ps&&!(t===qn&&!i)||la(t)&&!Gn(t)&&e===ps||t===qn&&i}function n0(e){return Ur(e)&&e!==js&&!Gn(e)&&e!==qg&&e!==Vg&&e!==qn&&e!==ru&&e!==nu&&e!==iu&&e!==su&&e!==ou&&e!==ps&&e!==Bg&&e!==Hg&&e!==Ug&&e!==Xg&&e!==Gg&&e!==Wg&&e!==jg&&e!==kg&&e!==Mg&&e!==Yg&&e!==zg}function i0(e){return!Gn(e)&&e!==qn}function Tr(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function au(e){var t=/^\n* /;return t.test(e)}var lu=1,gs=2,cu=3,uu=4,Xt=5;function s0(e,t,r,n,i,s,o,a){var l,d=0,c=null,f=!1,h=!1,m=n!==-1,w=-1,E=n0(Tr(e,0))&&i0(Tr(e,e.length-1));if(t||o)for(l=0;l<e.length;d>=65536?l+=2:l++){if(d=Tr(e,l),!Ur(d))return Xt;E=E&&ca(d,c,a),c=d}else{for(l=0;l<e.length;d>=65536?l+=2:l++){if(d=Tr(e,l),d===xr)f=!0,m&&(h=h||l-w-1>n&&e[w+1]!==" ",w=l);else if(!Ur(d))return Xt;E=E&&ca(d,c,a),c=d}h=h||m&&l-w-1>n&&e[w+1]!==" "}return!f&&!h?E&&!o&&!i(e)?lu:s===Lr?Xt:gs:r>9&&au(e)?Xt:o?s===Lr?Xt:gs:h?uu:cu}function o0(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===Lr?'""':"''";if(!e.noCompatMode&&(Kg.indexOf(t)!==-1||Jg.test(t)))return e.quotingType===Lr?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=n||e.flowLevel>-1&&r>=e.flowLevel;function l(d){return r0(e,d)}switch(s0(t,a,e.indent,o,l,e.quotingType,e.forceQuotes&&!n,i)){case lu:return t;case gs:return"'"+t.replace(/'/g,"''")+"'";case cu:return"|"+ua(t,e.indent)+fa(aa(t,s));case uu:return">"+ua(t,e.indent)+fa(aa(a0(t,o),s));case Xt:return'"'+l0(t)+'"';default:throw new Jr("impossible error: invalid scalar style")}}()}function ua(e,t){var r=au(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),s=i?"+":n?"":"-";return r+s+`
`}function fa(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function a0(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var d=e.indexOf(`
`);return d=d!==-1?d:e.length,r.lastIndex=d,da(e.slice(0,d),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var a=o[1],l=o[2];s=l[0]===" ",n+=a+(!i&&!s&&l!==""?`
`:"")+da(l,t),i=s}return n}function da(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,l="";n=r.exec(e);)a=n.index,a-i>t&&(s=o>i?o:a,l+=`
`+e.slice(i,s),i=s+1),o=a;return l+=`
`,e.length-i>t&&o>i?l+=e.slice(i,o)+`
`+e.slice(o+1):l+=e.slice(i),l.slice(1)}function l0(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=Tr(e,i),n=Ae[r],!n&&Ur(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||Zg(r);return t}function c0(e,t,r){var n="",i=e.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],e.replacer&&(a=e.replacer.call(r,String(s),a)),(it(e,t,a,!1,!1)||typeof a>"u"&&it(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function ha(e,t,r,n){var i="",s=e.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],e.replacer&&(l=e.replacer.call(r,String(o),l)),(it(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&it(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=ms(e,t)),e.dump&&xr===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function u0(e,t,r){var n="",i=e.tag,s=Object.keys(r),o,a,l,d,c;for(o=0,a=s.length;o<a;o+=1)c="",n!==""&&(c+=", "),e.condenseFlow&&(c+='"'),l=s[o],d=r[l],e.replacer&&(d=e.replacer.call(r,l,d)),it(e,t,l,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),it(e,t,d,!1,!1)&&(c+=e.dump,n+=c));e.tag=i,e.dump="{"+n+"}"}function f0(e,t,r,n){var i="",s=e.tag,o=Object.keys(r),a,l,d,c,f,h;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Jr("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)h="",(!n||i!=="")&&(h+=ms(e,t)),d=o[a],c=r[d],e.replacer&&(c=e.replacer.call(r,d,c)),it(e,t+1,d,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&xr===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,f&&(h+=ms(e,t)),it(e,t+1,c,!0,f)&&(e.dump&&xr===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,i+=h));e.tag=s,e.dump=i||"{}"}function pa(e,t,r){var n,i,s,o,a,l;for(i=r?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,eu.call(a.represent)==="[object Function]")n=a.represent(t,l);else if(tu.call(a.represent,l))n=a.represent[l](t,l);else throw new Jr("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=n}return!0}return!1}function it(e,t,r,n,i,s,o){e.tag=null,e.dump=r,pa(e,r,!1)||pa(e,r,!0);var a=eu.call(e.dump),l=n,d;n&&(n=e.flowLevel<0||e.flowLevel>t);var c=a==="[object Object]"||a==="[object Array]",f,h;if(c&&(f=e.duplicates.indexOf(r),h=f!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&t>0)&&(i=!1),h&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(c&&h&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(f0(e,t,e.dump,i),h&&(e.dump="&ref_"+f+e.dump)):(u0(e,t,e.dump),h&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?ha(e,t-1,e.dump,i):ha(e,t,e.dump,i),h&&(e.dump="&ref_"+f+e.dump)):(c0(e,t,e.dump),h&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&o0(e,e.dump,t,s,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Jr("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(d=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",e.dump=d+" "+e.dump)}return!0}function d0(e,t){var r=[],n=[],i,s;for(Es(e,r,n),i=0,s=n.length;i<s;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(s)}function Es(e,t,r){var n,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)Es(e[i],t,r);else for(n=Object.keys(e),i=0,s=n.length;i<s;i+=1)Es(e[n[i]],t,r)}function h0(e,t){t=t||{};var r=new t0(t);r.noRefs||d0(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),it(r,0,n,!0,!0)?r.dump+`
`:""}Zc.dump=h0;var fu=Ls,p0=Zc;function Hs(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}ye.Type=Ne;ye.Schema=Tc;ye.FAILSAFE_SCHEMA=Rc;ye.JSON_SCHEMA=$c;ye.CORE_SCHEMA=Fc;ye.DEFAULT_SCHEMA=ks;ye.load=fu.load;ye.loadAll=fu.loadAll;ye.dump=p0.dump;ye.YAMLException=Kr;ye.types={binary:Mc,float:Dc,map:bc,null:Oc,pairs:jc,set:Hc,timestamp:Uc,bool:Pc,int:Ic,merge:kc,omap:Bc,seq:Cc,str:Sc};ye.safeLoad=Hs("safeLoad","load");ye.safeLoadAll=Hs("safeLoadAll","loadAll");ye.safeDump=Hs("safeDump","dump");var ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.Lazy=void 0;class m0{constructor(t){this._value=null,this.creator=t}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const t=this.creator();return this.value=t,t}set value(t){this._value=t,this.creator=null}}ri.Lazy=m0;var ys={exports:{}};const g0="2.0.0",du=256,E0=Number.MAX_SAFE_INTEGER||9007199254740991,y0=16,w0=du-6,v0=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ni={MAX_LENGTH:du,MAX_SAFE_COMPONENT_LENGTH:y0,MAX_SAFE_BUILD_LENGTH:w0,MAX_SAFE_INTEGER:E0,RELEASE_TYPES:v0,SEMVER_SPEC_VERSION:g0,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const _0=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var ii=_0;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=ni,s=ii;t=e.exports={};const o=t.re=[],a=t.safeRe=[],l=t.src=[],d=t.safeSrc=[],c=t.t={};let f=0;const h="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",i],[h,n]],w=A=>{for(const[S,T]of m)A=A.split(`${S}*`).join(`${S}{0,${T}}`).split(`${S}+`).join(`${S}{1,${T}}`);return A},E=(A,S,T)=>{const P=w(S),$=f++;s(A,$,S),c[A]=$,l[$]=S,d[$]=P,o[$]=new RegExp(S,T?"g":void 0),a[$]=new RegExp(P,T?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),E("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${h}+`),E("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),E("FULL",`^${l[c.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),E("LOOSE",`^${l[c.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),E("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),E("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",l[c.COERCE],!0),E("COERCERTLFULL",l[c.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",E("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",E("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ys,ys.exports);var Qr=ys.exports;const A0=Object.freeze({loose:!0}),T0=Object.freeze({}),S0=e=>e?typeof e!="object"?A0:e:T0;var qs=S0;const ma=/^[0-9]+$/,hu=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;const r=ma.test(e),n=ma.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},C0=(e,t)=>hu(t,e);var pu={compareIdentifiers:hu,rcompareIdentifiers:C0};const vn=ii,{MAX_LENGTH:ga,MAX_SAFE_INTEGER:_n}=ni,{safeRe:An,t:Tn}=Qr,b0=qs,{compareIdentifiers:Ui}=pu;let R0=class Qe{constructor(t,r){if(r=b0(r),t instanceof Qe){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>ga)throw new TypeError(`version is longer than ${ga} characters`);vn("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?An[Tn.LOOSE]:An[Tn.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>_n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_n||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<_n)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(vn("SemVer.compare",this.version,this.options,t),!(t instanceof Qe)){if(typeof t=="string"&&t===this.version)return 0;t=new Qe(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Qe||(t=new Qe(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof Qe||(t=new Qe(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(vn("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Ui(n,i)}while(++r)}compareBuild(t){t instanceof Qe||(t=new Qe(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(vn("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Ui(n,i)}while(++r)}inc(t,r,n){if(t.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){const i=`-${r}`.match(this.options.loose?An[Tn.PRERELEASELOOSE]:An[Tn.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),Ui(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var De=R0;const Ea=De,O0=(e,t,r=!1)=>{if(e instanceof Ea)return e;try{return new Ea(e,t)}catch(n){if(!r)return null;throw n}};var ur=O0;const P0=ur,I0=(e,t)=>{const r=P0(e,t);return r?r.version:null};var N0=I0;const D0=ur,$0=(e,t)=>{const r=D0(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var F0=$0;const ya=De,x0=(e,t,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new ya(e instanceof ya?e.version:e,r).inc(t,n,i).version}catch{return null}};var L0=x0;const wa=ur,U0=(e,t)=>{const r=wa(e,null,!0),n=wa(t,null,!0),i=r.compare(n);if(i===0)return null;const s=i>0,o=s?r:n,a=s?n:r,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}const c=l?"pre":"";return r.major!==n.major?c+"major":r.minor!==n.minor?c+"minor":r.patch!==n.patch?c+"patch":"prerelease"};var k0=U0;const M0=De,B0=(e,t)=>new M0(e,t).major;var j0=B0;const H0=De,q0=(e,t)=>new H0(e,t).minor;var G0=q0;const W0=De,V0=(e,t)=>new W0(e,t).patch;var Y0=V0;const z0=ur,X0=(e,t)=>{const r=z0(e,t);return r&&r.prerelease.length?r.prerelease:null};var K0=X0;const va=De,J0=(e,t,r)=>new va(e,r).compare(new va(t,r));var Ye=J0;const Q0=Ye,Z0=(e,t,r)=>Q0(t,e,r);var eE=Z0;const tE=Ye,rE=(e,t)=>tE(e,t,!0);var nE=rE;const _a=De,iE=(e,t,r)=>{const n=new _a(e,r),i=new _a(t,r);return n.compare(i)||n.compareBuild(i)};var Gs=iE;const sE=Gs,oE=(e,t)=>e.sort((r,n)=>sE(r,n,t));var aE=oE;const lE=Gs,cE=(e,t)=>e.sort((r,n)=>lE(n,r,t));var uE=cE;const fE=Ye,dE=(e,t,r)=>fE(e,t,r)>0;var si=dE;const hE=Ye,pE=(e,t,r)=>hE(e,t,r)<0;var Ws=pE;const mE=Ye,gE=(e,t,r)=>mE(e,t,r)===0;var mu=gE;const EE=Ye,yE=(e,t,r)=>EE(e,t,r)!==0;var gu=yE;const wE=Ye,vE=(e,t,r)=>wE(e,t,r)>=0;var Vs=vE;const _E=Ye,AE=(e,t,r)=>_E(e,t,r)<=0;var Ys=AE;const TE=mu,SE=gu,CE=si,bE=Vs,RE=Ws,OE=Ys,PE=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return TE(e,r,n);case"!=":return SE(e,r,n);case">":return CE(e,r,n);case">=":return bE(e,r,n);case"<":return RE(e,r,n);case"<=":return OE(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var Eu=PE;const IE=De,NE=ur,{safeRe:Sn,t:Cn}=Qr,DE=(e,t)=>{if(e instanceof IE)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Sn[Cn.COERCEFULL]:Sn[Cn.COERCE]);else{const l=t.includePrerelease?Sn[Cn.COERCERTLFULL]:Sn[Cn.COERCERTL];let d;for(;(d=l.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||d.index+d[0].length!==r.index+r[0].length)&&(r=d),l.lastIndex=d.index+d[1].length+d[2].length;l.lastIndex=-1}if(r===null)return null;const n=r[2],i=r[3]||"0",s=r[4]||"0",o=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return NE(`${n}.${i}.${s}${o}${a}`,t)};var $E=DE;class FE{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,r)}return this}}var xE=FE,ki,Aa;function ze(){if(Aa)return ki;Aa=1;const e=/\s+/g;class t{constructor(R,D){if(D=i(D),R instanceof t)return R.loose===!!D.loose&&R.includePrerelease===!!D.includePrerelease?R:new t(R.raw,D);if(R instanceof s)return this.raw=R.value,this.set=[[R]],this.formatted=void 0,this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=R.trim().replace(e," "),this.set=this.raw.split("||").map(b=>this.parseRange(b.trim())).filter(b=>b.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const b=this.set[0];if(this.set=this.set.filter(F=>!E(F[0])),this.set.length===0)this.set=[b];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&A(F[0])){this.set=[F];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let R=0;R<this.set.length;R++){R>0&&(this.formatted+="||");const D=this.set[R];for(let b=0;b<D.length;b++)b>0&&(this.formatted+=" "),this.formatted+=D[b].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(R){const b=((this.options.includePrerelease&&m)|(this.options.loose&&w))+":"+R,F=n.get(b);if(F)return F;const N=this.options.loose,k=N?l[d.HYPHENRANGELOOSE]:l[d.HYPHENRANGE];R=R.replace(k,M(this.options.includePrerelease)),o("hyphen replace",R),R=R.replace(l[d.COMPARATORTRIM],c),o("comparator trim",R),R=R.replace(l[d.TILDETRIM],f),o("tilde trim",R),R=R.replace(l[d.CARETTRIM],h),o("caret trim",R);let Y=R.split(" ").map(U=>T(U,this.options)).join(" ").split(/\s+/).map(U=>H(U,this.options));N&&(Y=Y.filter(U=>(o("loose invalid filter",U,this.options),!!U.match(l[d.COMPARATORLOOSE])))),o("range list",Y);const q=new Map,Q=Y.map(U=>new s(U,this.options));for(const U of Q){if(E(U))return[U];q.set(U.value,U)}q.size>1&&q.has("")&&q.delete("");const de=[...q.values()];return n.set(b,de),de}intersects(R,D){if(!(R instanceof t))throw new TypeError("a Range is required");return this.set.some(b=>S(b,D)&&R.set.some(F=>S(F,D)&&b.every(N=>F.every(k=>N.intersects(k,D)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new a(R,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(J(this.set[D],R,this.options))return!0;return!1}}ki=t;const r=xE,n=new r,i=qs,s=oi(),o=ii,a=De,{safeRe:l,t:d,comparatorTrimReplace:c,tildeTrimReplace:f,caretTrimReplace:h}=Qr,{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:w}=ni,E=I=>I.value==="<0.0.0-0",A=I=>I.value==="",S=(I,R)=>{let D=!0;const b=I.slice();let F=b.pop();for(;D&&b.length;)D=b.every(N=>F.intersects(N,R)),F=b.pop();return D},T=(I,R)=>(I=I.replace(l[d.BUILD],""),o("comp",I,R),I=ee(I,R),o("caret",I),I=$(I,R),o("tildes",I),I=xe(I,R),o("xrange",I),I=W(I,R),o("stars",I),I),P=I=>!I||I.toLowerCase()==="x"||I==="*",$=(I,R)=>I.trim().split(/\s+/).map(D=>K(D,R)).join(" "),K=(I,R)=>{const D=R.loose?l[d.TILDELOOSE]:l[d.TILDE];return I.replace(D,(b,F,N,k,Y)=>{o("tilde",I,b,F,N,k,Y);let q;return P(F)?q="":P(N)?q=`>=${F}.0.0 <${+F+1}.0.0-0`:P(k)?q=`>=${F}.${N}.0 <${F}.${+N+1}.0-0`:Y?(o("replaceTilde pr",Y),q=`>=${F}.${N}.${k}-${Y} <${F}.${+N+1}.0-0`):q=`>=${F}.${N}.${k} <${F}.${+N+1}.0-0`,o("tilde return",q),q})},ee=(I,R)=>I.trim().split(/\s+/).map(D=>j(D,R)).join(" "),j=(I,R)=>{o("caret",I,R);const D=R.loose?l[d.CARETLOOSE]:l[d.CARET],b=R.includePrerelease?"-0":"";return I.replace(D,(F,N,k,Y,q)=>{o("caret",I,F,N,k,Y,q);let Q;return P(N)?Q="":P(k)?Q=`>=${N}.0.0${b} <${+N+1}.0.0-0`:P(Y)?N==="0"?Q=`>=${N}.${k}.0${b} <${N}.${+k+1}.0-0`:Q=`>=${N}.${k}.0${b} <${+N+1}.0.0-0`:q?(o("replaceCaret pr",q),N==="0"?k==="0"?Q=`>=${N}.${k}.${Y}-${q} <${N}.${k}.${+Y+1}-0`:Q=`>=${N}.${k}.${Y}-${q} <${N}.${+k+1}.0-0`:Q=`>=${N}.${k}.${Y}-${q} <${+N+1}.0.0-0`):(o("no pr"),N==="0"?k==="0"?Q=`>=${N}.${k}.${Y}${b} <${N}.${k}.${+Y+1}-0`:Q=`>=${N}.${k}.${Y}${b} <${N}.${+k+1}.0-0`:Q=`>=${N}.${k}.${Y} <${+N+1}.0.0-0`),o("caret return",Q),Q})},xe=(I,R)=>(o("replaceXRanges",I,R),I.split(/\s+/).map(D=>y(D,R)).join(" ")),y=(I,R)=>{I=I.trim();const D=R.loose?l[d.XRANGELOOSE]:l[d.XRANGE];return I.replace(D,(b,F,N,k,Y,q)=>{o("xRange",I,b,F,N,k,Y,q);const Q=P(N),de=Q||P(k),U=de||P(Y),Ke=U;return F==="="&&Ke&&(F=""),q=R.includePrerelease?"-0":"",Q?F===">"||F==="<"?b="<0.0.0-0":b="*":F&&Ke?(de&&(k=0),Y=0,F===">"?(F=">=",de?(N=+N+1,k=0,Y=0):(k=+k+1,Y=0)):F==="<="&&(F="<",de?N=+N+1:k=+k+1),F==="<"&&(q="-0"),b=`${F+N}.${k}.${Y}${q}`):de?b=`>=${N}.0.0${q} <${+N+1}.0.0-0`:U&&(b=`>=${N}.${k}.0${q} <${N}.${+k+1}.0-0`),o("xRange return",b),b})},W=(I,R)=>(o("replaceStars",I,R),I.trim().replace(l[d.STAR],"")),H=(I,R)=>(o("replaceGTE0",I,R),I.trim().replace(l[R.includePrerelease?d.GTE0PRE:d.GTE0],"")),M=I=>(R,D,b,F,N,k,Y,q,Q,de,U,Ke)=>(P(b)?D="":P(F)?D=`>=${b}.0.0${I?"-0":""}`:P(N)?D=`>=${b}.${F}.0${I?"-0":""}`:k?D=`>=${D}`:D=`>=${D}${I?"-0":""}`,P(Q)?q="":P(de)?q=`<${+Q+1}.0.0-0`:P(U)?q=`<${Q}.${+de+1}.0-0`:Ke?q=`<=${Q}.${de}.${U}-${Ke}`:I?q=`<${Q}.${de}.${+U+1}-0`:q=`<=${q}`,`${D} ${q}`.trim()),J=(I,R,D)=>{for(let b=0;b<I.length;b++)if(!I[b].test(R))return!1;if(R.prerelease.length&&!D.includePrerelease){for(let b=0;b<I.length;b++)if(o(I[b].semver),I[b].semver!==s.ANY&&I[b].semver.prerelease.length>0){const F=I[b].semver;if(F.major===R.major&&F.minor===R.minor&&F.patch===R.patch)return!0}return!1}return!0};return ki}var Mi,Ta;function oi(){if(Ta)return Mi;Ta=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=r(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],h=c.match(f);if(!h)throw new TypeError(`Invalid comparator: ${c}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new a(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=r(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Mi=t;const r=qs,{safeRe:n,t:i}=Qr,s=Eu,o=ii,a=De,l=ze();return Mi}const LE=ze(),UE=(e,t,r)=>{try{t=new LE(t,r)}catch{return!1}return t.test(e)};var ai=UE;const kE=ze(),ME=(e,t)=>new kE(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var BE=ME;const jE=De,HE=ze(),qE=(e,t,r)=>{let n=null,i=null,s=null;try{s=new HE(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new jE(n,r))}),n};var GE=qE;const WE=De,VE=ze(),YE=(e,t,r)=>{let n=null,i=null,s=null;try{s=new VE(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new WE(n,r))}),n};var zE=YE;const Bi=De,XE=ze(),Sa=si,KE=(e,t)=>{e=new XE(e,t);let r=new Bi("0.0.0");if(e.test(r)||(r=new Bi("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const i=e.set[n];let s=null;i.forEach(o=>{const a=new Bi(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||Sa(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||Sa(r,s))&&(r=s)}return r&&e.test(r)?r:null};var JE=KE;const QE=ze(),ZE=(e,t)=>{try{return new QE(e,t).range||"*"}catch{return null}};var ey=ZE;const ty=De,yu=oi(),{ANY:ry}=yu,ny=ze(),iy=ai,Ca=si,ba=Ws,sy=Ys,oy=Vs,ay=(e,t,r,n)=>{e=new ty(e,n),t=new ny(t,n);let i,s,o,a,l;switch(r){case">":i=Ca,s=sy,o=ba,a=">",l=">=";break;case"<":i=ba,s=oy,o=Ca,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(iy(e,t,n))return!1;for(let d=0;d<t.set.length;++d){const c=t.set[d];let f=null,h=null;if(c.forEach(m=>{m.semver===ry&&(m=new yu(">=0.0.0")),f=f||m,h=h||m,i(m.semver,f.semver,n)?f=m:o(m.semver,h.semver,n)&&(h=m)}),f.operator===a||f.operator===l||(!h.operator||h.operator===a)&&s(e,h.semver))return!1;if(h.operator===l&&o(e,h.semver))return!1}return!0};var zs=ay;const ly=zs,cy=(e,t,r)=>ly(e,t,">",r);var uy=cy;const fy=zs,dy=(e,t,r)=>fy(e,t,"<",r);var hy=dy;const Ra=ze(),py=(e,t,r)=>(e=new Ra(e,r),t=new Ra(t,r),e.intersects(t,r));var my=py;const gy=ai,Ey=Ye;var yy=(e,t,r)=>{const n=[];let i=null,s=null;const o=e.sort((c,f)=>Ey(c,f,r));for(const c of o)gy(c,t,r)?(s=c,i||(i=c)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);const a=[];for(const[c,f]of n)c===f?a.push(c):!f&&c===o[0]?a.push("*"):f?c===o[0]?a.push(`<=${f}`):a.push(`${c} - ${f}`):a.push(`>=${c}`);const l=a.join(" || "),d=typeof t.raw=="string"?t.raw:String(t);return l.length<d.length?l:t};const Oa=ze(),Xs=oi(),{ANY:ji}=Xs,wr=ai,Ks=Ye,wy=(e,t,r={})=>{if(e===t)return!0;e=new Oa(e,r),t=new Oa(t,r);let n=!1;e:for(const i of e.set){for(const s of t.set){const o=_y(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},vy=[new Xs(">=0.0.0-0")],Pa=[new Xs(">=0.0.0")],_y=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===ji){if(t.length===1&&t[0].semver===ji)return!0;r.includePrerelease?e=vy:e=Pa}if(t.length===1&&t[0].semver===ji){if(r.includePrerelease)return!0;t=Pa}const n=new Set;let i,s;for(const m of e)m.operator===">"||m.operator===">="?i=Ia(i,m,r):m.operator==="<"||m.operator==="<="?s=Na(s,m,r):n.add(m.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Ks(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const m of n){if(i&&!wr(m,String(i),r)||s&&!wr(m,String(s),r))return null;for(const w of t)if(!wr(m,String(w),r))return!1;return!0}let a,l,d,c,f=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const m of t){if(c=c||m.operator===">"||m.operator===">=",d=d||m.operator==="<"||m.operator==="<=",i){if(h&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===h.major&&m.semver.minor===h.minor&&m.semver.patch===h.patch&&(h=!1),m.operator===">"||m.operator===">="){if(a=Ia(i,m,r),a===m&&a!==i)return!1}else if(i.operator===">="&&!wr(i.semver,String(m),r))return!1}if(s){if(f&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===f.major&&m.semver.minor===f.minor&&m.semver.patch===f.patch&&(f=!1),m.operator==="<"||m.operator==="<="){if(l=Na(s,m,r),l===m&&l!==s)return!1}else if(s.operator==="<="&&!wr(s.semver,String(m),r))return!1}if(!m.operator&&(s||i)&&o!==0)return!1}return!(i&&d&&!s&&o!==0||s&&c&&!i&&o!==0||h||f)},Ia=(e,t,r)=>{if(!e)return t;const n=Ks(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Na=(e,t,r)=>{if(!e)return t;const n=Ks(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var Ay=wy;const Hi=Qr,Da=ni,Ty=De,$a=pu,Sy=ur,Cy=N0,by=F0,Ry=L0,Oy=k0,Py=j0,Iy=G0,Ny=Y0,Dy=K0,$y=Ye,Fy=eE,xy=nE,Ly=Gs,Uy=aE,ky=uE,My=si,By=Ws,jy=mu,Hy=gu,qy=Vs,Gy=Ys,Wy=Eu,Vy=$E,Yy=oi(),zy=ze(),Xy=ai,Ky=BE,Jy=GE,Qy=zE,Zy=JE,ew=ey,tw=zs,rw=uy,nw=hy,iw=my,sw=yy,ow=Ay;var wu={parse:Sy,valid:Cy,clean:by,inc:Ry,diff:Oy,major:Py,minor:Iy,patch:Ny,prerelease:Dy,compare:$y,rcompare:Fy,compareLoose:xy,compareBuild:Ly,sort:Uy,rsort:ky,gt:My,lt:By,eq:jy,neq:Hy,gte:qy,lte:Gy,cmp:Wy,coerce:Vy,Comparator:Yy,Range:zy,satisfies:Xy,toComparators:Ky,maxSatisfying:Jy,minSatisfying:Qy,minVersion:Zy,validRange:ew,outside:tw,gtr:rw,ltr:nw,intersects:iw,simplifyRange:sw,subset:ow,SemVer:Ty,re:Hi.re,src:Hi.src,tokens:Hi.t,SEMVER_SPEC_VERSION:Da.SEMVER_SPEC_VERSION,RELEASE_TYPES:Da.RELEASE_TYPES,compareIdentifiers:$a.compareIdentifiers,rcompareIdentifiers:$a.rcompareIdentifiers},Zr={},Wn={exports:{}};Wn.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",d="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",h="[object Error]",m="[object Function]",w="[object GeneratorFunction]",E="[object Map]",A="[object Number]",S="[object Null]",T="[object Object]",P="[object Promise]",$="[object Proxy]",K="[object RegExp]",ee="[object Set]",j="[object String]",xe="[object Symbol]",y="[object Undefined]",W="[object WeakMap]",H="[object ArrayBuffer]",M="[object DataView]",J="[object Float32Array]",I="[object Float64Array]",R="[object Int8Array]",D="[object Int16Array]",b="[object Int32Array]",F="[object Uint8Array]",N="[object Uint8ClampedArray]",k="[object Uint16Array]",Y="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,Q=/^\[object .+?Constructor\]$/,de=/^(?:0|[1-9]\d*)$/,U={};U[J]=U[I]=U[R]=U[D]=U[b]=U[F]=U[N]=U[k]=U[Y]=!0,U[a]=U[l]=U[H]=U[c]=U[M]=U[f]=U[h]=U[m]=U[E]=U[A]=U[T]=U[K]=U[ee]=U[j]=U[W]=!1;var Ke=typeof be=="object"&&be&&be.Object===Object&&be,p=typeof self=="object"&&self&&self.Object===Object&&self,u=Ke||p||Function("return this")(),C=t&&!t.nodeType&&t,_=C&&!0&&e&&!e.nodeType&&e,X=_&&_.exports===C,te=X&&Ke.process,oe=function(){try{return te&&te.binding&&te.binding("util")}catch{}}(),me=oe&&oe.isTypedArray;function we(g,v){for(var O=-1,x=g==null?0:g.length,re=0,G=[];++O<x;){var ae=g[O];v(ae,O,g)&&(G[re++]=ae)}return G}function st(g,v){for(var O=-1,x=v.length,re=g.length;++O<x;)g[re+O]=v[O];return g}function ue(g,v){for(var O=-1,x=g==null?0:g.length;++O<x;)if(v(g[O],O,g))return!0;return!1}function je(g,v){for(var O=-1,x=Array(g);++O<g;)x[O]=v(O);return x}function Ei(g){return function(v){return g(v)}}function nn(g,v){return g.has(v)}function hr(g,v){return g==null?void 0:g[v]}function sn(g){var v=-1,O=Array(g.size);return g.forEach(function(x,re){O[++v]=[re,x]}),O}function Lu(g,v){return function(O){return g(v(O))}}function Uu(g){var v=-1,O=Array(g.size);return g.forEach(function(x){O[++v]=x}),O}var ku=Array.prototype,Mu=Function.prototype,on=Object.prototype,yi=u["__core-js_shared__"],no=Mu.toString,Je=on.hasOwnProperty,io=function(){var g=/[^.]+$/.exec(yi&&yi.keys&&yi.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),so=on.toString,Bu=RegExp("^"+no.call(Je).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oo=X?u.Buffer:void 0,an=u.Symbol,ao=u.Uint8Array,lo=on.propertyIsEnumerable,ju=ku.splice,St=an?an.toStringTag:void 0,co=Object.getOwnPropertySymbols,Hu=oo?oo.isBuffer:void 0,qu=Lu(Object.keys,Object),wi=Ht(u,"DataView"),pr=Ht(u,"Map"),vi=Ht(u,"Promise"),_i=Ht(u,"Set"),Ai=Ht(u,"WeakMap"),mr=Ht(Object,"create"),Gu=Rt(wi),Wu=Rt(pr),Vu=Rt(vi),Yu=Rt(_i),zu=Rt(Ai),uo=an?an.prototype:void 0,Ti=uo?uo.valueOf:void 0;function Ct(g){var v=-1,O=g==null?0:g.length;for(this.clear();++v<O;){var x=g[v];this.set(x[0],x[1])}}function Xu(){this.__data__=mr?mr(null):{},this.size=0}function Ku(g){var v=this.has(g)&&delete this.__data__[g];return this.size-=v?1:0,v}function Ju(g){var v=this.__data__;if(mr){var O=v[g];return O===n?void 0:O}return Je.call(v,g)?v[g]:void 0}function Qu(g){var v=this.__data__;return mr?v[g]!==void 0:Je.call(v,g)}function Zu(g,v){var O=this.__data__;return this.size+=this.has(g)?0:1,O[g]=mr&&v===void 0?n:v,this}Ct.prototype.clear=Xu,Ct.prototype.delete=Ku,Ct.prototype.get=Ju,Ct.prototype.has=Qu,Ct.prototype.set=Zu;function tt(g){var v=-1,O=g==null?0:g.length;for(this.clear();++v<O;){var x=g[v];this.set(x[0],x[1])}}function ef(){this.__data__=[],this.size=0}function tf(g){var v=this.__data__,O=cn(v,g);if(O<0)return!1;var x=v.length-1;return O==x?v.pop():ju.call(v,O,1),--this.size,!0}function rf(g){var v=this.__data__,O=cn(v,g);return O<0?void 0:v[O][1]}function nf(g){return cn(this.__data__,g)>-1}function sf(g,v){var O=this.__data__,x=cn(O,g);return x<0?(++this.size,O.push([g,v])):O[x][1]=v,this}tt.prototype.clear=ef,tt.prototype.delete=tf,tt.prototype.get=rf,tt.prototype.has=nf,tt.prototype.set=sf;function bt(g){var v=-1,O=g==null?0:g.length;for(this.clear();++v<O;){var x=g[v];this.set(x[0],x[1])}}function of(){this.size=0,this.__data__={hash:new Ct,map:new(pr||tt),string:new Ct}}function af(g){var v=un(this,g).delete(g);return this.size-=v?1:0,v}function lf(g){return un(this,g).get(g)}function cf(g){return un(this,g).has(g)}function uf(g,v){var O=un(this,g),x=O.size;return O.set(g,v),this.size+=O.size==x?0:1,this}bt.prototype.clear=of,bt.prototype.delete=af,bt.prototype.get=lf,bt.prototype.has=cf,bt.prototype.set=uf;function ln(g){var v=-1,O=g==null?0:g.length;for(this.__data__=new bt;++v<O;)this.add(g[v])}function ff(g){return this.__data__.set(g,n),this}function df(g){return this.__data__.has(g)}ln.prototype.add=ln.prototype.push=ff,ln.prototype.has=df;function ot(g){var v=this.__data__=new tt(g);this.size=v.size}function hf(){this.__data__=new tt,this.size=0}function pf(g){var v=this.__data__,O=v.delete(g);return this.size=v.size,O}function mf(g){return this.__data__.get(g)}function gf(g){return this.__data__.has(g)}function Ef(g,v){var O=this.__data__;if(O instanceof tt){var x=O.__data__;if(!pr||x.length<r-1)return x.push([g,v]),this.size=++O.size,this;O=this.__data__=new bt(x)}return O.set(g,v),this.size=O.size,this}ot.prototype.clear=hf,ot.prototype.delete=pf,ot.prototype.get=mf,ot.prototype.has=gf,ot.prototype.set=Ef;function yf(g,v){var O=fn(g),x=!O&&$f(g),re=!O&&!x&&Si(g),G=!O&&!x&&!re&&vo(g),ae=O||x||re||G,he=ae?je(g.length,String):[],ge=he.length;for(var ne in g)Je.call(g,ne)&&!(ae&&(ne=="length"||re&&(ne=="offset"||ne=="parent")||G&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||Of(ne,ge)))&&he.push(ne);return he}function cn(g,v){for(var O=g.length;O--;)if(go(g[O][0],v))return O;return-1}function wf(g,v,O){var x=v(g);return fn(g)?x:st(x,O(g))}function gr(g){return g==null?g===void 0?y:S:St&&St in Object(g)?bf(g):Df(g)}function fo(g){return Er(g)&&gr(g)==a}function ho(g,v,O,x,re){return g===v?!0:g==null||v==null||!Er(g)&&!Er(v)?g!==g&&v!==v:vf(g,v,O,x,ho,re)}function vf(g,v,O,x,re,G){var ae=fn(g),he=fn(v),ge=ae?l:at(g),ne=he?l:at(v);ge=ge==a?T:ge,ne=ne==a?T:ne;var Le=ge==T,He=ne==T,ve=ge==ne;if(ve&&Si(g)){if(!Si(v))return!1;ae=!0,Le=!1}if(ve&&!Le)return G||(G=new ot),ae||vo(g)?po(g,v,O,x,re,G):Sf(g,v,ge,O,x,re,G);if(!(O&i)){var ke=Le&&Je.call(g,"__wrapped__"),Me=He&&Je.call(v,"__wrapped__");if(ke||Me){var lt=ke?g.value():g,rt=Me?v.value():v;return G||(G=new ot),re(lt,rt,O,x,G)}}return ve?(G||(G=new ot),Cf(g,v,O,x,re,G)):!1}function _f(g){if(!wo(g)||If(g))return!1;var v=Eo(g)?Bu:Q;return v.test(Rt(g))}function Af(g){return Er(g)&&yo(g.length)&&!!U[gr(g)]}function Tf(g){if(!Nf(g))return qu(g);var v=[];for(var O in Object(g))Je.call(g,O)&&O!="constructor"&&v.push(O);return v}function po(g,v,O,x,re,G){var ae=O&i,he=g.length,ge=v.length;if(he!=ge&&!(ae&&ge>he))return!1;var ne=G.get(g);if(ne&&G.get(v))return ne==v;var Le=-1,He=!0,ve=O&s?new ln:void 0;for(G.set(g,v),G.set(v,g);++Le<he;){var ke=g[Le],Me=v[Le];if(x)var lt=ae?x(Me,ke,Le,v,g,G):x(ke,Me,Le,g,v,G);if(lt!==void 0){if(lt)continue;He=!1;break}if(ve){if(!ue(v,function(rt,Ot){if(!nn(ve,Ot)&&(ke===rt||re(ke,rt,O,x,G)))return ve.push(Ot)})){He=!1;break}}else if(!(ke===Me||re(ke,Me,O,x,G))){He=!1;break}}return G.delete(g),G.delete(v),He}function Sf(g,v,O,x,re,G,ae){switch(O){case M:if(g.byteLength!=v.byteLength||g.byteOffset!=v.byteOffset)return!1;g=g.buffer,v=v.buffer;case H:return!(g.byteLength!=v.byteLength||!G(new ao(g),new ao(v)));case c:case f:case A:return go(+g,+v);case h:return g.name==v.name&&g.message==v.message;case K:case j:return g==v+"";case E:var he=sn;case ee:var ge=x&i;if(he||(he=Uu),g.size!=v.size&&!ge)return!1;var ne=ae.get(g);if(ne)return ne==v;x|=s,ae.set(g,v);var Le=po(he(g),he(v),x,re,G,ae);return ae.delete(g),Le;case xe:if(Ti)return Ti.call(g)==Ti.call(v)}return!1}function Cf(g,v,O,x,re,G){var ae=O&i,he=mo(g),ge=he.length,ne=mo(v),Le=ne.length;if(ge!=Le&&!ae)return!1;for(var He=ge;He--;){var ve=he[He];if(!(ae?ve in v:Je.call(v,ve)))return!1}var ke=G.get(g);if(ke&&G.get(v))return ke==v;var Me=!0;G.set(g,v),G.set(v,g);for(var lt=ae;++He<ge;){ve=he[He];var rt=g[ve],Ot=v[ve];if(x)var _o=ae?x(Ot,rt,ve,v,g,G):x(rt,Ot,ve,g,v,G);if(!(_o===void 0?rt===Ot||re(rt,Ot,O,x,G):_o)){Me=!1;break}lt||(lt=ve=="constructor")}if(Me&&!lt){var dn=g.constructor,hn=v.constructor;dn!=hn&&"constructor"in g&&"constructor"in v&&!(typeof dn=="function"&&dn instanceof dn&&typeof hn=="function"&&hn instanceof hn)&&(Me=!1)}return G.delete(g),G.delete(v),Me}function mo(g){return wf(g,Lf,Rf)}function un(g,v){var O=g.__data__;return Pf(v)?O[typeof v=="string"?"string":"hash"]:O.map}function Ht(g,v){var O=hr(g,v);return _f(O)?O:void 0}function bf(g){var v=Je.call(g,St),O=g[St];try{g[St]=void 0;var x=!0}catch{}var re=so.call(g);return x&&(v?g[St]=O:delete g[St]),re}var Rf=co?function(g){return g==null?[]:(g=Object(g),we(co(g),function(v){return lo.call(g,v)}))}:Uf,at=gr;(wi&&at(new wi(new ArrayBuffer(1)))!=M||pr&&at(new pr)!=E||vi&&at(vi.resolve())!=P||_i&&at(new _i)!=ee||Ai&&at(new Ai)!=W)&&(at=function(g){var v=gr(g),O=v==T?g.constructor:void 0,x=O?Rt(O):"";if(x)switch(x){case Gu:return M;case Wu:return E;case Vu:return P;case Yu:return ee;case zu:return W}return v});function Of(g,v){return v=v??o,!!v&&(typeof g=="number"||de.test(g))&&g>-1&&g%1==0&&g<v}function Pf(g){var v=typeof g;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?g!=="__proto__":g===null}function If(g){return!!io&&io in g}function Nf(g){var v=g&&g.constructor,O=typeof v=="function"&&v.prototype||on;return g===O}function Df(g){return so.call(g)}function Rt(g){if(g!=null){try{return no.call(g)}catch{}try{return g+""}catch{}}return""}function go(g,v){return g===v||g!==g&&v!==v}var $f=fo(function(){return arguments}())?fo:function(g){return Er(g)&&Je.call(g,"callee")&&!lo.call(g,"callee")},fn=Array.isArray;function Ff(g){return g!=null&&yo(g.length)&&!Eo(g)}var Si=Hu||kf;function xf(g,v){return ho(g,v)}function Eo(g){if(!wo(g))return!1;var v=gr(g);return v==m||v==w||v==d||v==$}function yo(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=o}function wo(g){var v=typeof g;return g!=null&&(v=="object"||v=="function")}function Er(g){return g!=null&&typeof g=="object"}var vo=me?Ei(me):Af;function Lf(g){return Ff(g)?yf(g):Tf(g)}function Uf(){return[]}function kf(){return!1}e.exports=xf})(Wn,Wn.exports);var aw=Wn.exports;Object.defineProperty(Zr,"__esModule",{value:!0});Zr.DownloadedUpdateHelper=void 0;Zr.createTempUpdateFile=dw;const lw=Wr,cw=vt,Fa=aw,It=At,Rr=se;class uw{constructor(t){this.cacheDir=t,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return Rr.join(this.cacheDir,"pending")}async validateDownloadedPath(t,r,n,i){if(this.versionInfo!=null&&this.file===t&&this.fileInfo!=null)return Fa(this.versionInfo,r)&&Fa(this.fileInfo.info,n.info)&&await(0,It.pathExists)(t)?t:null;const s=await this.getValidCachedUpdateFile(n,i);return s===null?null:(i.info(`Update has already been downloaded to ${t}).`),this._file=s,s)}async setDownloadedFile(t,r,n,i,s,o){this._file=t,this._packageFile=r,this.versionInfo=n,this.fileInfo=i,this._downloadedFileInfo={fileName:s,sha512:i.info.sha512,isAdminRightsRequired:i.info.isAdminRightsRequired===!0},o&&await(0,It.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,It.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(t,r){const n=this.getUpdateInfoFile();if(!await(0,It.pathExists)(n))return null;let s;try{s=await(0,It.readJson)(n)}catch(d){let c="No cached update info available";return d.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),c+=` (error on read: ${d.message})`),r.info(c),null}if(!((s==null?void 0:s.fileName)!==null))return r.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(t.info.sha512!==s.sha512)return r.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${s.sha512}, expected: ${t.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const a=Rr.join(this.cacheDirForPendingUpdate,s.fileName);if(!await(0,It.pathExists)(a))return r.info("Cached update file doesn't exist"),null;const l=await fw(a);return t.info.sha512!==l?(r.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${l}, expected: ${t.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=s,a)}getUpdateInfoFile(){return Rr.join(this.cacheDirForPendingUpdate,"update-info.json")}}Zr.DownloadedUpdateHelper=uw;function fw(e,t="sha512",r="base64",n){return new Promise((i,s)=>{const o=(0,lw.createHash)(t);o.on("error",s).setEncoding(r),(0,cw.createReadStream)(e,{...n,highWaterMark:1024*1024}).on("error",s).on("end",()=>{o.end(),i(o.read())}).pipe(o,{end:!1})})}async function dw(e,t,r){let n=0,i=Rr.join(t,e);for(let s=0;s<3;s++)try{return await(0,It.unlink)(i),i}catch(o){if(o.code==="ENOENT")return i;r.warn(`Error on remove temp update file: ${o}`),i=Rr.join(t,`${n++}-${e}`)}return i}var li={},Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.getAppCacheDir=pw;const qi=se,hw=zn;function pw(){const e=(0,hw.homedir)();let t;return process.platform==="win32"?t=process.env.LOCALAPPDATA||qi.join(e,"AppData","Local"):process.platform==="darwin"?t=qi.join(e,"Library","Caches"):t=process.env.XDG_CACHE_HOME||qi.join(e,".cache"),t}Object.defineProperty(li,"__esModule",{value:!0});li.ElectronAppAdapter=void 0;const xa=se,mw=Js;class gw{constructor(t=V.app){this.app=t}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?xa.join(process.resourcesPath,"app-update.yml"):xa.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,mw.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(t){this.app.once("quit",(r,n)=>t(n))}}li.ElectronAppAdapter=gw;var vu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronHttpExecutor=e.NET_SESSION_NAME=void 0,e.getNetSession=r;const t=fe;e.NET_SESSION_NAME="electron-updater";function r(){return V.session.fromPartition(e.NET_SESSION_NAME,{cache:!1})}class n extends t.HttpExecutor{constructor(s){super(),this.proxyLoginCallback=s,this.cachedSession=null}async download(s,o,a){return await a.cancellationToken.createPromise((l,d,c)=>{const f={headers:a.headers||void 0,redirect:"manual"};(0,t.configureRequestUrl)(s,f),(0,t.configureRequestOptions)(f),this.doDownload(f,{destination:o,options:a,onCancel:c,callback:h=>{h==null?l(o):d(h)},responseHandler:null},0)})}createRequest(s,o){s.headers&&s.headers.Host&&(s.host=s.headers.Host,delete s.headers.Host),this.cachedSession==null&&(this.cachedSession=r());const a=V.net.request({...s,session:this.cachedSession});return a.on("response",o),this.proxyLoginCallback!=null&&a.on("login",this.proxyLoginCallback),a}addRedirectHandlers(s,o,a,l,d){s.on("redirect",(c,f,h)=>{s.abort(),l>this.maxRedirects?a(this.createMaxRedirectError()):d(t.HttpExecutor.prepareRedirectUrlOptions(h,o))})}}e.ElectronHttpExecutor=n})(vu);var en={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.newBaseUrl=Ew;Xe.newUrlFromBase=yw;Xe.getChannelFilename=ww;const _u=_t;function Ew(e){const t=new _u.URL(e);return t.pathname.endsWith("/")||(t.pathname+="/"),t}function yw(e,t,r=!1){const n=new _u.URL(e,t),i=t.search;return i!=null&&i.length!==0?n.search=i:r&&(n.search=`noCache=${Date.now().toString(32)}`),n}function ww(e){return`${e}.yml`}var ce={},vw="[object Symbol]",Au=/[\\^$.*+?()[\]{}|]/g,_w=RegExp(Au.source),Aw=typeof be=="object"&&be&&be.Object===Object&&be,Tw=typeof self=="object"&&self&&self.Object===Object&&self,Sw=Aw||Tw||Function("return this")(),Cw=Object.prototype,bw=Cw.toString,La=Sw.Symbol,Ua=La?La.prototype:void 0,ka=Ua?Ua.toString:void 0;function Rw(e){if(typeof e=="string")return e;if(Pw(e))return ka?ka.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Ow(e){return!!e&&typeof e=="object"}function Pw(e){return typeof e=="symbol"||Ow(e)&&bw.call(e)==vw}function Iw(e){return e==null?"":Rw(e)}function Nw(e){return e=Iw(e),e&&_w.test(e)?e.replace(Au,"\\$&"):e}var Tu=Nw;Object.defineProperty(ce,"__esModule",{value:!0});ce.Provider=void 0;ce.findFile=Lw;ce.parseUpdateInfo=Uw;ce.getFileList=Su;ce.resolveFiles=kw;const yt=fe,Dw=ye,$w=_t,Vn=Xe,Fw=Tu;class xw{constructor(t){this.runtimeOptions=t,this.requestHeaders=null,this.executor=t.executor}getBlockMapFiles(t,r,n,i=null){const s=(0,Vn.newUrlFromBase)(`${t.pathname}.blockmap`,t);return[(0,Vn.newUrlFromBase)(`${t.pathname.replace(new RegExp(Fw(n),"g"),r)}.blockmap`,i?new $w.URL(i):t),s]}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const t=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(t==="x64"?"":`-${t}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(t){return`${t}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(t){this.requestHeaders=t}httpRequest(t,r,n){return this.executor.request(this.createRequestOptions(t,r),n)}createRequestOptions(t,r){const n={};return this.requestHeaders==null?r!=null&&(n.headers=r):n.headers=r==null?this.requestHeaders:{...this.requestHeaders,...r},(0,yt.configureRequestUrl)(t,n),n}}ce.Provider=xw;function Lw(e,t,r){var n;if(e.length===0)throw(0,yt.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const i=e.filter(o=>o.url.pathname.toLowerCase().endsWith(`.${t.toLowerCase()}`)),s=(n=i.find(o=>[o.url.pathname,o.info.url].some(a=>a.includes(process.arch))))!==null&&n!==void 0?n:i.shift();return s||(r==null?e[0]:e.find(o=>!r.some(a=>o.url.pathname.toLowerCase().endsWith(`.${a.toLowerCase()}`))))}function Uw(e,t,r){if(e==null)throw(0,yt.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${r}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let n;try{n=(0,Dw.load)(e)}catch(i){throw(0,yt.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${r}): ${i.stack||i.message}, rawData: ${e}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return n}function Su(e){const t=e.files;if(t!=null&&t.length>0)return t;if(e.path!=null)return[{url:e.path,sha2:e.sha2,sha512:e.sha512}];throw(0,yt.newError)(`No files provided: ${(0,yt.safeStringifyJson)(e)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function kw(e,t,r=n=>n){const i=Su(e).map(a=>{if(a.sha2==null&&a.sha512==null)throw(0,yt.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,yt.safeStringifyJson)(a)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,Vn.newUrlFromBase)(r(a.url),t),info:a}}),s=e.packages,o=s==null?null:s[process.arch]||s.ia32;return o!=null&&(i[0].packageInfo={...o,path:(0,Vn.newUrlFromBase)(r(o.path),t).href}),i}Object.defineProperty(en,"__esModule",{value:!0});en.GenericProvider=void 0;const Ma=fe,Gi=Xe,Wi=ce;class Mw extends Wi.Provider{constructor(t,r,n){super(n),this.configuration=t,this.updater=r,this.baseUrl=(0,Gi.newBaseUrl)(this.configuration.url)}get channel(){const t=this.updater.channel||this.configuration.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){const t=(0,Gi.getChannelFilename)(this.channel),r=(0,Gi.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);for(let n=0;;n++)try{return(0,Wi.parseUpdateInfo)(await this.httpRequest(r),t,r)}catch(i){if(i instanceof Ma.HttpError&&i.statusCode===404)throw(0,Ma.newError)(`Cannot find channel "${t}" update info: ${i.stack||i.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(i.code==="ECONNREFUSED"&&n<3){await new Promise((s,o)=>{try{setTimeout(s,1e3*n)}catch(a){o(a)}});continue}throw i}}resolveFiles(t){return(0,Wi.resolveFiles)(t,this.baseUrl)}}en.GenericProvider=Mw;var ci={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.BitbucketProvider=void 0;const Ba=fe,Vi=Xe,Yi=ce;class Bw extends Yi.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=r;const{owner:i,slug:s}=t;this.baseUrl=(0,Vi.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${i}/${s}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const t=new Ba.CancellationToken,r=(0,Vi.getChannelFilename)(this.getCustomChannelName(this.channel)),n=(0,Vi.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(n,void 0,t);return(0,Yi.parseUpdateInfo)(i,r,n)}catch(i){throw(0,Ba.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,Yi.resolveFiles)(t,this.baseUrl)}toString(){const{owner:t,slug:r}=this.configuration;return`Bitbucket (owner: ${t}, slug: ${r}, channel: ${this.channel})`}}ui.BitbucketProvider=Bw;var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.GitHubProvider=wt.BaseGitHubProvider=void 0;wt.computeReleaseNotes=bu;const nt=fe,Zt=wu,jw=_t,er=Xe,ws=ce,zi=/\/tag\/([^/]+)$/;class Cu extends ws.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.options=t,this.baseUrl=(0,er.newBaseUrl)((0,nt.githubUrl)(t,r));const i=r==="github.com"?"api.github.com":r;this.baseApiUrl=(0,er.newBaseUrl)((0,nt.githubUrl)(t,i))}computeGithubBasePath(t){const r=this.options.host;return r&&!["github.com","api.github.com"].includes(r)?`/api/v3${t}`:t}}wt.BaseGitHubProvider=Cu;class Hw extends Cu{constructor(t,r,n){super(t,"github.com",n),this.options=t,this.updater=r}get channel(){const t=this.updater.channel||this.options.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){var t,r,n,i,s;const o=new nt.CancellationToken,a=await this.httpRequest((0,er.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},o),l=(0,nt.parseXml)(a);let d=l.element("entry",!1,"No published versions on GitHub"),c=null;try{if(this.updater.allowPrerelease){const A=((t=this.updater)===null||t===void 0?void 0:t.channel)||((r=Zt.prerelease(this.updater.currentVersion))===null||r===void 0?void 0:r[0])||null;if(A===null)c=zi.exec(d.element("link").attribute("href"))[1];else for(const S of l.getElements("entry")){const T=zi.exec(S.element("link").attribute("href"));if(T===null)continue;const P=T[1],$=((n=Zt.prerelease(P))===null||n===void 0?void 0:n[0])||null,K=!A||["alpha","beta"].includes(A),ee=$!==null&&!["alpha","beta"].includes(String($));if(K&&!ee&&!(A==="beta"&&$==="alpha")){c=P;break}if($&&$===A){c=P;break}}}else{c=await this.getLatestTagName(o);for(const A of l.getElements("entry"))if(zi.exec(A.element("link").attribute("href"))[1]===c){d=A;break}}}catch(A){throw(0,nt.newError)(`Cannot parse releases feed: ${A.stack||A.message},
XML:
${a}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(c==null)throw(0,nt.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let f,h="",m="";const w=async A=>{h=(0,er.getChannelFilename)(A),m=(0,er.newUrlFromBase)(this.getBaseDownloadPath(String(c),h),this.baseUrl);const S=this.createRequestOptions(m);try{return await this.executor.request(S,o)}catch(T){throw T instanceof nt.HttpError&&T.statusCode===404?(0,nt.newError)(`Cannot find ${h} in the latest release artifacts (${m}): ${T.stack||T.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):T}};try{let A=this.channel;this.updater.allowPrerelease&&(!((i=Zt.prerelease(c))===null||i===void 0)&&i[0])&&(A=this.getCustomChannelName(String((s=Zt.prerelease(c))===null||s===void 0?void 0:s[0]))),f=await w(A)}catch(A){if(this.updater.allowPrerelease)f=await w(this.getDefaultChannelName());else throw A}const E=(0,ws.parseUpdateInfo)(f,h,m);return E.releaseName==null&&(E.releaseName=d.elementValueOrEmpty("title")),E.releaseNotes==null&&(E.releaseNotes=bu(this.updater.currentVersion,this.updater.fullChangelog,l,d)),{tag:c,...E}}async getLatestTagName(t){const r=this.options,n=r.host==null||r.host==="github.com"?(0,er.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new jw.URL(`${this.computeGithubBasePath(`/repos/${r.owner}/${r.repo}/releases`)}/latest`,this.baseApiUrl);try{const i=await this.httpRequest(n,{Accept:"application/json"},t);return i==null?null:JSON.parse(i).tag_name}catch(i){throw(0,nt.newError)(`Unable to find latest version on GitHub (${n}), please ensure a production release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(t){return(0,ws.resolveFiles)(t,this.baseUrl,r=>this.getBaseDownloadPath(t.tag,r.replace(/ /g,"-")))}getBaseDownloadPath(t,r){return`${this.basePath}/download/${t}/${r}`}}wt.GitHubProvider=Hw;function ja(e){const t=e.elementValueOrEmpty("content");return t==="No content."?"":t}function bu(e,t,r,n){if(!t)return ja(n);const i=[];for(const s of r.getElements("entry")){const o=/\/tag\/v?([^/]+)$/.exec(s.element("link").attribute("href"))[1];Zt.lt(e,o)&&i.push({version:o,note:ja(s)})}return i.sort((s,o)=>Zt.rcompare(s.version,o.version))}var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.GitLabProvider=void 0;const Te=fe,Xi=_t,qw=Tu,bn=Xe,Ki=ce;class Gw extends Ki.Provider{normalizeFilename(t){return t.replace(/ |_/g,"-")}constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.options=t,this.updater=r,this.cachedLatestVersion=null;const s=t.host||"gitlab.com";this.baseApiUrl=(0,bn.newBaseUrl)(`https://${s}/api/v4`)}get channel(){const t=this.updater.channel||this.options.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){const t=new Te.CancellationToken,r=(0,bn.newUrlFromBase)(`projects/${this.options.projectId}/releases/permalink/latest`,this.baseApiUrl);let n;try{const h={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},m=await this.httpRequest(r,h,t);if(!m)throw(0,Te.newError)("No latest release found","ERR_UPDATER_NO_PUBLISHED_VERSIONS");n=JSON.parse(m)}catch(h){throw(0,Te.newError)(`Unable to find latest release on GitLab (${r}): ${h.stack||h.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}const i=n.tag_name;let s=null,o="",a=null;const l=async h=>{o=(0,bn.getChannelFilename)(h);const m=n.assets.links.find(E=>E.name===o);if(!m)throw(0,Te.newError)(`Cannot find ${o} in the latest release assets`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");a=new Xi.URL(m.direct_asset_url);const w=this.options.token?{"PRIVATE-TOKEN":this.options.token}:void 0;try{const E=await this.httpRequest(a,w,t);if(!E)throw(0,Te.newError)(`Empty response from ${a}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");return E}catch(E){throw E instanceof Te.HttpError&&E.statusCode===404?(0,Te.newError)(`Cannot find ${o} in the latest release artifacts (${a}): ${E.stack||E.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):E}};try{s=await l(this.channel)}catch(h){if(this.channel!==this.getDefaultChannelName())s=await l(this.getDefaultChannelName());else throw h}if(!s)throw(0,Te.newError)(`Unable to parse channel data from ${o}`,"ERR_UPDATER_INVALID_UPDATE_INFO");const d=(0,Ki.parseUpdateInfo)(s,o,a);d.releaseName==null&&(d.releaseName=n.name),d.releaseNotes==null&&(d.releaseNotes=n.description||null);const c=new Map;for(const h of n.assets.links)c.set(this.normalizeFilename(h.name),h.direct_asset_url);const f={tag:i,assets:c,...d};return this.cachedLatestVersion=f,f}convertAssetsToMap(t){const r=new Map;for(const n of t.links)r.set(this.normalizeFilename(n.name),n.direct_asset_url);return r}findBlockMapInAssets(t,r){const n=[`${r}.blockmap`,`${this.normalizeFilename(r)}.blockmap`];for(const i of n){const s=t.get(i);if(s)return new Xi.URL(s)}return null}async fetchReleaseInfoByVersion(t){const r=new Te.CancellationToken,n=[`v${t}`,t];for(const i of n){const s=(0,bn.newUrlFromBase)(`projects/${this.options.projectId}/releases/${encodeURIComponent(i)}`,this.baseApiUrl);try{const o={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},a=await this.httpRequest(s,o,r);if(a)return JSON.parse(a)}catch(o){if(o instanceof Te.HttpError&&o.statusCode===404)continue;throw(0,Te.newError)(`Unable to find release ${i} on GitLab (${s}): ${o.stack||o.message}`,"ERR_UPDATER_RELEASE_NOT_FOUND")}}throw(0,Te.newError)(`Unable to find release with version ${t} (tried: ${n.join(", ")}) on GitLab`,"ERR_UPDATER_RELEASE_NOT_FOUND")}setAuthHeaderForToken(t){const r={};return t!=null&&(t.startsWith("Bearer")?r.authorization=t:r["PRIVATE-TOKEN"]=t),r}async getVersionInfoForBlockMap(t){if(this.cachedLatestVersion&&this.cachedLatestVersion.version===t)return this.cachedLatestVersion.assets;const r=await this.fetchReleaseInfoByVersion(t);return r&&r.assets?this.convertAssetsToMap(r.assets):null}async findBlockMapUrlsFromAssets(t,r,n){let i=null,s=null;const o=await this.getVersionInfoForBlockMap(r);o&&(i=this.findBlockMapInAssets(o,n));const a=await this.getVersionInfoForBlockMap(t);if(a){const l=n.replace(new RegExp(qw(r),"g"),t);s=this.findBlockMapInAssets(a,l)}return[s,i]}async getBlockMapFiles(t,r,n,i=null){if(this.options.uploadTarget==="project_upload"){const s=t.pathname.split("/").pop()||"",[o,a]=await this.findBlockMapUrlsFromAssets(r,n,s);if(!a)throw(0,Te.newError)(`Cannot find blockmap file for ${n} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");if(!o)throw(0,Te.newError)(`Cannot find blockmap file for ${r} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");return[o,a]}else return super.getBlockMapFiles(t,r,n,i)}resolveFiles(t){return(0,Ki.getFileList)(t).map(r=>{const i=[r.url,this.normalizeFilename(r.url)].find(o=>t.assets.has(o)),s=i?t.assets.get(i):void 0;if(!s)throw(0,Te.newError)(`Cannot find asset "${r.url}" in GitLab release assets. Available assets: ${Array.from(t.assets.keys()).join(", ")}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new Xi.URL(s),info:r}})}toString(){return`GitLab (projectId: ${this.options.projectId}, channel: ${this.channel})`}}fi.GitLabProvider=Gw;var di={};Object.defineProperty(di,"__esModule",{value:!0});di.KeygenProvider=void 0;const Ha=fe,Ji=Xe,Qi=ce;class Ww extends Qi.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=r,this.defaultHostname="api.keygen.sh";const i=this.configuration.host||this.defaultHostname;this.baseUrl=(0,Ji.newBaseUrl)(`https://${i}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const t=new Ha.CancellationToken,r=(0,Ji.getChannelFilename)(this.getCustomChannelName(this.channel)),n=(0,Ji.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(n,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},t);return(0,Qi.parseUpdateInfo)(i,r,n)}catch(i){throw(0,Ha.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,Qi.resolveFiles)(t,this.baseUrl)}toString(){const{account:t,product:r,platform:n}=this.configuration;return`Keygen (account: ${t}, product: ${r}, platform: ${n}, channel: ${this.channel})`}}di.KeygenProvider=Ww;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.PrivateGitHubProvider=void 0;const Vt=fe,Vw=ye,Yw=se,qa=_t,Ga=Xe,zw=wt,Xw=ce;class Kw extends zw.BaseGitHubProvider{constructor(t,r,n,i){super(t,"api.github.com",i),this.updater=r,this.token=n}createRequestOptions(t,r){const n=super.createRequestOptions(t,r);return n.redirect="manual",n}async getLatestVersion(){const t=new Vt.CancellationToken,r=(0,Ga.getChannelFilename)(this.getDefaultChannelName()),n=await this.getLatestVersionInfo(t),i=n.assets.find(a=>a.name===r);if(i==null)throw(0,Vt.newError)(`Cannot find ${r} in the release ${n.html_url||n.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const s=new qa.URL(i.url);let o;try{o=(0,Vw.load)(await this.httpRequest(s,this.configureHeaders("application/octet-stream"),t))}catch(a){throw a instanceof Vt.HttpError&&a.statusCode===404?(0,Vt.newError)(`Cannot find ${r} in the latest release artifacts (${s}): ${a.stack||a.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):a}return o.assets=n.assets,o}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(t){return{accept:t,authorization:`token ${this.token}`}}async getLatestVersionInfo(t){const r=this.updater.allowPrerelease;let n=this.basePath;r||(n=`${n}/latest`);const i=(0,Ga.newUrlFromBase)(n,this.baseUrl);try{const s=JSON.parse(await this.httpRequest(i,this.configureHeaders("application/vnd.github.v3+json"),t));return r?s.find(o=>o.prerelease)||s[0]:s}catch(s){throw(0,Vt.newError)(`Unable to find latest version on GitHub (${i}), please ensure a production release exists: ${s.stack||s.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(t){return(0,Xw.getFileList)(t).map(r=>{const n=Yw.posix.basename(r.url).replace(/ /g,"-"),i=t.assets.find(s=>s!=null&&s.name===n);if(i==null)throw(0,Vt.newError)(`Cannot find asset "${n}" in: ${JSON.stringify(t.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new qa.URL(i.url),info:r}})}}hi.PrivateGitHubProvider=Kw;Object.defineProperty(ci,"__esModule",{value:!0});ci.isUrlProbablySupportMultiRangeRequests=Ru;ci.createClient=rv;const Rn=fe,Jw=ui,Wa=en,Qw=wt,Zw=fi,ev=di,tv=hi;function Ru(e){return!e.includes("s3.amazonaws.com")}function rv(e,t,r){if(typeof e=="string")throw(0,Rn.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const n=e.provider;switch(n){case"github":{const i=e,s=(i.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||i.token;return s==null?new Qw.GitHubProvider(i,t,r):new tv.PrivateGitHubProvider(i,t,s,r)}case"bitbucket":return new Jw.BitbucketProvider(e,t,r);case"gitlab":return new Zw.GitLabProvider(e,t,r);case"keygen":return new ev.KeygenProvider(e,t,r);case"s3":case"spaces":return new Wa.GenericProvider({provider:"generic",url:(0,Rn.getS3LikeProviderBaseUrl)(e),channel:e.channel||null},t,{...r,isUseMultipleRangeRequest:!1});case"generic":{const i=e;return new Wa.GenericProvider(i,t,{...r,isUseMultipleRangeRequest:i.useMultipleRangeRequest!==!1&&Ru(i.url)})}case"custom":{const i=e,s=i.updateProvider;if(!s)throw(0,Rn.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new s(i,t,r)}default:throw(0,Rn.newError)(`Unsupported provider: ${n}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}var pi={},tn={},fr={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});jt.OperationKind=void 0;jt.computeOperations=nv;var $t;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})($t||(jt.OperationKind=$t={}));function nv(e,t,r){const n=Ya(e.files),i=Ya(t.files);let s=null;const o=t.files[0],a=[],l=o.name,d=n.get(l);if(d==null)throw new Error(`no file ${l} in old blockmap`);const c=i.get(l);let f=0;const{checksumToOffset:h,checksumToOldSize:m}=sv(n.get(l),d.offset,r);let w=o.offset;for(let E=0;E<c.checksums.length;w+=c.sizes[E],E++){const A=c.sizes[E],S=c.checksums[E];let T=h.get(S);T!=null&&m.get(S)!==A&&(r.warn(`Checksum ("${S}") matches, but size differs (old: ${m.get(S)}, new: ${A})`),T=void 0),T===void 0?(f++,s!=null&&s.kind===$t.DOWNLOAD&&s.end===w?s.end+=A:(s={kind:$t.DOWNLOAD,start:w,end:w+A},Va(s,a,S,E))):s!=null&&s.kind===$t.COPY&&s.end===T?s.end+=A:(s={kind:$t.COPY,start:T,end:T+A},Va(s,a,S,E))}return f>0&&r.info(`File${o.name==="file"?"":" "+o.name} has ${f} changed blocks`),a}const iv=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function Va(e,t,r,n){if(iv&&t.length!==0){const i=t[t.length-1];if(i.kind===e.kind&&e.start<i.end&&e.start>i.start){const s=[i.start,i.end,e.start,e.end].reduce((o,a)=>o<a?o:a);throw new Error(`operation (block index: ${n}, checksum: ${r}, kind: ${$t[e.kind]}) overlaps previous operation (checksum: ${r}):
abs: ${i.start} until ${i.end} and ${e.start} until ${e.end}
rel: ${i.start-s} until ${i.end-s} and ${e.start-s} until ${e.end-s}`)}}t.push(e)}function sv(e,t,r){const n=new Map,i=new Map;let s=t;for(let o=0;o<e.checksums.length;o++){const a=e.checksums[o],l=e.sizes[o],d=i.get(a);if(d===void 0)n.set(a,s),i.set(a,l);else if(r.debug!=null){const c=d===l?"(same size)":`(size: ${d}, this size: ${l})`;r.debug(`${a} duplicated in blockmap ${c}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}s+=l}return{checksumToOffset:n,checksumToOldSize:i}}function Ya(e){const t=new Map;for(const r of e)t.set(r.name,r);return t}Object.defineProperty(fr,"__esModule",{value:!0});fr.DataSplitter=void 0;fr.copyData=Ou;const On=fe,ov=vt,av=Gr,lv=jt,za=Buffer.from(`\r
\r
`);var ut;(function(e){e[e.INIT=0]="INIT",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY"})(ut||(ut={}));function Ou(e,t,r,n,i){const s=(0,ov.createReadStream)("",{fd:r,autoClose:!1,start:e.start,end:e.end-1});s.on("error",n),s.once("end",i),s.pipe(t,{end:!1})}class cv extends av.Writable{constructor(t,r,n,i,s,o){super(),this.out=t,this.options=r,this.partIndexToTaskIndex=n,this.partIndexToLength=s,this.finishHandler=o,this.partIndex=-1,this.headerListBuffer=null,this.readState=ut.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=i.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(t,r,n){if(this.isFinished){console.error(`Trailing ignored data: ${t.length} bytes`);return}this.handleData(t).then(n).catch(n)}async handleData(t){let r=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,On.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const n=Math.min(this.ignoreByteCount,t.length);this.ignoreByteCount-=n,r=n}else if(this.remainingPartDataCount>0){const n=Math.min(this.remainingPartDataCount,t.length);this.remainingPartDataCount-=n,await this.processPartData(t,0,n),r=n}if(r!==t.length){if(this.readState===ut.HEADER){const n=this.searchHeaderListEnd(t,r);if(n===-1)return;r=n,this.readState=ut.BODY,this.headerListBuffer=null}for(;;){if(this.readState===ut.BODY)this.readState=ut.INIT;else{this.partIndex++;let o=this.partIndexToTaskIndex.get(this.partIndex);if(o==null)if(this.isFinished)o=this.options.end;else throw(0,On.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const a=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(a<o)await this.copyExistingData(a,o);else if(a>o)throw(0,On.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(r=this.searchHeaderListEnd(t,r),r===-1){this.readState=ut.HEADER;return}}const n=this.partIndexToLength[this.partIndex],i=r+n,s=Math.min(i,t.length);if(await this.processPartStarted(t,r,s),this.remainingPartDataCount=n-(s-r),this.remainingPartDataCount>0)return;if(r=i+this.boundaryLength,r>=t.length){this.ignoreByteCount=this.boundaryLength-(t.length-i);return}}}}copyExistingData(t,r){return new Promise((n,i)=>{const s=()=>{if(t===r){n();return}const o=this.options.tasks[t];if(o.kind!==lv.OperationKind.COPY){i(new Error("Task kind must be COPY"));return}Ou(o,this.out,this.options.oldFileFd,i,()=>{t++,s()})};s()})}searchHeaderListEnd(t,r){const n=t.indexOf(za,r);if(n!==-1)return n+za.length;const i=r===0?t:t.slice(r);return this.headerListBuffer==null?this.headerListBuffer=i:this.headerListBuffer=Buffer.concat([this.headerListBuffer,i]),-1}onPartEnd(){const t=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==t)throw(0,On.newError)(`Expected length: ${t} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(t,r,n){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(t,r,n)}processPartData(t,r,n){this.actualPartLength+=n-r;const i=this.out;return i.write(r===0&&t.length===n?t:t.slice(r,n))?Promise.resolve():new Promise((s,o)=>{i.on("error",o),i.once("drain",()=>{i.removeListener("error",o),s()})})}}fr.DataSplitter=cv;var mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.executeTasksUsingMultipleRangeRequests=uv;mi.checkIsRangesSupported=_s;const vs=fe,Xa=fr,Ka=jt;function uv(e,t,r,n,i){const s=o=>{if(o>=t.length){e.fileMetadataBuffer!=null&&r.write(e.fileMetadataBuffer),r.end();return}const a=o+1e3;fv(e,{tasks:t,start:o,end:Math.min(t.length,a),oldFileFd:n},r,()=>s(a),i)};return s}function fv(e,t,r,n,i){let s="bytes=",o=0;const a=new Map,l=[];for(let f=t.start;f<t.end;f++){const h=t.tasks[f];h.kind===Ka.OperationKind.DOWNLOAD&&(s+=`${h.start}-${h.end-1}, `,a.set(o,f),o++,l.push(h.end-h.start))}if(o<=1){const f=h=>{if(h>=t.end){n();return}const m=t.tasks[h++];if(m.kind===Ka.OperationKind.COPY)(0,Xa.copyData)(m,r,t.oldFileFd,i,()=>f(h));else{const w=e.createRequestOptions();w.headers.Range=`bytes=${m.start}-${m.end-1}`;const E=e.httpExecutor.createRequest(w,A=>{A.on("error",i),_s(A,i)&&(A.pipe(r,{end:!1}),A.once("end",()=>f(h)))});e.httpExecutor.addErrorAndTimeoutHandlers(E,i),E.end()}};f(t.start);return}const d=e.createRequestOptions();d.headers.Range=s.substring(0,s.length-2);const c=e.httpExecutor.createRequest(d,f=>{if(!_s(f,i))return;const h=(0,vs.safeGetHeader)(f,"content-type"),m=/^multipart\/.+?\s*;\s*boundary=(?:"([^"]+)"|([^\s";]+))\s*$/i.exec(h);if(m==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${h}"`));return}const w=new Xa.DataSplitter(r,t,a,m[1]||m[2],l,n);w.on("error",i),f.pipe(w),f.on("end",()=>{setTimeout(()=>{c.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});e.httpExecutor.addErrorAndTimeoutHandlers(c,i),c.end()}function _s(e,t){if(e.statusCode>=400)return t((0,vs.createHttpError)(e)),!1;if(e.statusCode!==206){const r=(0,vs.safeGetHeader)(e,"accept-ranges");if(r==null||r==="none")return t(new Error(`Server doesn't support Accept-Ranges (response code ${e.statusCode})`)),!1}return!0}var gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.ProgressDifferentialDownloadCallbackTransform=void 0;const dv=Gr;var tr;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(tr||(tr={}));class hv extends dv.Transform{constructor(t,r,n){super(),this.progressDifferentialDownloadInfo=t,this.cancellationToken=r,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=tr.COPY,this.nextUpdate=this.start+1e3}_transform(t,r,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}if(this.operationType==tr.COPY){n(null,t);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=i+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),n(null,t)}beginFileCopy(){this.operationType=tr.COPY}beginRangeDownload(){this.operationType=tr.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,t(null)}}gi.ProgressDifferentialDownloadCallbackTransform=hv;Object.defineProperty(tn,"__esModule",{value:!0});tn.DifferentialDownloader=void 0;const vr=fe,Zi=At,pv=vt,mv=fr,gv=_t,Pn=jt,Ja=mi,Ev=gi;class yv{constructor(t,r,n){this.blockAwareFileInfo=t,this.httpExecutor=r,this.options=n,this.fileMetadataBuffer=null,this.logger=n.logger}createRequestOptions(){const t={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,vr.configureRequestUrl)(this.options.newUrl,t),(0,vr.configureRequestOptions)(t),t}doDownload(t,r){if(t.version!==r.version)throw new Error(`version is different (${t.version} - ${r.version}), full download is required`);const n=this.logger,i=(0,Pn.computeOperations)(t,r,n);n.debug!=null&&n.debug(JSON.stringify(i,null,2));let s=0,o=0;for(const l of i){const d=l.end-l.start;l.kind===Pn.OperationKind.DOWNLOAD?s+=d:o+=d}const a=this.blockAwareFileInfo.size;if(s+o+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==a)throw new Error(`Internal error, size mismatch: downloadSize: ${s}, copySize: ${o}, newSize: ${a}`);return n.info(`Full: ${Qa(a)}, To download: ${Qa(s)} (${Math.round(s/(a/100))}%)`),this.downloadFile(i)}downloadFile(t){const r=[],n=()=>Promise.all(r.map(i=>(0,Zi.close)(i.descriptor).catch(s=>{this.logger.error(`cannot close file "${i.path}": ${s}`)})));return this.doDownloadFile(t,r).then(n).catch(i=>n().catch(s=>{try{this.logger.error(`cannot close files: ${s}`)}catch(o){try{console.error(o)}catch{}}throw i}).then(()=>{throw i}))}async doDownloadFile(t,r){const n=await(0,Zi.open)(this.options.oldFile,"r");r.push({descriptor:n,path:this.options.oldFile});const i=await(0,Zi.open)(this.options.newFile,"w");r.push({descriptor:i,path:this.options.newFile});const s=(0,pv.createWriteStream)(this.options.newFile,{fd:i});await new Promise((o,a)=>{const l=[];let d;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const S=[];let T=0;for(const $ of t)$.kind===Pn.OperationKind.DOWNLOAD&&(S.push($.end-$.start),T+=$.end-$.start);const P={expectedByteCounts:S,grandTotal:T};d=new Ev.ProgressDifferentialDownloadCallbackTransform(P,this.options.cancellationToken,this.options.onProgress),l.push(d)}const c=new vr.DigestTransform(this.blockAwareFileInfo.sha512);c.isValidateOnEnd=!1,l.push(c),s.on("finish",()=>{s.close(()=>{r.splice(1,1);try{c.validate()}catch(S){a(S);return}o(void 0)})}),l.push(s);let f=null;for(const S of l)S.on("error",a),f==null?f=S:f=f.pipe(S);const h=l[0];let m;if(this.options.isUseMultipleRangeRequest){m=(0,Ja.executeTasksUsingMultipleRangeRequests)(this,t,h,n,a),m(0);return}let w=0,E=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const A=this.createRequestOptions();A.redirect="manual",m=S=>{var T,P;if(S>=t.length){this.fileMetadataBuffer!=null&&h.write(this.fileMetadataBuffer),h.end();return}const $=t[S++];if($.kind===Pn.OperationKind.COPY){d&&d.beginFileCopy(),(0,mv.copyData)($,h,n,a,()=>m(S));return}const K=`bytes=${$.start}-${$.end-1}`;A.headers.range=K,(P=(T=this.logger)===null||T===void 0?void 0:T.debug)===null||P===void 0||P.call(T,`download range: ${K}`),d&&d.beginRangeDownload();const ee=this.httpExecutor.createRequest(A,j=>{j.on("error",a),j.on("aborted",()=>{a(new Error("response has been aborted by the server"))}),j.statusCode>=400&&a((0,vr.createHttpError)(j)),j.pipe(h,{end:!1}),j.once("end",()=>{d&&d.endRangeDownload(),++w===100?(w=0,setTimeout(()=>m(S),1e3)):m(S)})});ee.on("redirect",(j,xe,y)=>{this.logger.info(`Redirect to ${wv(y)}`),E=y,(0,vr.configureRequestUrl)(new gv.URL(E),A),ee.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(ee,a),ee.end()},m(0)})}async readRemoteBytes(t,r){const n=Buffer.allocUnsafe(r+1-t),i=this.createRequestOptions();i.headers.range=`bytes=${t}-${r}`;let s=0;if(await this.request(i,o=>{o.copy(n,s),s+=o.length}),s!==n.length)throw new Error(`Received data length ${s} is not equal to expected ${n.length}`);return n}request(t,r){return new Promise((n,i)=>{const s=this.httpExecutor.createRequest(t,o=>{(0,Ja.checkIsRangesSupported)(o,i)&&(o.on("error",i),o.on("aborted",()=>{i(new Error("response has been aborted by the server"))}),o.on("data",r),o.on("end",()=>n()))});this.httpExecutor.addErrorAndTimeoutHandlers(s,i),s.end()})}}tn.DifferentialDownloader=yv;function Qa(e,t=" KB"){return new Intl.NumberFormat("en").format((e/1024).toFixed(2))+t}function wv(e){const t=e.indexOf("?");return t<0?e:e.substring(0,t)}Object.defineProperty(pi,"__esModule",{value:!0});pi.GenericDifferentialDownloader=void 0;const vv=tn;class _v extends vv.DifferentialDownloader{download(t,r){return this.doDownload(t,r)}}pi.GenericDifferentialDownloader=_v;var Tt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdaterSignal=e.UPDATE_DOWNLOADED=e.DOWNLOAD_PROGRESS=e.CancellationToken=void 0,e.addHandler=n;const t=fe;Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}}),e.DOWNLOAD_PROGRESS="download-progress",e.UPDATE_DOWNLOADED="update-downloaded";class r{constructor(s){this.emitter=s}login(s){n(this.emitter,"login",s)}progress(s){n(this.emitter,e.DOWNLOAD_PROGRESS,s)}updateDownloaded(s){n(this.emitter,e.UPDATE_DOWNLOADED,s)}updateCancelled(s){n(this.emitter,"update-cancelled",s)}}e.UpdaterSignal=r;function n(i,s,o){i.on(s,o)}})(Tt);Object.defineProperty(mt,"__esModule",{value:!0});mt.NoOpLogger=mt.AppUpdater=void 0;const Se=fe,Av=Wr,Tv=zn,Sv=vl,qe=At,Cv=ye,es=ri,Ge=se,Nt=wu,Za=Zr,bv=li,el=vu,Rv=en,ts=ci,rs=Al,Ov=pi,Yt=Tt;let Pv=class Pu extends Sv.EventEmitter{get channel(){return this._channel}set channel(t){if(this._channel!=null){if(typeof t!="string")throw(0,Se.newError)(`Channel must be a string, but got: ${t}`,"ERR_UPDATER_INVALID_CHANNEL");if(t.length===0)throw(0,Se.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=t,this.allowDowngrade=!0}addAuthHeader(t){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:t})}get netSession(){return(0,el.getNetSession)()}get logger(){return this._logger}set logger(t){this._logger=t??new Iu}set updateConfigPath(t){this.clientPromise=null,this._appUpdateConfigPath=t,this.configOnDisk=new es.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(t){t&&(this._isUpdateSupported=t)}get isUserWithinRollout(){return this._isUserWithinRollout}set isUserWithinRollout(t){t&&(this._isUserWithinRollout=t)}constructor(t,r){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this.previousBlockmapBaseUrlOverride=null,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new Yt.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=s=>this.checkIfUpdateSupported(s),this._isUserWithinRollout=s=>this.isStagingMatch(s),this.clientPromise=null,this.stagingUserIdPromise=new es.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new es.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",s=>{this._logger.error(`Error: ${s.stack||s.message}`)}),r==null?(this.app=new bv.ElectronAppAdapter,this.httpExecutor=new el.ElectronHttpExecutor((s,o)=>this.emit("login",s,o))):(this.app=r,this.httpExecutor=null);const n=this.app.version,i=(0,Nt.parse)(n);if(i==null)throw(0,Se.newError)(`App version is not a valid semver version: "${n}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=i,this.allowPrerelease=Iv(i),t!=null&&(this.setFeedURL(t),typeof t!="string"&&t.requestHeaders&&(this.requestHeaders=t.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(t){const r=this.createProviderRuntimeOptions();let n;typeof t=="string"?n=new Rv.GenericProvider({provider:"generic",url:t},this,{...r,isUseMultipleRangeRequest:(0,ts.isUrlProbablySupportMultiRangeRequests)(t)}):n=(0,ts.createClient)(t,this,r),this.clientPromise=Promise.resolve(n)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let t=this.checkForUpdatesPromise;if(t!=null)return this._logger.info("Checking for update (already in progress)"),t;const r=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),t=this.doCheckForUpdates().then(n=>(r(),n)).catch(n=>{throw r(),this.emit("error",n,`Cannot check for updates: ${(n.stack||n).toString()}`),n}),this.checkForUpdatesPromise=t,t}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(t){return this.checkForUpdates().then(r=>r!=null&&r.downloadPromise?(r.downloadPromise.then(()=>{const n=Pu.formatDownloadNotification(r.updateInfo.version,this.app.name,t);new V.Notification(n).show()}),r):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),r))}static formatDownloadNotification(t,r,n){return n==null&&(n={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),n={title:n.title.replace("{appName}",r).replace("{version}",t),body:n.body.replace("{appName}",r).replace("{version}",t)},n}async isStagingMatch(t){const r=t.stagingPercentage;let n=r;if(n==null)return!0;if(n=parseInt(n,10),isNaN(n))return this._logger.warn(`Staging percentage is NaN: ${r}`),!0;n=n/100;const i=await this.stagingUserIdPromise.value,o=Se.UUID.parse(i).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${n}, percentage: ${o}, user id: ${i}`),o<n}computeFinalHeaders(t){return this.requestHeaders!=null&&Object.assign(t,this.requestHeaders),t}async isUpdateAvailable(t){const r=(0,Nt.parse)(t.version);if(r==null)throw(0,Se.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${t.version}"`,"ERR_UPDATER_INVALID_VERSION");const n=this.currentVersion;if((0,Nt.eq)(r,n)||!await Promise.resolve(this.isUpdateSupported(t))||!await Promise.resolve(this.isUserWithinRollout(t)))return!1;const s=(0,Nt.gt)(r,n),o=(0,Nt.lt)(r,n);return s?!0:this.allowDowngrade&&o}checkIfUpdateSupported(t){const r=t==null?void 0:t.minimumSystemVersion,n=(0,Tv.release)();if(r)try{if((0,Nt.lt)(n,r))return this._logger.info(`Current OS version ${n} is less than the minimum OS version required ${r} for version ${n}`),!1}catch(i){this._logger.warn(`Failed to compare current OS version(${n}) with minimum OS version(${r}): ${(i.message||i).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(n=>(0,ts.createClient)(n,this,this.createProviderRuntimeOptions())));const t=await this.clientPromise,r=await this.stagingUserIdPromise.value;return t.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":r})),{info:await t.getLatestVersion(),provider:t}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const t=await this.getUpdateInfoAndProvider(),r=t.info;if(!await this.isUpdateAvailable(r))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${r.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",r),{isUpdateAvailable:!1,versionInfo:r,updateInfo:r};this.updateInfoAndProvider=t,this.onUpdateAvailable(r);const n=new Se.CancellationToken;return{isUpdateAvailable:!0,versionInfo:r,updateInfo:r,cancellationToken:n,downloadPromise:this.autoDownload?this.downloadUpdate(n):null}}onUpdateAvailable(t){this._logger.info(`Found version ${t.version} (url: ${(0,Se.asArray)(t.files).map(r=>r.url).join(", ")})`),this.emit("update-available",t)}downloadUpdate(t=new Se.CancellationToken){const r=this.updateInfoAndProvider;if(r==null){const i=new Error("Please check update first");return this.dispatchError(i),Promise.reject(i)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,Se.asArray)(r.info.files).map(i=>i.url).join(", ")}`);const n=i=>{if(!(i instanceof Se.CancellationError))try{this.dispatchError(i)}catch(s){this._logger.warn(`Cannot dispatch error event: ${s.stack||s}`)}return i};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:r,requestHeaders:this.computeRequestHeaders(r.provider),cancellationToken:t,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(i=>{throw n(i)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(t){this.emit("error",t,(t.stack||t).toString())}dispatchUpdateDownloaded(t){this.emit(Yt.UPDATE_DOWNLOADED,t)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,Cv.load)(await(0,qe.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(t){const r=t.fileExtraDownloadHeaders;if(r!=null){const n=this.requestHeaders;return n==null?r:{...r,...n}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const t=Ge.join(this.app.userDataPath,".updaterId");try{const n=await(0,qe.readFile)(t,"utf-8");if(Se.UUID.check(n))return n;this._logger.warn(`Staging user id file exists, but content was invalid: ${n}`)}catch(n){n.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${n}`)}const r=Se.UUID.v5((0,Av.randomBytes)(4096),Se.UUID.OID);this._logger.info(`Generated new staging user ID: ${r}`);try{await(0,qe.outputFile)(t,r)}catch(n){this._logger.warn(`Couldn't write out staging user ID: ${n}`)}return r}get isAddNoCacheQuery(){const t=this.requestHeaders;if(t==null)return!0;for(const r of Object.keys(t)){const n=r.toLowerCase();if(n==="authorization"||n==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let t=this.downloadedUpdateHelper;if(t==null){const r=(await this.configOnDisk.value).updaterCacheDirName,n=this._logger;r==null&&n.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const i=Ge.join(this.app.baseCachePath,r||this.app.name);n.debug!=null&&n.debug(`updater cache dir: ${i}`),t=new Za.DownloadedUpdateHelper(i),this.downloadedUpdateHelper=t}return t}async executeDownload(t){const r=t.fileInfo,n={headers:t.downloadUpdateOptions.requestHeaders,cancellationToken:t.downloadUpdateOptions.cancellationToken,sha2:r.info.sha2,sha512:r.info.sha512};this.listenerCount(Yt.DOWNLOAD_PROGRESS)>0&&(n.onProgress=T=>this.emit(Yt.DOWNLOAD_PROGRESS,T));const i=t.downloadUpdateOptions.updateInfoAndProvider.info,s=i.version,o=r.packageInfo;function a(){const T=decodeURIComponent(t.fileInfo.url.pathname);return T.toLowerCase().endsWith(`.${t.fileExtension.toLowerCase()}`)?Ge.basename(T):t.fileInfo.info.url}const l=await this.getOrCreateDownloadHelper(),d=l.cacheDirForPendingUpdate;await(0,qe.mkdir)(d,{recursive:!0});const c=a();let f=Ge.join(d,c);const h=o==null?null:Ge.join(d,`package-${s}${Ge.extname(o.path)||".7z"}`),m=async T=>{await l.setDownloadedFile(f,h,i,r,c,T),await t.done({...i,downloadedFile:f});const P=Ge.join(d,"current.blockmap");return await(0,qe.pathExists)(P)&&await(0,qe.copyFile)(P,Ge.join(l.cacheDir,"current.blockmap")),h==null?[f]:[f,h]},w=this._logger,E=await l.validateDownloadedPath(f,i,r,w);if(E!=null)return f=E,await m(!1);const A=async()=>(await l.clear().catch(()=>{}),await(0,qe.unlink)(f).catch(()=>{})),S=await(0,Za.createTempUpdateFile)(`temp-${c}`,d,w);try{await t.task(S,n,h,A),await(0,Se.retry)(()=>(0,qe.rename)(S,f),{retries:60,interval:500,shouldRetry:T=>T instanceof Error&&/^EBUSY:/.test(T.message)?!0:(w.warn(`Cannot rename temp file to final file: ${T.message||T.stack}`),!1)})}catch(T){throw await A(),T instanceof Se.CancellationError&&(w.info("cancelled"),this.emit("update-cancelled",i)),T}return w.info(`New version ${s} has been downloaded to ${f}`),await m(!0)}async differentialDownloadInstaller(t,r,n,i,s){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const o=r.updateInfoAndProvider.provider,a=await o.getBlockMapFiles(t.url,this.app.version,r.updateInfoAndProvider.info.version,this.previousBlockmapBaseUrlOverride);this._logger.info(`Download block maps (old: "${a[0]}", new: ${a[1]})`);const l=async w=>{const E=await this.httpExecutor.downloadToBuffer(w,{headers:r.requestHeaders,cancellationToken:r.cancellationToken});if(E==null||E.length===0)throw new Error(`Blockmap "${w.href}" is empty`);try{return JSON.parse((0,rs.gunzipSync)(E).toString())}catch(A){throw new Error(`Cannot parse blockmap "${w.href}", error: ${A}`)}},d={newUrl:t.url,oldFile:Ge.join(this.downloadedUpdateHelper.cacheDir,s),logger:this._logger,newFile:n,isUseMultipleRangeRequest:o.isUseMultipleRangeRequest,requestHeaders:r.requestHeaders,cancellationToken:r.cancellationToken};this.listenerCount(Yt.DOWNLOAD_PROGRESS)>0&&(d.onProgress=w=>this.emit(Yt.DOWNLOAD_PROGRESS,w));const c=async(w,E)=>{const A=Ge.join(E,"current.blockmap");await(0,qe.outputFile)(A,(0,rs.gzipSync)(JSON.stringify(w)))},f=async w=>{const E=Ge.join(w,"current.blockmap");try{if(await(0,qe.pathExists)(E))return JSON.parse((0,rs.gunzipSync)(await(0,qe.readFile)(E)).toString())}catch(A){this._logger.warn(`Cannot parse blockmap "${E}", error: ${A}`)}return null},h=await l(a[1]);await c(h,this.downloadedUpdateHelper.cacheDirForPendingUpdate);let m=await f(this.downloadedUpdateHelper.cacheDir);return m==null&&(m=await l(a[0])),await new Ov.GenericDifferentialDownloader(t.info,this.httpExecutor,d).download(m,h),!1}catch(o){if(this._logger.error(`Cannot download differentially, fallback to full download: ${o.stack||o}`),this._testOnlyOptions!=null)throw o;return!0}}};mt.AppUpdater=Pv;function Iv(e){const t=(0,Nt.prerelease)(e);return t!=null&&t.length>0}class Iu{info(t){}warn(t){}error(t){}}mt.NoOpLogger=Iu;Object.defineProperty(Bt,"__esModule",{value:!0});Bt.BaseUpdater=void 0;const tl=Yn,Nv=mt;class Dv extends Nv.AppUpdater{constructor(t,r){super(t,r),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(t=!1,r=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(t,t?r:this.autoRunAppAfterInstall)?setImmediate(()=>{V.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(t){return super.executeDownload({...t,done:r=>(this.dispatchUpdateDownloaded(r),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(t=!1,r=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const n=this.downloadedUpdateHelper,i=this.installerPath,s=n==null?null:n.downloadedFileInfo;if(i==null||s==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${t}, isForceRunAfter: ${r}`),this.doInstall({isSilent:t,isForceRunAfter:r,isAdminRightsRequired:s.isAdminRightsRequired})}catch(o){return this.dispatchError(o),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(t=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(t!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${t}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}spawnSyncLog(t,r=[],n={}){this._logger.info(`Executing: ${t} with args: ${r}`);const i=(0,tl.spawnSync)(t,r,{env:{...process.env,...n},encoding:"utf-8",shell:!0}),{error:s,status:o,stdout:a,stderr:l}=i;if(s!=null)throw this._logger.error(l),s;if(o!=null&&o!==0)throw this._logger.error(l),new Error(`Command ${t} exited with code ${o}`);return a.trim()}async spawnLog(t,r=[],n=void 0,i="ignore"){return this._logger.info(`Executing: ${t} with args: ${r}`),new Promise((s,o)=>{try{const a={stdio:i,env:n,detached:!0},l=(0,tl.spawn)(t,r,a);l.on("error",d=>{o(d)}),l.unref(),l.pid!==void 0&&s(!0)}catch(a){o(a)}})}}Bt.BaseUpdater=Dv;var kr={},rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const zt=At,$v=tn,Fv=Al;class xv extends $v.DifferentialDownloader{async download(){const t=this.blockAwareFileInfo,r=t.size,n=r-(t.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(n,r-1);const i=Nu(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await Lv(this.options.oldFile),i)}}rn.FileWithEmbeddedBlockMapDifferentialDownloader=xv;function Nu(e){return JSON.parse((0,Fv.inflateRawSync)(e).toString())}async function Lv(e){const t=await(0,zt.open)(e,"r");try{const r=(await(0,zt.fstat)(t)).size,n=Buffer.allocUnsafe(4);await(0,zt.read)(t,n,0,n.length,r-n.length);const i=Buffer.allocUnsafe(n.readUInt32BE(0));return await(0,zt.read)(t,i,0,i.length,r-n.length-i.length),await(0,zt.close)(t),Nu(i)}catch(r){throw await(0,zt.close)(t),r}}Object.defineProperty(kr,"__esModule",{value:!0});kr.AppImageUpdater=void 0;const rl=fe,nl=Yn,Uv=At,kv=vt,_r=se,Mv=Bt,Bv=rn,jv=ce,il=Tt;class Hv extends Mv.BaseUpdater{constructor(t,r){super(t,r)}isUpdaterActive(){return process.env.APPIMAGE==null&&!this.forceDevUpdateConfig?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,jv.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:n,downloadUpdateOptions:t,task:async(i,s)=>{const o=process.env.APPIMAGE;if(o==null)throw(0,rl.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(t.disableDifferentialDownload||await this.downloadDifferential(n,o,i,r,t))&&await this.httpExecutor.download(n.url,i,s),await(0,Uv.chmod)(i,493)}})}async downloadDifferential(t,r,n,i,s){try{const o={newUrl:t.url,oldFile:r,logger:this._logger,newFile:n,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,requestHeaders:s.requestHeaders,cancellationToken:s.cancellationToken};return this.listenerCount(il.DOWNLOAD_PROGRESS)>0&&(o.onProgress=a=>this.emit(il.DOWNLOAD_PROGRESS,a)),await new Bv.FileWithEmbeddedBlockMapDifferentialDownloader(t.info,this.httpExecutor,o).download(),!1}catch(o){return this._logger.error(`Cannot download differentially, fallback to full download: ${o.stack||o}`),process.platform==="linux"}}doInstall(t){const r=process.env.APPIMAGE;if(r==null)throw(0,rl.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,kv.unlinkSync)(r);let n;const i=_r.basename(r),s=this.installerPath;if(s==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;_r.basename(s)===i||!/\d+\.\d+\.\d+/.test(i)?n=r:n=_r.join(_r.dirname(r),_r.basename(s)),(0,nl.execFileSync)("mv",["-f",s,n]),n!==r&&this.emit("appimage-filename-updated",n);const o={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return t.isForceRunAfter?this.spawnLog(n,[],o):(o.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,nl.execFileSync)(n,[],{env:o})),!0}}kr.AppImageUpdater=Hv;var Mr={},dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.LinuxUpdater=void 0;const qv=Bt;class Gv extends qv.BaseUpdater{constructor(t,r){super(t,r)}isRunningAsRoot(){var t;return((t=process.getuid)===null||t===void 0?void 0:t.call(process))===0}get installerPath(){var t,r;return(r=(t=super.installerPath)===null||t===void 0?void 0:t.replace(/\\/g,"\\\\").replace(/ /g,"\\ "))!==null&&r!==void 0?r:null}runCommandWithSudoIfNeeded(t){if(this.isRunningAsRoot())return this._logger.info("Running as root, no need to use sudo"),this.spawnSyncLog(t[0],t.slice(1));const{name:r}=this.app,n=`"${r} would like to update"`,i=this.sudoWithArgs(n);this._logger.info(`Running as non-root user, using sudo to install: ${i}`);let s='"';return(/pkexec/i.test(i[0])||i[0]==="sudo")&&(s=""),this.spawnSyncLog(i[0],[...i.length>1?i.slice(1):[],`${s}/bin/bash`,"-c",`'${t.join(" ")}'${s}`])}sudoWithArgs(t){const r=this.determineSudoCommand(),n=[r];return/kdesudo/i.test(r)?(n.push("--comment",t),n.push("-c")):/gksudo/i.test(r)?n.push("--message",t):/pkexec/i.test(r)&&n.push("--disable-internal-agent"),n}hasCommand(t){try{return this.spawnSyncLog("command",["-v",t]),!0}catch{return!1}}determineSudoCommand(){const t=["gksudo","kdesudo","pkexec","beesu"];for(const r of t)if(this.hasCommand(r))return r;return"sudo"}detectPackageManager(t){var r;const n=(r=process.env.ELECTRON_BUILDER_LINUX_PACKAGE_MANAGER)===null||r===void 0?void 0:r.trim();if(n)return n;for(const i of t)if(this.hasCommand(i))return i;return this._logger.warn(`No package manager found in the list: ${t.join(", ")}. Defaulting to the first one: ${t[0]}`),t[0]}}dr.LinuxUpdater=Gv;Object.defineProperty(Mr,"__esModule",{value:!0});Mr.DebUpdater=void 0;const Wv=ce,sl=Tt,Vv=dr;class Qs extends Vv.LinuxUpdater{constructor(t,r){super(t,r)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,Wv.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:n,downloadUpdateOptions:t,task:async(i,s)=>{this.listenerCount(sl.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(sl.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(n.url,i,s)}})}doInstall(t){const r=this.installerPath;if(r==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;if(!this.hasCommand("dpkg")&&!this.hasCommand("apt"))return this.dispatchError(new Error("Neither dpkg nor apt command found. Cannot install .deb package.")),!1;const n=["dpkg","apt"],i=this.detectPackageManager(n);try{Qs.installWithCommandRunner(i,r,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(s){return this.dispatchError(s),!1}return t.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(t,r,n,i){var s;if(t==="dpkg")try{n(["dpkg","-i",r])}catch(o){i.warn((s=o.message)!==null&&s!==void 0?s:o),i.warn("dpkg installation failed, trying to fix broken dependencies with apt-get"),n(["apt-get","install","-f","-y"])}else if(t==="apt")i.warn("Using apt to install a local .deb. This may fail for unsigned packages unless properly configured."),n(["apt","install","-y","--allow-unauthenticated","--allow-downgrades","--allow-change-held-packages",r]);else throw new Error(`Package manager ${t} not supported`)}}Mr.DebUpdater=Qs;var Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.PacmanUpdater=void 0;const ol=Tt,Yv=ce,zv=dr;class Zs extends zv.LinuxUpdater{constructor(t,r){super(t,r)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,Yv.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:n,downloadUpdateOptions:t,task:async(i,s)=>{this.listenerCount(ol.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(ol.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(n.url,i,s)}})}doInstall(t){const r=this.installerPath;if(r==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;try{Zs.installWithCommandRunner(r,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(n){return this.dispatchError(n),!1}return t.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(t,r,n){var i;try{r(["pacman","-U","--noconfirm",t])}catch(s){n.warn((i=s.message)!==null&&i!==void 0?i:s),n.warn("pacman installation failed, attempting to update package database and retry");try{r(["pacman","-Sy","--noconfirm"]),r(["pacman","-U","--noconfirm",t])}catch(o){throw n.error("Retry after pacman -Sy failed"),o}}}}Br.PacmanUpdater=Zs;var jr={};Object.defineProperty(jr,"__esModule",{value:!0});jr.RpmUpdater=void 0;const al=Tt,Xv=ce,Kv=dr;class eo extends Kv.LinuxUpdater{constructor(t,r){super(t,r)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,Xv.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:n,downloadUpdateOptions:t,task:async(i,s)=>{this.listenerCount(al.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(al.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(n.url,i,s)}})}doInstall(t){const r=this.installerPath;if(r==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const n=["zypper","dnf","yum","rpm"],i=this.detectPackageManager(n);try{eo.installWithCommandRunner(i,r,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(s){return this.dispatchError(s),!1}return t.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(t,r,n,i){if(t==="zypper")return n(["zypper","--non-interactive","--no-refresh","install","--allow-unsigned-rpm","-f",r]);if(t==="dnf")return n(["dnf","install","--nogpgcheck","-y",r]);if(t==="yum")return n(["yum","install","--nogpgcheck","-y",r]);if(t==="rpm")return i.warn("Installing with rpm only (no dependency resolution)."),n(["rpm","-Uvh","--replacepkgs","--replacefiles","--nodeps",r]);throw new Error(`Package manager ${t} not supported`)}}jr.RpmUpdater=eo;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.MacUpdater=void 0;const ll=fe,ns=At,Jv=vt,cl=se,Qv=Hf,Zv=mt,e_=ce,ul=Yn,fl=Wr;class t_ extends Zv.AppUpdater{constructor(t,r){super(t,r),this.nativeUpdater=V.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",n=>{this._logger.warn(n),this.emit("error",n)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(t){this._logger.debug!=null&&this._logger.debug(t)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(t=>{t&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(t){let r=t.updateInfoAndProvider.provider.resolveFiles(t.updateInfoAndProvider.info);const n=this._logger,i="sysctl.proc_translated";let s=!1;try{this.debug("Checking for macOS Rosetta environment"),s=(0,ul.execFileSync)("sysctl",[i],{encoding:"utf8"}).includes(`${i}: 1`),n.info(`Checked for macOS Rosetta environment (isRosetta=${s})`)}catch(f){n.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${f}`)}let o=!1;try{this.debug("Checking for arm64 in uname");const h=(0,ul.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");n.info(`Checked 'uname -a': arm64=${h}`),o=o||h}catch(f){n.warn(`uname shell command to check for arm64 failed: ${f}`)}o=o||process.arch==="arm64"||s;const a=f=>{var h;return f.url.pathname.includes("arm64")||((h=f.info.url)===null||h===void 0?void 0:h.includes("arm64"))};o&&r.some(a)?r=r.filter(f=>o===a(f)):r=r.filter(f=>!a(f));const l=(0,e_.findFile)(r,"zip",["pkg","dmg"]);if(l==null)throw(0,ll.newError)(`ZIP file not provided: ${(0,ll.safeStringifyJson)(r)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const d=t.updateInfoAndProvider.provider,c="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:l,downloadUpdateOptions:t,task:async(f,h)=>{const m=cl.join(this.downloadedUpdateHelper.cacheDir,c),w=()=>(0,ns.pathExistsSync)(m)?!t.disableDifferentialDownload:(n.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let E=!0;w()&&(E=await this.differentialDownloadInstaller(l,t,f,d,c)),E&&await this.httpExecutor.download(l.url,f,h)},done:async f=>{if(!t.disableDifferentialDownload)try{const h=cl.join(this.downloadedUpdateHelper.cacheDir,c);await(0,ns.copyFile)(f.downloadedFile,h)}catch(h){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${h.message}`)}return this.updateDownloaded(l,f)}})}async updateDownloaded(t,r){var n;const i=r.downloadedFile,s=(n=t.info.size)!==null&&n!==void 0?n:(await(0,ns.stat)(i)).size,o=this._logger,a=`fileToProxy=${t.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${a})`),this.server=(0,Qv.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${a})`),this.server.on("close",()=>{o.info(`Proxy server for native Squirrel.Mac is closed (${a})`)});const l=d=>{const c=d.address();return typeof c=="string"?c:`http://127.0.0.1:${c==null?void 0:c.port}`};return await new Promise((d,c)=>{const f=(0,fl.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),h=Buffer.from(`autoupdater:${f}`,"ascii"),m=`/${(0,fl.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(w,E)=>{const A=w.url;if(o.info(`${A} requested`),A==="/"){if(!w.headers.authorization||w.headers.authorization.indexOf("Basic ")===-1){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),o.warn("No authenthication info");return}const P=w.headers.authorization.split(" ")[1],$=Buffer.from(P,"base64").toString("ascii"),[K,ee]=$.split(":");if(K!=="autoupdater"||ee!==f){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),o.warn("Invalid authenthication credentials");return}const j=Buffer.from(`{ "url": "${l(this.server)}${m}" }`);E.writeHead(200,{"Content-Type":"application/json","Content-Length":j.length}),E.end(j);return}if(!A.startsWith(m)){o.warn(`${A} requested, but not supported`),E.writeHead(404),E.end();return}o.info(`${m} requested by Squirrel.Mac, pipe ${i}`);let S=!1;E.on("finish",()=>{S||(this.nativeUpdater.removeListener("error",c),d([]))});const T=(0,Jv.createReadStream)(i);T.on("error",P=>{try{E.end()}catch($){o.warn(`cannot end response: ${$}`)}S=!0,this.nativeUpdater.removeListener("error",c),c(new Error(`Cannot pipe "${i}": ${P}`))}),E.writeHead(200,{"Content-Type":"application/zip","Content-Length":s}),T.pipe(E)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${a})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${l(this.server)}, ${a})`),this.nativeUpdater.setFeedURL({url:l(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${h.toString("base64")}`}}),this.dispatchUpdateDownloaded(r),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",c),this.nativeUpdater.checkForUpdates()):d([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}}Hr.MacUpdater=t_;var qr={},to={};Object.defineProperty(to,"__esModule",{value:!0});to.verifySignature=n_;const dl=fe,Du=Yn,r_=zn,hl=se;function $u(e,t){return['set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",e],{shell:!0,timeout:t}]}function n_(e,t,r){return new Promise((n,i)=>{const s=t.replace(/'/g,"''");r.info(`Verifying signature ${s}`),(0,Du.execFile)(...$u(`"Get-AuthenticodeSignature -LiteralPath '${s}' | ConvertTo-Json -Compress"`,20*1e3),(o,a,l)=>{var d;try{if(o!=null||l){is(r,o,l,i),n(null);return}const c=i_(a);if(c.Status===0){try{const w=hl.normalize(c.Path),E=hl.normalize(t);if(r.info(`LiteralPath: ${w}. Update Path: ${E}`),w!==E){is(r,new Error(`LiteralPath of ${w} is different than ${E}`),l,i),n(null);return}}catch(w){r.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(d=w.message)!==null&&d!==void 0?d:w.stack}`)}const h=(0,dl.parseDn)(c.SignerCertificate.Subject);let m=!1;for(const w of e){const E=(0,dl.parseDn)(w);if(E.size?m=Array.from(E.keys()).every(S=>E.get(S)===h.get(S)):w===h.get("CN")&&(r.warn(`Signature validated using only CN ${w}. Please add your full Distinguished Name (DN) to publisherNames configuration`),m=!0),m){n(null);return}}}const f=`publisherNames: ${e.join(" | ")}, raw info: `+JSON.stringify(c,(h,m)=>h==="RawData"?void 0:m,2);r.warn(`Sign verification failed, installer signed with incorrect certificate: ${f}`),n(f)}catch(c){is(r,c,null,i),n(null);return}})})}function i_(e){const t=JSON.parse(e);delete t.PrivateKey,delete t.IsOSBinary,delete t.SignatureType;const r=t.SignerCertificate;return r!=null&&(delete r.Archived,delete r.Extensions,delete r.Handle,delete r.HasPrivateKey,delete r.SubjectName),t}function is(e,t,r,n){if(s_()){e.warn(`Cannot execute Get-AuthenticodeSignature: ${t||r}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,Du.execFileSync)(...$u("ConvertTo-Json test",10*1e3))}catch(i){e.warn(`Cannot execute ConvertTo-Json: ${i.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}t!=null&&n(t),r&&n(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${r}. Failing signature validation due to unknown stderr.`))}function s_(){const e=r_.release();return e.startsWith("6.")&&!e.startsWith("6.3")}Object.defineProperty(qr,"__esModule",{value:!0});qr.NsisUpdater=void 0;const In=fe,pl=se,o_=Bt,a_=rn,ml=Tt,l_=ce,c_=At,u_=to,gl=_t;class f_ extends o_.BaseUpdater{constructor(t,r){super(t,r),this._verifyUpdateCodeSignature=(n,i)=>(0,u_.verifySignature)(n,i,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(t){t&&(this._verifyUpdateCodeSignature=t)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,l_.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:t,fileInfo:n,task:async(i,s,o,a)=>{const l=n.packageInfo,d=l!=null&&o!=null;if(d&&t.disableWebInstaller)throw(0,In.newError)(`Unable to download new version ${t.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!d&&!t.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(d||t.disableDifferentialDownload||await this.differentialDownloadInstaller(n,t,i,r,In.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(n.url,i,s);const c=await this.verifySignature(i);if(c!=null)throw await a(),(0,In.newError)(`New version ${t.updateInfoAndProvider.info.version} is not signed by the application owner: ${c}`,"ERR_UPDATER_INVALID_SIGNATURE");if(d&&await this.differentialDownloadWebPackage(t,l,o,r))try{await this.httpExecutor.download(new gl.URL(l.path),o,{headers:t.requestHeaders,cancellationToken:t.cancellationToken,sha512:l.sha512})}catch(f){try{await(0,c_.unlink)(o)}catch{}throw f}}})}async verifySignature(t){let r;try{if(r=(await this.configOnDisk.value).publisherName,r==null)return null}catch(n){if(n.code==="ENOENT")return null;throw n}return await this._verifyUpdateCodeSignature(Array.isArray(r)?r:[r],t)}doInstall(t){const r=this.installerPath;if(r==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const n=["--updated"];t.isSilent&&n.push("/S"),t.isForceRunAfter&&n.push("--force-run"),this.installDirectory&&n.push(`/D=${this.installDirectory}`);const i=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;i!=null&&n.push(`--package-file=${i}`);const s=()=>{this.spawnLog(pl.join(process.resourcesPath,"elevate.exe"),[r].concat(n)).catch(o=>this.dispatchError(o))};return t.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),s(),!0):(this.spawnLog(r,n).catch(o=>{const a=o.code;this._logger.info(`Cannot run installer: error code: ${a}, error message: "${o.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),a==="UNKNOWN"||a==="EACCES"?s():a==="ENOENT"?V.shell.openPath(r).catch(l=>this.dispatchError(l)):this.dispatchError(o)}),!0)}async differentialDownloadWebPackage(t,r,n,i){if(r.blockMapSize==null)return!0;try{const s={newUrl:new gl.URL(r.path),oldFile:pl.join(this.downloadedUpdateHelper.cacheDir,In.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:n,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,cancellationToken:t.cancellationToken};this.listenerCount(ml.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(ml.DOWNLOAD_PROGRESS,o)),await new a_.FileWithEmbeddedBlockMapDifferentialDownloader(r,this.httpExecutor,s).download()}catch(s){return this._logger.error(`Cannot download differentially, fallback to full download: ${s.stack||s}`),process.platform==="win32"}return!1}}qr.NsisUpdater=f_;(function(e){var t=be&&be.__createBinding||(Object.create?function(A,S,T,P){P===void 0&&(P=T);var $=Object.getOwnPropertyDescriptor(S,T);(!$||("get"in $?!S.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return S[T]}}),Object.defineProperty(A,P,$)}:function(A,S,T,P){P===void 0&&(P=T),A[P]=S[T]}),r=be&&be.__exportStar||function(A,S){for(var T in A)T!=="default"&&!Object.prototype.hasOwnProperty.call(S,T)&&t(S,A,T)};Object.defineProperty(e,"__esModule",{value:!0}),e.NsisUpdater=e.MacUpdater=e.RpmUpdater=e.PacmanUpdater=e.DebUpdater=e.AppImageUpdater=e.Provider=e.NoOpLogger=e.AppUpdater=e.BaseUpdater=void 0;const n=At,i=se;var s=Bt;Object.defineProperty(e,"BaseUpdater",{enumerable:!0,get:function(){return s.BaseUpdater}});var o=mt;Object.defineProperty(e,"AppUpdater",{enumerable:!0,get:function(){return o.AppUpdater}}),Object.defineProperty(e,"NoOpLogger",{enumerable:!0,get:function(){return o.NoOpLogger}});var a=ce;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return a.Provider}});var l=kr;Object.defineProperty(e,"AppImageUpdater",{enumerable:!0,get:function(){return l.AppImageUpdater}});var d=Mr;Object.defineProperty(e,"DebUpdater",{enumerable:!0,get:function(){return d.DebUpdater}});var c=Br;Object.defineProperty(e,"PacmanUpdater",{enumerable:!0,get:function(){return c.PacmanUpdater}});var f=jr;Object.defineProperty(e,"RpmUpdater",{enumerable:!0,get:function(){return f.RpmUpdater}});var h=Hr;Object.defineProperty(e,"MacUpdater",{enumerable:!0,get:function(){return h.MacUpdater}});var m=qr;Object.defineProperty(e,"NsisUpdater",{enumerable:!0,get:function(){return m.NsisUpdater}}),r(Tt,e);let w;function E(){if(process.platform==="win32")w=new qr.NsisUpdater;else if(process.platform==="darwin")w=new Hr.MacUpdater;else{w=new kr.AppImageUpdater;try{const A=i.join(process.resourcesPath,"package-type");if(!(0,n.existsSync)(A))return w;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const S=(0,n.readFileSync)(A).toString().trim();switch(console.info("Found package-type:",S),S){case"deb":w=new Mr.DebUpdater;break;case"rpm":w=new jr.RpmUpdater;break;case"pacman":w=new Br.PacmanUpdater;break;default:break}}catch(A){console.warn("Unable to detect 'package-type' for autoUpdater (rpm/deb/pacman support). If you'd like to expand support, please consider contributing to electron-builder",A.message)}}return w}Object.defineProperty(e,"autoUpdater",{enumerable:!0,get:()=>w||E()})})(Be);let ss=null;function El(){return ss||(ss=require("serialport").SerialPort||require("serialport")),ss}class d_{constructor(t){qt(this,"ports",new Map);qt(this,"mainWindow");this.mainWindow=t}async listPorts(){try{const t=El();if(!t)throw new Error("SerialPort module not loaded");return{success:!0,ports:await t.list()}}catch(t){return console.error("Error listing ports:",t),{success:!1,error:t.message}}}async open(t,r){this.ports.has(t)&&await this.close(t);const n=El();return new Promise(i=>{const s=new n({path:r.path,baudRate:r.baudRate,dataBits:r.dataBits||8,stopBits:r.stopBits||1,parity:r.parity||"none",autoOpen:!1});s.open(o=>{o?i({success:!1,error:o.message}):(this.ports.set(t,s),s.on("data",a=>{this.mainWindow&&!this.mainWindow.isDestroyed()&&this.mainWindow.webContents.send("serial:data",{connectionId:t,data:a})}),s.on("close",()=>{this.mainWindow&&!this.mainWindow.isDestroyed()&&this.mainWindow.webContents.send("serial:closed",{connectionId:t}),this.ports.delete(t)}),s.on("error",a=>{this.mainWindow&&!this.mainWindow.isDestroyed()&&this.mainWindow.webContents.send("serial:error",{connectionId:t,error:a.message})}),i({success:!0}))})})}async close(t){return new Promise(r=>{const n=this.ports.get(t);n&&n.isOpen?n.close(i=>{i?r({success:!1,error:i.message}):(this.ports.delete(t),r({success:!0}))}):(this.ports.delete(t),r({success:!0}))})}async write(t,r){return new Promise(n=>{const i=this.ports.get(t);if(i&&i.isOpen){const s=typeof r=="string"?r:Buffer.from(r);i.write(s,o=>{n(o?{success:!1,error:o.message}:{success:!0})})}else n({success:!1,error:"Port not open"})})}}process.env.APP_ROOT=Ce.join(__dirname,"..");const Or=process.env.VITE_DEV_SERVER_URL,h_=Ce.join(process.env.APP_ROOT,"dist-electron"),ro=Ce.join(process.env.APP_ROOT,"dist");process.env.VITE_PUBLIC=Or?Ce.join(process.env.APP_ROOT,"public"):ro;let B,Ue=null;const Fu=Ce.join(V.app.getPath("userData"),"window-state.json"),yl=()=>{if(B&&!B.isDestroyed()){const e=B.getBounds();require("fs").writeFileSync(Fu,JSON.stringify(e))}},p_=()=>{try{const e=require("fs").readFileSync(Fu,"utf8");return JSON.parse(e)}catch{return{width:1e3,height:800}}};function xu(){const e=p_();B=new V.BrowserWindow({...e,icon:Ce.join(process.env.VITE_PUBLIC,"electron-vite.svg"),backgroundColor:"#1e1e1e",show:!0,webPreferences:{preload:Ce.join(__dirname,"preload.js")},titleBarStyle:"hidden",titleBarOverlay:{color:"#3c3c3c",symbolColor:"#cccccc",height:30}}),B.once("ready-to-show",()=>{B==null||B.show()}),B.on("resize",()=>yl()),B.on("move",()=>yl()),Ue=new d_(B),V.ipcMain.handle("serial:list-ports",async()=>Ue==null?void 0:Ue.listPorts()),V.ipcMain.handle("serial:open",async(a,{connectionId:l,options:d})=>Ue==null?void 0:Ue.open(l,d)),V.ipcMain.handle("serial:close",async(a,{connectionId:l})=>Ue==null?void 0:Ue.close(l)),V.ipcMain.handle("serial:write",async(a,{connectionId:l,data:d})=>Ue==null?void 0:Ue.write(l,d));const t=require("mqtt"),r=new Map;V.ipcMain.handle("mqtt:connect",async(a,{connectionId:l,config:d})=>new Promise(c=>{if(r.has(l)){const P=r.get(l);P.connected&&P.end(!0),r.delete(l)}const f=d.protocol||"tcp";let h=d.host;if(h&&h.includes("://"))try{h=new URL(h).hostname}catch{h=h.split("://")[1]}let m=`${f}://${h}:${d.port}`;if(f==="ws"||f==="wss"){const P=d.path||"/mqtt",$=P.startsWith("/")?P:`/${P}`;m+=$}const w={clientId:d.clientId,username:d.username,password:d.password,keepalive:d.keepAlive||60,clean:d.cleanSession!==void 0?d.cleanSession:!0,connectTimeout:(d.connectTimeout||30)*1e3,reconnectPeriod:d.autoReconnect?1e3:0,wsOptions:{origin:"http://localhost",headers:{"User-Agent":`SerialTool/${V.app.getVersion()}`}}};console.log(`[MQTT] Connecting to ${m}`,w);let E=!1,A=null;try{A=t.connect(m,w)}catch(P){return console.error(`[MQTT] Sync Error ${l}:`,P),c({success:!1,error:P.message})}const S=()=>{E||(E=!0,r.set(l,A),c({success:!0}),B!=null&&B.isDestroyed()||B==null||B.webContents.send("mqtt:status",{connectionId:l,status:"connected"}),d.topics&&Array.isArray(d.topics)&&d.topics.forEach(P=>A.subscribe(P)))},T=P=>{E||(E=!0,A.end(!0),c({success:!1,error:P}))};A.on("connect",S),A.on("message",(P,$)=>{B!=null&&B.isDestroyed()||B==null||B.webContents.send("mqtt:message",{connectionId:l,topic:P,payload:$})}),A.on("error",P=>{console.error(`[MQTT] Error ${l}:`,P),E?B!=null&&B.isDestroyed()||B==null||B.webContents.send("mqtt:error",{connectionId:l,error:P.message}):T(P.message)}),A.on("close",()=>{console.log(`[MQTT] Closed: ${l}`),E?B!=null&&B.isDestroyed()||B==null||B.webContents.send("mqtt:status",{connectionId:l,status:"disconnected"}):T("Connection closed or timed out")})})),V.ipcMain.handle("mqtt:disconnect",async(a,{connectionId:l})=>{const d=r.get(l);return d?(d.end(),r.delete(l),{success:!0}):{success:!1,error:"Client not found"}}),V.ipcMain.handle("mqtt:publish",async(a,{connectionId:l,topic:d,payload:c,options:f})=>{const h=r.get(l);return h?new Promise(m=>{h.publish(d,Buffer.from(c),f,w=>{m(w?{success:!1,error:w.message}:{success:!0})})}):{success:!1,error:"Client not connected"}}),V.ipcMain.handle("mqtt:subscribe",async(a,{connectionId:l,topic:d})=>{const c=r.get(l);return c?(c.subscribe(d),{success:!0}):{success:!1}}),V.ipcMain.handle("mqtt:unsubscribe",async(a,{connectionId:l,topic:d})=>{const c=r.get(l);return c?(c.unsubscribe(d),{success:!0}):{success:!1}});const n=require("fs").promises,i=Ce.join(V.app.getPath("userData"),"sessions.json");V.ipcMain.handle("session:save",async(a,l)=>{try{return await n.writeFile(i,JSON.stringify(l,null,2)),{success:!0}}catch(d){return{success:!1,error:d.message}}}),V.ipcMain.handle("session:load",async()=>{try{const a=await n.readFile(i,"utf-8");return{success:!0,data:JSON.parse(a)}}catch(a){return a.code==="ENOENT"?{success:!0,data:[]}:{success:!1,error:a.message}}}),B.webContents.on("did-finish-load",()=>{B==null||B.webContents.send("main-process-message",new Date().toLocaleString())});const{exec:s}=require("node:child_process");V.ipcMain.handle("com0com:exec",async(a,l)=>new Promise(d=>{if(!l.startsWith("setupc"))return d({success:!1,error:"Unauthorized command"});(f=>{s(f,(h,m,w)=>{if(h)if(console.log(`[com0com] Command failed: ${f}`,h.message),f.startsWith("setupc")&&!f.includes("\\")&&!f.includes("/")){const E=Ce.join(V.app.getPath("userData"),"drivers","com0com","setupc.exe");console.log(`[com0com] Trying local path: ${E}`);const{spawn:A}=require("node:child_process"),S=Ce.dirname(E),P=f.substring(6).trim().split(/\s+/);console.log(`[com0com] Spawning: ${E} in ${S} with args:`,P);const $=A(E,P,{cwd:S,shell:!0});let K="",ee="";$.stdout.on("data",j=>K+=j.toString()),$.stderr.on("data",j=>ee+=j.toString()),$.on("error",j=>{console.log("[com0com] Spawn error:",j),d({success:!1,error:j.message,stderr:ee})}),$.on("close",j=>{j===0?(console.log("[com0com] Spawn success"),d({success:!0,stdout:K})):(console.log(`[com0com] Spawn exited with ${j}`),d({success:!1,error:`Process exited with code ${j}`,stderr:ee}))})}else d({success:!1,error:h.message,stderr:w});else d({success:!0,stdout:m})})})(l)})),V.ipcMain.handle("com0com:install",async()=>{const a=!!Or;let l="";a?l=Ce.join(__dirname,"../resources/drivers/com0com_setup.exe"):l=Ce.join(process.resourcesPath,"resources/drivers/com0com_setup.exe");const d=Ce.join(V.app.getPath("userData"),"drivers","com0com");try{if(!(await n.stat(l)).isFile())return{success:!1,error:`Installer path is not a file: ${l}`}}catch{return{success:!1,error:`Installer not found at: ${l}`}}return new Promise(c=>{const{spawn:f}=require("node:child_process"),h=f(l,["/S",`/D=${d}`],{windowsHide:!1,shell:!0,cwd:Ce.dirname(l)});h.on("error",m=>{c({success:!1,error:m.message})}),h.on("close",m=>{c(m===0?{success:!0,path:d}:{success:!1,error:`Installer exited with code ${m}`})})})}),Or?B.loadURL(Or):B.loadFile(Ce.join(ro,"index.html")),Ut=new g_(B.webContents),new m_(B).init()}class m_{constructor(t){qt(this,"win");this.win=t,Be.autoUpdater.autoDownload=!1,Be.autoUpdater.autoInstallOnAppQuit=!0}init(){Be.autoUpdater.on("checking-for-update",()=>{this.win.webContents.send("update:status",{type:"checking"})}),Be.autoUpdater.on("update-available",t=>{this.win.webContents.send("update:status",{type:"available",version:t.version,releaseNotes:t.releaseNotes,releaseDate:t.releaseDate})}),Be.autoUpdater.on("update-not-available",t=>{this.win.webContents.send("update:status",{type:"not-available",version:t.version})}),Be.autoUpdater.on("error",t=>{this.win.webContents.send("update:status",{type:"error",error:t.message})}),Be.autoUpdater.on("download-progress",t=>{this.win.webContents.send("update:progress",t)}),Be.autoUpdater.on("update-downloaded",t=>{this.win.webContents.send("update:status",{type:"downloaded",version:t.version})}),V.ipcMain.handle("update:check",()=>Be.autoUpdater.checkForUpdates()),V.ipcMain.handle("update:download",()=>Be.autoUpdater.downloadUpdate()),V.ipcMain.handle("update:install",()=>{Be.autoUpdater.quitAndInstall()})}}class g_{constructor(t){qt(this,"servers",new Map);qt(this,"webContents");this.webContents=t}startServer(t){const r=require("net");if(this.servers.has(t))return{success:!1,error:"Server already running"};const n=r.createServer(i=>{i.on("data",s=>{this.webContents.send("tcp:data",{port:t,data:s})}),i.on("error",s=>{this.webContents.send("tcp:error",{port:t,error:s.message})}),i.on("close",()=>{this.webContents.send("tcp:client-disconnected",{port:t})})});return n.listen(t,()=>{this.servers.set(t,n),this.webContents.send("tcp:server-started",{port:t})}),n.on("error",i=>{this.webContents.send("tcp:error",{port:t,error:i.message})}),{success:!0}}stopServer(t){const r=this.servers.get(t);return r?(r.close(),this.servers.delete(t),this.webContents.send("tcp:server-stopped",{port:t}),!0):!1}write(t,r){}}let Ut=null;V.ipcMain.handle("tcp:start",async(e,t)=>Ut?Ut.startServer(t):{success:!1,error:"Service not initialized"});V.ipcMain.handle("tcp:stop",async(e,t)=>Ut?Ut.stopServer(t):!1);V.ipcMain.handle("tcp:write",async(e,{port:t,data:r})=>(Ut&&Ut.write(t,r),!0));V.ipcMain.handle("app:version",()=>V.app.getVersion());V.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(V.app.quit(),B=null)});V.app.on("activate",()=>{V.BrowserWindow.getAllWindows().length===0&&xu()});V.app.whenReady().then(xu);exports.MAIN_DIST=h_;exports.RENDERER_DIST=ro;exports.VITE_DEV_SERVER_URL=Or;
